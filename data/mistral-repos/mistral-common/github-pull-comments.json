{
  "104": {
    "issue_comments": [],
    "review_comments": [
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2156511844",
        "pull_request_review_id": 2942179610,
        "id": 2156511844,
        "node_id": "PRRC_kwDOLuT1gc6AicJk",
        "diff_hunk": "@@ -46,6 +47,16 @@ class InstructRequest(MistralBase, Generic[ChatMessageType, ToolType]):\n     system_prompt: Optional[str] = None\n     available_tools: Optional[List[ToolType]] = None\n     truncate_at_max_tokens: Optional[int] = None\n+    continue_final_message: bool = False\n+\n+    def model_post_init(self, context: Any) -> None:\n+        super().model_post_init(context)\n+\n+        if self.continue_final_message:\n+            if len(self.messages) == 0 or not isinstance(self.messages[-1], AssistantMessage):\n+                raise ValueError(\"Cannot continue final message if the last message is not an assistant message.\")\n+            self.messages[-1].prefix = True",
        "path": "src/mistral_common/tokens/instruct/request.py",
        "commit_id": "5e489f1fb689a6af4362ee1d3db6a92c51fd486f",
        "original_commit_id": "5e489f1fb689a6af4362ee1d3db6a92c51fd486f",
        "user": {
          "login": "patrickvonplaten",
          "id": 23423619,
          "node_id": "MDQ6VXNlcjIzNDIzNjE5",
          "avatar_url": "https://avatars.githubusercontent.com/u/23423619?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/patrickvonplaten",
          "html_url": "https://github.com/patrickvonplaten",
          "followers_url": "https://api.github.com/users/patrickvonplaten/followers",
          "following_url": "https://api.github.com/users/patrickvonplaten/following{/other_user}",
          "gists_url": "https://api.github.com/users/patrickvonplaten/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/patrickvonplaten/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/patrickvonplaten/subscriptions",
          "organizations_url": "https://api.github.com/users/patrickvonplaten/orgs",
          "repos_url": "https://api.github.com/users/patrickvonplaten/repos",
          "events_url": "https://api.github.com/users/patrickvonplaten/events{/privacy}",
          "received_events_url": "https://api.github.com/users/patrickvonplaten/received_events",
          "type": "User",
          "user_view_type": "public",
          "site_admin": false
        },
        "body": "Hmm don't like automatically overwriting attributes. Let's just throw an error if prefix is not True",
        "created_at": "2025-06-19T09:01:11Z",
        "updated_at": "2025-06-19T09:01:12Z",
        "html_url": "https://github.com/mistralai/mistral-common/pull/104#discussion_r2156511844",
        "pull_request_url": "https://api.github.com/repos/mistralai/mistral-common/pulls/104",
        "author_association": "CONTRIBUTOR",
        "_links": {
          "self": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2156511844"
          },
          "html": {
            "href": "https://github.com/mistralai/mistral-common/pull/104#discussion_r2156511844"
          },
          "pull_request": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/104"
          }
        },
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2156511844/reactions",
          "total_count": 0,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "start_line": null,
        "original_start_line": null,
        "start_side": null,
        "line": 58,
        "original_line": 58,
        "side": "RIGHT",
        "original_position": 29,
        "position": 29,
        "subject_type": "line"
      },
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2156512149",
        "pull_request_review_id": 2942180110,
        "id": 2156512149,
        "node_id": "PRRC_kwDOLuT1gc6AicOV",
        "diff_hunk": "@@ -46,6 +47,16 @@ class InstructRequest(MistralBase, Generic[ChatMessageType, ToolType]):\n     system_prompt: Optional[str] = None\n     available_tools: Optional[List[ToolType]] = None\n     truncate_at_max_tokens: Optional[int] = None\n+    continue_final_message: bool = False\n+\n+    def model_post_init(self, context: Any) -> None:",
        "path": "src/mistral_common/tokens/instruct/request.py",
        "commit_id": "5e489f1fb689a6af4362ee1d3db6a92c51fd486f",
        "original_commit_id": "5e489f1fb689a6af4362ee1d3db6a92c51fd486f",
        "user": {
          "login": "patrickvonplaten",
          "id": 23423619,
          "node_id": "MDQ6VXNlcjIzNDIzNjE5",
          "avatar_url": "https://avatars.githubusercontent.com/u/23423619?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/patrickvonplaten",
          "html_url": "https://github.com/patrickvonplaten",
          "followers_url": "https://api.github.com/users/patrickvonplaten/followers",
          "following_url": "https://api.github.com/users/patrickvonplaten/following{/other_user}",
          "gists_url": "https://api.github.com/users/patrickvonplaten/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/patrickvonplaten/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/patrickvonplaten/subscriptions",
          "organizations_url": "https://api.github.com/users/patrickvonplaten/orgs",
          "repos_url": "https://api.github.com/users/patrickvonplaten/repos",
          "events_url": "https://api.github.com/users/patrickvonplaten/events{/privacy}",
          "received_events_url": "https://api.github.com/users/patrickvonplaten/received_events",
          "type": "User",
          "user_view_type": "public",
          "site_admin": false
        },
        "body": "can we just make this a validator and not a post init? ",
        "created_at": "2025-06-19T09:01:22Z",
        "updated_at": "2025-06-19T09:01:22Z",
        "html_url": "https://github.com/mistralai/mistral-common/pull/104#discussion_r2156512149",
        "pull_request_url": "https://api.github.com/repos/mistralai/mistral-common/pulls/104",
        "author_association": "CONTRIBUTOR",
        "_links": {
          "self": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2156512149"
          },
          "html": {
            "href": "https://github.com/mistralai/mistral-common/pull/104#discussion_r2156512149"
          },
          "pull_request": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/104"
          }
        },
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2156512149/reactions",
          "total_count": 0,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "start_line": null,
        "original_start_line": null,
        "start_side": null,
        "line": 52,
        "original_line": 52,
        "side": "RIGHT",
        "original_position": 23,
        "position": 23,
        "subject_type": "line"
      },
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2156513457",
        "pull_request_review_id": 2942182616,
        "id": 2156513457,
        "node_id": "PRRC_kwDOLuT1gc6Aicix",
        "diff_hunk": "@@ -78,6 +80,16 @@ class ChatCompletionRequest(BaseCompletionRequest, Generic[ChatMessageType]):\n     tools: Optional[List[Tool]] = None\n     tool_choice: ToolChoice = ToolChoice.auto\n     truncate_for_context_length: bool = False\n+    continue_final_message: bool = False\n+\n+    def model_post_init(self, context: Any) -> None:\n+        super().model_post_init(context)\n+\n+        if self.continue_final_message:\n+            if len(self.messages) == 0 or not isinstance(self.messages[-1], AssistantMessage):\n+                raise ValueError(\"Cannot continue final message if the last message is not an assistant message.\")\n+            self.messages[-1].prefix = True",
        "path": "src/mistral_common/protocol/instruct/request.py",
        "commit_id": "5e489f1fb689a6af4362ee1d3db6a92c51fd486f",
        "original_commit_id": "5e489f1fb689a6af4362ee1d3db6a92c51fd486f",
        "user": {
          "login": "patrickvonplaten",
          "id": 23423619,
          "node_id": "MDQ6VXNlcjIzNDIzNjE5",
          "avatar_url": "https://avatars.githubusercontent.com/u/23423619?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/patrickvonplaten",
          "html_url": "https://github.com/patrickvonplaten",
          "followers_url": "https://api.github.com/users/patrickvonplaten/followers",
          "following_url": "https://api.github.com/users/patrickvonplaten/following{/other_user}",
          "gists_url": "https://api.github.com/users/patrickvonplaten/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/patrickvonplaten/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/patrickvonplaten/subscriptions",
          "organizations_url": "https://api.github.com/users/patrickvonplaten/orgs",
          "repos_url": "https://api.github.com/users/patrickvonplaten/repos",
          "events_url": "https://api.github.com/users/patrickvonplaten/events{/privacy}",
          "received_events_url": "https://api.github.com/users/patrickvonplaten/received_events",
          "type": "User",
          "user_view_type": "public",
          "site_admin": false
        },
        "body": "Can we not overwrite data here? Would prefer to just raise if it's wrong",
        "created_at": "2025-06-19T09:01:58Z",
        "updated_at": "2025-06-19T09:01:58Z",
        "html_url": "https://github.com/mistralai/mistral-common/pull/104#discussion_r2156513457",
        "pull_request_url": "https://api.github.com/repos/mistralai/mistral-common/pulls/104",
        "author_association": "CONTRIBUTOR",
        "_links": {
          "self": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2156513457"
          },
          "html": {
            "href": "https://github.com/mistralai/mistral-common/pull/104#discussion_r2156513457"
          },
          "pull_request": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/104"
          }
        },
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2156513457/reactions",
          "total_count": 0,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "start_line": null,
        "original_start_line": null,
        "start_side": null,
        "line": 91,
        "original_line": 91,
        "side": "RIGHT",
        "original_position": 28,
        "position": 28,
        "subject_type": "line"
      }
    ]
  },
  "103": {
    "issue_comments": [],
    "review_comments": [
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2152510803",
        "pull_request_review_id": 2936052347,
        "id": 2152510803,
        "node_id": "PRRC_kwDOLuT1gc6ATLVT",
        "diff_hunk": "@@ -44,15 +44,19 @@ def to_openai(self) -> Dict[str, Union[str, Dict[str, str]]]:\n \n         Should be implemented by subclasses.\n         \"\"\"\n-        raise NotImplementedError(\"to_openai method not implemented for {cls.__name__}\")\n+        raise NotImplementedError(\n+            f\"to_openai method not implemented for {cls.__name__}\"",
        "path": "src/mistral_common/protocol/instruct/messages.py",
        "commit_id": "430fa488587401c0103b2e1f3ccb710a0d867808",
        "original_commit_id": "8f1c0f06c02f21a822c3ecdbb2cbfe7e503b392a",
        "user": {
          "login": "juliendenize",
          "id": 40604584,
          "node_id": "MDQ6VXNlcjQwNjA0NTg0",
          "avatar_url": "https://avatars.githubusercontent.com/u/40604584?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/juliendenize",
          "html_url": "https://github.com/juliendenize",
          "followers_url": "https://api.github.com/users/juliendenize/followers",
          "following_url": "https://api.github.com/users/juliendenize/following{/other_user}",
          "gists_url": "https://api.github.com/users/juliendenize/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/juliendenize/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/juliendenize/subscriptions",
          "organizations_url": "https://api.github.com/users/juliendenize/orgs",
          "repos_url": "https://api.github.com/users/juliendenize/repos",
          "events_url": "https://api.github.com/users/juliendenize/events{/privacy}",
          "received_events_url": "https://api.github.com/users/juliendenize/received_events",
          "type": "User",
          "user_view_type": "public",
          "site_admin": false
        },
        "body": "```suggestion\r\n            f\"to_openai method not implemented for {type(self).__name__}\"\r\n```",
        "created_at": "2025-06-17T15:02:57Z",
        "updated_at": "2025-06-17T15:03:40Z",
        "html_url": "https://github.com/mistralai/mistral-common/pull/103#discussion_r2152510803",
        "pull_request_url": "https://api.github.com/repos/mistralai/mistral-common/pulls/103",
        "author_association": "CONTRIBUTOR",
        "_links": {
          "self": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2152510803"
          },
          "html": {
            "href": "https://github.com/mistralai/mistral-common/pull/103#discussion_r2152510803"
          },
          "pull_request": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/103"
          }
        },
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2152510803/reactions",
          "total_count": 0,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "start_line": null,
        "original_start_line": null,
        "start_side": null,
        "line": null,
        "original_line": 48,
        "side": "RIGHT",
        "original_position": 6,
        "position": null,
        "subject_type": "line"
      },
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2152511730",
        "pull_request_review_id": 2936052347,
        "id": 2152511730,
        "node_id": "PRRC_kwDOLuT1gc6ATLjy",
        "diff_hunk": "@@ -219,7 +223,9 @@ def to_openai(self) -> Dict[str, Union[str, List[Dict[str, Union[str, Dict[str,\n \n         Should be implemented by subclasses.\n         \"\"\"\n-        raise NotImplementedError(\"to_openai method not implemented for {cls.__name__}\")\n+        raise NotImplementedError(\n+            f\"to_openai method not implemented for {cls.__name__}\"",
        "path": "src/mistral_common/protocol/instruct/messages.py",
        "commit_id": "430fa488587401c0103b2e1f3ccb710a0d867808",
        "original_commit_id": "8f1c0f06c02f21a822c3ecdbb2cbfe7e503b392a",
        "user": {
          "login": "juliendenize",
          "id": 40604584,
          "node_id": "MDQ6VXNlcjQwNjA0NTg0",
          "avatar_url": "https://avatars.githubusercontent.com/u/40604584?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/juliendenize",
          "html_url": "https://github.com/juliendenize",
          "followers_url": "https://api.github.com/users/juliendenize/followers",
          "following_url": "https://api.github.com/users/juliendenize/following{/other_user}",
          "gists_url": "https://api.github.com/users/juliendenize/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/juliendenize/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/juliendenize/subscriptions",
          "organizations_url": "https://api.github.com/users/juliendenize/orgs",
          "repos_url": "https://api.github.com/users/juliendenize/repos",
          "events_url": "https://api.github.com/users/juliendenize/events{/privacy}",
          "received_events_url": "https://api.github.com/users/juliendenize/received_events",
          "type": "User",
          "user_view_type": "public",
          "site_admin": false
        },
        "body": "```suggestion\r\n            f\"to_openai method not implemented for {type(self).__name__}\"\r\n```",
        "created_at": "2025-06-17T15:03:20Z",
        "updated_at": "2025-06-17T15:03:40Z",
        "html_url": "https://github.com/mistralai/mistral-common/pull/103#discussion_r2152511730",
        "pull_request_url": "https://api.github.com/repos/mistralai/mistral-common/pulls/103",
        "author_association": "CONTRIBUTOR",
        "_links": {
          "self": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2152511730"
          },
          "html": {
            "href": "https://github.com/mistralai/mistral-common/pull/103#discussion_r2152511730"
          },
          "pull_request": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/103"
          }
        },
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2152511730/reactions",
          "total_count": 0,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "start_line": null,
        "original_start_line": null,
        "start_side": null,
        "line": null,
        "original_line": 227,
        "side": "RIGHT",
        "original_position": 28,
        "position": null,
        "subject_type": "line"
      },
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2152525001",
        "pull_request_review_id": 2936073576,
        "id": 2152525001,
        "node_id": "PRRC_kwDOLuT1gc6ATOzJ",
        "diff_hunk": "@@ -44,15 +44,19 @@ def to_openai(self) -> Dict[str, Union[str, Dict[str, str]]]:\n \n         Should be implemented by subclasses.\n         \"\"\"\n-        raise NotImplementedError(\"to_openai method not implemented for {cls.__name__}\")\n+        raise NotImplementedError(\n+            f\"to_openai method not implemented for {type(self).__name__}\"\n+        )",
        "path": "src/mistral_common/protocol/instruct/messages.py",
        "commit_id": "430fa488587401c0103b2e1f3ccb710a0d867808",
        "original_commit_id": "c12c06e92a6bb539256fcfd8947be0cc54b25b32",
        "user": {
          "login": "juliendenize",
          "id": 40604584,
          "node_id": "MDQ6VXNlcjQwNjA0NTg0",
          "avatar_url": "https://avatars.githubusercontent.com/u/40604584?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/juliendenize",
          "html_url": "https://github.com/juliendenize",
          "followers_url": "https://api.github.com/users/juliendenize/followers",
          "following_url": "https://api.github.com/users/juliendenize/following{/other_user}",
          "gists_url": "https://api.github.com/users/juliendenize/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/juliendenize/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/juliendenize/subscriptions",
          "organizations_url": "https://api.github.com/users/juliendenize/orgs",
          "repos_url": "https://api.github.com/users/juliendenize/repos",
          "events_url": "https://api.github.com/users/juliendenize/events{/privacy}",
          "received_events_url": "https://api.github.com/users/juliendenize/received_events",
          "type": "User",
          "user_view_type": "public",
          "site_admin": false
        },
        "body": "```suggestion\r\n        raise NotImplementedError(f\"to_openai method not implemented for {type(self).__name__}\")\r\n```",
        "created_at": "2025-06-17T15:08:41Z",
        "updated_at": "2025-06-17T15:09:44Z",
        "html_url": "https://github.com/mistralai/mistral-common/pull/103#discussion_r2152525001",
        "pull_request_url": "https://api.github.com/repos/mistralai/mistral-common/pulls/103",
        "author_association": "CONTRIBUTOR",
        "_links": {
          "self": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2152525001"
          },
          "html": {
            "href": "https://github.com/mistralai/mistral-common/pull/103#discussion_r2152525001"
          },
          "pull_request": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/103"
          }
        },
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2152525001/reactions",
          "total_count": 0,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "start_line": null,
        "original_start_line": 47,
        "start_side": "RIGHT",
        "line": null,
        "original_line": 49,
        "side": "RIGHT",
        "original_position": 7,
        "position": null,
        "subject_type": "line"
      },
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2152525900",
        "pull_request_review_id": 2936073576,
        "id": 2152525900,
        "node_id": "PRRC_kwDOLuT1gc6ATPBM",
        "diff_hunk": "@@ -44,15 +44,19 @@ def to_openai(self) -> Dict[str, Union[str, Dict[str, str]]]:\n \n         Should be implemented by subclasses.\n         \"\"\"\n-        raise NotImplementedError(\"to_openai method not implemented for {cls.__name__}\")\n+        raise NotImplementedError(\n+            f\"to_openai method not implemented for {type(self).__name__}\"\n+        )\n \n     @classmethod\n     def from_openai(cls, openai_chunk: Dict[str, Union[str, Dict[str, str]]]) -> \"BaseContentChunk\":\n         r\"\"\"Converts the OpenAI chunk to the Mistral format.\n \n         Should be implemented by subclasses.\n         \"\"\"\n-        raise NotImplementedError(\"from_openai method not implemented for {cls.__name__}\")\n+        raise NotImplementedError(\n+            f\"from_openai method not implemented for {cls.__name__}\"\n+        )",
        "path": "src/mistral_common/protocol/instruct/messages.py",
        "commit_id": "430fa488587401c0103b2e1f3ccb710a0d867808",
        "original_commit_id": "c12c06e92a6bb539256fcfd8947be0cc54b25b32",
        "user": {
          "login": "juliendenize",
          "id": 40604584,
          "node_id": "MDQ6VXNlcjQwNjA0NTg0",
          "avatar_url": "https://avatars.githubusercontent.com/u/40604584?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/juliendenize",
          "html_url": "https://github.com/juliendenize",
          "followers_url": "https://api.github.com/users/juliendenize/followers",
          "following_url": "https://api.github.com/users/juliendenize/following{/other_user}",
          "gists_url": "https://api.github.com/users/juliendenize/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/juliendenize/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/juliendenize/subscriptions",
          "organizations_url": "https://api.github.com/users/juliendenize/orgs",
          "repos_url": "https://api.github.com/users/juliendenize/repos",
          "events_url": "https://api.github.com/users/juliendenize/events{/privacy}",
          "received_events_url": "https://api.github.com/users/juliendenize/received_events",
          "type": "User",
          "user_view_type": "public",
          "site_admin": false
        },
        "body": "```suggestion\r\n        raise NotImplementedError(f\"from_openai method not implemented for {cls.__name__}\")\r\n```",
        "created_at": "2025-06-17T15:09:01Z",
        "updated_at": "2025-06-17T15:09:44Z",
        "html_url": "https://github.com/mistralai/mistral-common/pull/103#discussion_r2152525900",
        "pull_request_url": "https://api.github.com/repos/mistralai/mistral-common/pulls/103",
        "author_association": "CONTRIBUTOR",
        "_links": {
          "self": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2152525900"
          },
          "html": {
            "href": "https://github.com/mistralai/mistral-common/pull/103#discussion_r2152525900"
          },
          "pull_request": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/103"
          }
        },
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2152525900/reactions",
          "total_count": 0,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "start_line": null,
        "original_start_line": 57,
        "start_side": "RIGHT",
        "line": null,
        "original_line": 59,
        "side": "RIGHT",
        "original_position": 18,
        "position": null,
        "subject_type": "line"
      },
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2152526642",
        "pull_request_review_id": 2936073576,
        "id": 2152526642,
        "node_id": "PRRC_kwDOLuT1gc6ATPMy",
        "diff_hunk": "@@ -219,7 +223,9 @@ def to_openai(self) -> Dict[str, Union[str, List[Dict[str, Union[str, Dict[str,\n \n         Should be implemented by subclasses.\n         \"\"\"\n-        raise NotImplementedError(\"to_openai method not implemented for {cls.__name__}\")\n+        raise NotImplementedError(\n+            f\"to_openai method not implemented for {type(self).__name__}\"\n+        )",
        "path": "src/mistral_common/protocol/instruct/messages.py",
        "commit_id": "430fa488587401c0103b2e1f3ccb710a0d867808",
        "original_commit_id": "c12c06e92a6bb539256fcfd8947be0cc54b25b32",
        "user": {
          "login": "juliendenize",
          "id": 40604584,
          "node_id": "MDQ6VXNlcjQwNjA0NTg0",
          "avatar_url": "https://avatars.githubusercontent.com/u/40604584?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/juliendenize",
          "html_url": "https://github.com/juliendenize",
          "followers_url": "https://api.github.com/users/juliendenize/followers",
          "following_url": "https://api.github.com/users/juliendenize/following{/other_user}",
          "gists_url": "https://api.github.com/users/juliendenize/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/juliendenize/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/juliendenize/subscriptions",
          "organizations_url": "https://api.github.com/users/juliendenize/orgs",
          "repos_url": "https://api.github.com/users/juliendenize/repos",
          "events_url": "https://api.github.com/users/juliendenize/events{/privacy}",
          "received_events_url": "https://api.github.com/users/juliendenize/received_events",
          "type": "User",
          "user_view_type": "public",
          "site_admin": false
        },
        "body": "```suggestion\r\n        raise NotImplementedError(f\"to_openai method not implemented for {type(self).__name__}\")\r\n```",
        "created_at": "2025-06-17T15:09:19Z",
        "updated_at": "2025-06-17T15:09:44Z",
        "html_url": "https://github.com/mistralai/mistral-common/pull/103#discussion_r2152526642",
        "pull_request_url": "https://api.github.com/repos/mistralai/mistral-common/pulls/103",
        "author_association": "CONTRIBUTOR",
        "_links": {
          "self": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2152526642"
          },
          "html": {
            "href": "https://github.com/mistralai/mistral-common/pull/103#discussion_r2152526642"
          },
          "pull_request": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/103"
          }
        },
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2152526642/reactions",
          "total_count": 0,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "start_line": null,
        "original_start_line": 226,
        "start_side": "RIGHT",
        "line": null,
        "original_line": 228,
        "side": "RIGHT",
        "original_position": 29,
        "position": null,
        "subject_type": "line"
      },
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2152527299",
        "pull_request_review_id": 2936073576,
        "id": 2152527299,
        "node_id": "PRRC_kwDOLuT1gc6ATPXD",
        "diff_hunk": "@@ -229,7 +235,9 @@ def from_openai(\n \n         Should be implemented by subclasses.\n         \"\"\"\n-        raise NotImplementedError(\"from_openai method not implemented for {cls.__name__}.\")\n+        raise NotImplementedError(\n+            f\"from_openai method not implemented for {cls.__name__}.\"\n+        )",
        "path": "src/mistral_common/protocol/instruct/messages.py",
        "commit_id": "430fa488587401c0103b2e1f3ccb710a0d867808",
        "original_commit_id": "c12c06e92a6bb539256fcfd8947be0cc54b25b32",
        "user": {
          "login": "juliendenize",
          "id": 40604584,
          "node_id": "MDQ6VXNlcjQwNjA0NTg0",
          "avatar_url": "https://avatars.githubusercontent.com/u/40604584?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/juliendenize",
          "html_url": "https://github.com/juliendenize",
          "followers_url": "https://api.github.com/users/juliendenize/followers",
          "following_url": "https://api.github.com/users/juliendenize/following{/other_user}",
          "gists_url": "https://api.github.com/users/juliendenize/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/juliendenize/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/juliendenize/subscriptions",
          "organizations_url": "https://api.github.com/users/juliendenize/orgs",
          "repos_url": "https://api.github.com/users/juliendenize/repos",
          "events_url": "https://api.github.com/users/juliendenize/events{/privacy}",
          "received_events_url": "https://api.github.com/users/juliendenize/received_events",
          "type": "User",
          "user_view_type": "public",
          "site_admin": false
        },
        "body": "```suggestion\r\n        raise NotImplementedError(f\"from_openai method not implemented for {cls.__name__}.\")\r\n```",
        "created_at": "2025-06-17T15:09:34Z",
        "updated_at": "2025-06-17T15:09:44Z",
        "html_url": "https://github.com/mistralai/mistral-common/pull/103#discussion_r2152527299",
        "pull_request_url": "https://api.github.com/repos/mistralai/mistral-common/pulls/103",
        "author_association": "CONTRIBUTOR",
        "_links": {
          "self": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2152527299"
          },
          "html": {
            "href": "https://github.com/mistralai/mistral-common/pull/103#discussion_r2152527299"
          },
          "pull_request": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/103"
          }
        },
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2152527299/reactions",
          "total_count": 0,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "start_line": null,
        "original_start_line": 238,
        "start_side": "RIGHT",
        "line": null,
        "original_line": 240,
        "side": "RIGHT",
        "original_position": 40,
        "position": null,
        "subject_type": "line"
      }
    ]
  },
  "102": {
    "issue_comments": [],
    "review_comments": [
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2152530885",
        "pull_request_review_id": 2936084794,
        "id": 2152530885,
        "node_id": "PRRC_kwDOLuT1gc6ATQPF",
        "diff_hunk": "@@ -141,7 +141,9 @@ def transform_image(image: Image.Image, new_size: Tuple[int, int]) -> np.ndarray\n         Transformed image with shape (C, H, W).\n     \"\"\"\n     if not is_cv2_installed():\n-        raise ImportError(\"OpenCV is required for this function. Install it with 'pip install mistral_common[opencv]'\")\n+        raise ImportError(\n+            \"OpenCV is required for this function. Install it with 'pip install mistral-common[opencv]'\"\n+        )",
        "path": "src/mistral_common/tokens/tokenizers/multimodal.py",
        "commit_id": "5237a09b77cbdbf9cc7b2ac9c899222e02921287",
        "original_commit_id": "bfe3c1c5352d751e26a8567b35c1c1f06e362b91",
        "user": {
          "login": "juliendenize",
          "id": 40604584,
          "node_id": "MDQ6VXNlcjQwNjA0NTg0",
          "avatar_url": "https://avatars.githubusercontent.com/u/40604584?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/juliendenize",
          "html_url": "https://github.com/juliendenize",
          "followers_url": "https://api.github.com/users/juliendenize/followers",
          "following_url": "https://api.github.com/users/juliendenize/following{/other_user}",
          "gists_url": "https://api.github.com/users/juliendenize/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/juliendenize/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/juliendenize/subscriptions",
          "organizations_url": "https://api.github.com/users/juliendenize/orgs",
          "repos_url": "https://api.github.com/users/juliendenize/repos",
          "events_url": "https://api.github.com/users/juliendenize/events{/privacy}",
          "received_events_url": "https://api.github.com/users/juliendenize/received_events",
          "type": "User",
          "user_view_type": "public",
          "site_admin": false
        },
        "body": "```suggestion\r\n        raise ImportError(\"OpenCV is required for this function. Install it with 'pip install mistral-common[opencv]'\")\r\n```",
        "created_at": "2025-06-17T15:11:09Z",
        "updated_at": "2025-06-17T15:11:20Z",
        "html_url": "https://github.com/mistralai/mistral-common/pull/102#discussion_r2152530885",
        "pull_request_url": "https://api.github.com/repos/mistralai/mistral-common/pulls/102",
        "author_association": "CONTRIBUTOR",
        "_links": {
          "self": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2152530885"
          },
          "html": {
            "href": "https://github.com/mistralai/mistral-common/pull/102#discussion_r2152530885"
          },
          "pull_request": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/102"
          }
        },
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2152530885/reactions",
          "total_count": 0,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "start_line": null,
        "original_start_line": 144,
        "start_side": "RIGHT",
        "line": null,
        "original_line": 146,
        "side": "RIGHT",
        "original_position": 7,
        "position": null,
        "subject_type": "line"
      }
    ]
  },
  "99": {
    "issue_comments": [
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/issues/comments/2969785988",
        "html_url": "https://github.com/mistralai/mistral-common/pull/99#issuecomment-2969785988",
        "issue_url": "https://api.github.com/repos/mistralai/mistral-common/issues/99",
        "id": 2969785988,
        "node_id": "IC_kwDOLuT1gc6xA1aE",
        "user": {
          "login": "juliendenize",
          "id": 40604584,
          "node_id": "MDQ6VXNlcjQwNjA0NTg0",
          "avatar_url": "https://avatars.githubusercontent.com/u/40604584?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/juliendenize",
          "html_url": "https://github.com/juliendenize",
          "followers_url": "https://api.github.com/users/juliendenize/followers",
          "following_url": "https://api.github.com/users/juliendenize/following{/other_user}",
          "gists_url": "https://api.github.com/users/juliendenize/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/juliendenize/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/juliendenize/subscriptions",
          "organizations_url": "https://api.github.com/users/juliendenize/orgs",
          "repos_url": "https://api.github.com/users/juliendenize/repos",
          "events_url": "https://api.github.com/users/juliendenize/events{/privacy}",
          "received_events_url": "https://api.github.com/users/juliendenize/received_events",
          "type": "User",
          "user_view_type": "public",
          "site_admin": false
        },
        "created_at": "2025-06-13T09:51:21Z",
        "updated_at": "2025-06-13T09:51:21Z",
        "author_association": "CONTRIBUTOR",
        "body": "Changed the following:\r\n- to_string is now deprecated and refer to decode with SpecialTokenPolicy = KEEP\r\n- now decode for SPM does not  decode normal tokens and instead does the same as to_string. Two reasons for that: to not introduce backward incompatibility and SPM is kinda deprecated in our part so we shouldn't spend too much time on it.\r\n- tested id_to_byte_piece for tekken and added special_token_policy arg.",
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/issues/comments/2969785988/reactions",
          "total_count": 0,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "performed_via_github_app": null
      }
    ],
    "review_comments": [
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2144815908",
        "pull_request_review_id": 2924379687,
        "id": 2144815908,
        "node_id": "PRRC_kwDOLuT1gc5_10sk",
        "diff_hunk": "@@ -184,8 +198,18 @@ def encode(self, s: str, bos: bool, eos: bool) -> List[int]:\n         \"\"\"Convert a string to a list of token ids.\"\"\"\n \n     @abstractmethod\n-    def decode(self, t: List[int]) -> str:\n-        r\"\"\"Convert the token ids to a string.\"\"\"\n+    def decode(self, tokens: List[int], special_token_policy: Optional[SpecialTokenPolicy] = None) -> str:\n+        r\"\"\"Decode the token ids to a string.\n+\n+        Args:\n+            tokens: The token ids to decode.\n+            special_token_policy: The policy to use for special tokens.\n+                Passing `None` is deprecated and will be changed\n+                to `SpecialTokenPolicy.IGNORE` in `mistral_common=1.7.0`.",
        "path": "src/mistral_common/tokens/tokenizers/base.py",
        "commit_id": "ae62bb579ce8dfaf32b9d7bc897b43c2871a8b82",
        "original_commit_id": "99fcc3d1968f18c3091f09164756e8980e8aa8ef",
        "user": {
          "login": "patrickvonplaten",
          "id": 23423619,
          "node_id": "MDQ6VXNlcjIzNDIzNjE5",
          "avatar_url": "https://avatars.githubusercontent.com/u/23423619?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/patrickvonplaten",
          "html_url": "https://github.com/patrickvonplaten",
          "followers_url": "https://api.github.com/users/patrickvonplaten/followers",
          "following_url": "https://api.github.com/users/patrickvonplaten/following{/other_user}",
          "gists_url": "https://api.github.com/users/patrickvonplaten/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/patrickvonplaten/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/patrickvonplaten/subscriptions",
          "organizations_url": "https://api.github.com/users/patrickvonplaten/orgs",
          "repos_url": "https://api.github.com/users/patrickvonplaten/repos",
          "events_url": "https://api.github.com/users/patrickvonplaten/events{/privacy}",
          "received_events_url": "https://api.github.com/users/patrickvonplaten/received_events",
          "type": "User",
          "user_view_type": "public",
          "site_admin": false
        },
        "body": "```suggestion\r\n                Passing `None` will default to `self._special_token_policy`.\r\n                Note that passing `None` will be deprecated `special_token_policy` will default to `SpecialTokenPolicy.IGNORE` in `mistral_common=1.7.0`.\r\n```",
        "created_at": "2025-06-13T11:09:14Z",
        "updated_at": "2025-06-13T11:09:14Z",
        "html_url": "https://github.com/mistralai/mistral-common/pull/99#discussion_r2144815908",
        "pull_request_url": "https://api.github.com/repos/mistralai/mistral-common/pulls/99",
        "author_association": "CONTRIBUTOR",
        "_links": {
          "self": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2144815908"
          },
          "html": {
            "href": "https://github.com/mistralai/mistral-common/pull/99#discussion_r2144815908"
          },
          "pull_request": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/99"
          }
        },
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2144815908/reactions",
          "total_count": 0,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "start_line": null,
        "original_start_line": 207,
        "start_side": "RIGHT",
        "line": null,
        "original_line": 208,
        "side": "RIGHT",
        "original_position": 43,
        "position": null,
        "subject_type": "line"
      },
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2144820318",
        "pull_request_review_id": 2924384941,
        "id": 2144820318,
        "node_id": "PRRC_kwDOLuT1gc5_11xe",
        "diff_hunk": "@@ -311,11 +344,14 @@ def encode_instruct(self, request: InstructRequestType) -> TokenizedType:\n         \"\"\"\n \n     @abstractmethod\n-    def decode(self, tokens: List[int]) -> str:\n+    def decode(self, tokens: List[int], special_token_policy: Optional[SpecialTokenPolicy] = None) -> str:\n         r\"\"\"Convert token ids to string\n \n         Args:\n             tokens: The token ids to decode.\n+            special_token_policy: The policy to use for special tokens.\n+                Passing `None` is deprecated and will be changed",
        "path": "src/mistral_common/tokens/tokenizers/base.py",
        "commit_id": "ae62bb579ce8dfaf32b9d7bc897b43c2871a8b82",
        "original_commit_id": "99fcc3d1968f18c3091f09164756e8980e8aa8ef",
        "user": {
          "login": "patrickvonplaten",
          "id": 23423619,
          "node_id": "MDQ6VXNlcjIzNDIzNjE5",
          "avatar_url": "https://avatars.githubusercontent.com/u/23423619?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/patrickvonplaten",
          "html_url": "https://github.com/patrickvonplaten",
          "followers_url": "https://api.github.com/users/patrickvonplaten/followers",
          "following_url": "https://api.github.com/users/patrickvonplaten/following{/other_user}",
          "gists_url": "https://api.github.com/users/patrickvonplaten/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/patrickvonplaten/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/patrickvonplaten/subscriptions",
          "organizations_url": "https://api.github.com/users/patrickvonplaten/orgs",
          "repos_url": "https://api.github.com/users/patrickvonplaten/repos",
          "events_url": "https://api.github.com/users/patrickvonplaten/events{/privacy}",
          "received_events_url": "https://api.github.com/users/patrickvonplaten/received_events",
          "type": "User",
          "user_view_type": "public",
          "site_admin": false
        },
        "body": "Same change as in https://github.com/mistralai/mistral-common/pull/99/files#r2144815908",
        "created_at": "2025-06-13T11:10:09Z",
        "updated_at": "2025-06-13T11:10:09Z",
        "html_url": "https://github.com/mistralai/mistral-common/pull/99#discussion_r2144820318",
        "pull_request_url": "https://api.github.com/repos/mistralai/mistral-common/pulls/99",
        "author_association": "CONTRIBUTOR",
        "_links": {
          "self": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2144820318"
          },
          "html": {
            "href": "https://github.com/mistralai/mistral-common/pull/99#discussion_r2144820318"
          },
          "pull_request": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/99"
          }
        },
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2144820318/reactions",
          "total_count": 0,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "start_line": null,
        "original_start_line": null,
        "start_side": null,
        "line": null,
        "original_line": 353,
        "side": "RIGHT",
        "original_position": 80,
        "position": null,
        "subject_type": "line"
      },
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2144821637",
        "pull_request_review_id": 2924386470,
        "id": 2144821637,
        "node_id": "PRRC_kwDOLuT1gc5_12GF",
        "diff_hunk": "@@ -151,21 +152,27 @@ def encode_instruct(\n \n         return Tokenized(\n             tokens=tokens,\n-            text=self.tokenizer.to_string(tokens),\n+            text=self.tokenizer.decode(tokens, special_token_policy=SpecialTokenPolicy.KEEP),\n             prefix_ids=prefix_ids,\n             images=images,\n         )\n \n-    def decode(self, tokens: List[int]) -> str:\n+    def decode(self, tokens: List[int], special_token_policy: Optional[SpecialTokenPolicy] = None) -> str:",
        "path": "src/mistral_common/tokens/tokenizers/instruct.py",
        "commit_id": "ae62bb579ce8dfaf32b9d7bc897b43c2871a8b82",
        "original_commit_id": "99fcc3d1968f18c3091f09164756e8980e8aa8ef",
        "user": {
          "login": "patrickvonplaten",
          "id": 23423619,
          "node_id": "MDQ6VXNlcjIzNDIzNjE5",
          "avatar_url": "https://avatars.githubusercontent.com/u/23423619?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/patrickvonplaten",
          "html_url": "https://github.com/patrickvonplaten",
          "followers_url": "https://api.github.com/users/patrickvonplaten/followers",
          "following_url": "https://api.github.com/users/patrickvonplaten/following{/other_user}",
          "gists_url": "https://api.github.com/users/patrickvonplaten/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/patrickvonplaten/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/patrickvonplaten/subscriptions",
          "organizations_url": "https://api.github.com/users/patrickvonplaten/orgs",
          "repos_url": "https://api.github.com/users/patrickvonplaten/repos",
          "events_url": "https://api.github.com/users/patrickvonplaten/events{/privacy}",
          "received_events_url": "https://api.github.com/users/patrickvonplaten/received_events",
          "type": "User",
          "user_view_type": "public",
          "site_admin": false
        },
        "body": "https://github.com/mistralai/mistral-common/pull/99/files#r2144820318",
        "created_at": "2025-06-13T11:10:26Z",
        "updated_at": "2025-06-13T11:10:26Z",
        "html_url": "https://github.com/mistralai/mistral-common/pull/99#discussion_r2144821637",
        "pull_request_url": "https://api.github.com/repos/mistralai/mistral-common/pulls/99",
        "author_association": "CONTRIBUTOR",
        "_links": {
          "self": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2144821637"
          },
          "html": {
            "href": "https://github.com/mistralai/mistral-common/pull/99#discussion_r2144821637"
          },
          "pull_request": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/99"
          }
        },
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2144821637/reactions",
          "total_count": 0,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "start_line": null,
        "original_start_line": null,
        "start_side": null,
        "line": 160,
        "original_line": 160,
        "side": "RIGHT",
        "original_position": 19,
        "position": 19,
        "subject_type": "line"
      },
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2144822700",
        "pull_request_review_id": 2924387797,
        "id": 2144822700,
        "node_id": "PRRC_kwDOLuT1gc5_12Ws",
        "diff_hunk": "@@ -151,21 +152,27 @@ def encode_instruct(\n \n         return Tokenized(\n             tokens=tokens,\n-            text=self.tokenizer.to_string(tokens),\n+            text=self.tokenizer.decode(tokens, special_token_policy=SpecialTokenPolicy.KEEP),\n             prefix_ids=prefix_ids,\n             images=images,\n         )\n \n-    def decode(self, tokens: List[int]) -> str:\n+    def decode(self, tokens: List[int], special_token_policy: Optional[SpecialTokenPolicy] = None) -> str:\n         r\"\"\"Decode tokens to a string.\n \n         Args:\n             tokens: The tokens to decode.\n+            special_token_policy: The policy to use for special tokens.",
        "path": "src/mistral_common/tokens/tokenizers/instruct.py",
        "commit_id": "ae62bb579ce8dfaf32b9d7bc897b43c2871a8b82",
        "original_commit_id": "99fcc3d1968f18c3091f09164756e8980e8aa8ef",
        "user": {
          "login": "patrickvonplaten",
          "id": 23423619,
          "node_id": "MDQ6VXNlcjIzNDIzNjE5",
          "avatar_url": "https://avatars.githubusercontent.com/u/23423619?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/patrickvonplaten",
          "html_url": "https://github.com/patrickvonplaten",
          "followers_url": "https://api.github.com/users/patrickvonplaten/followers",
          "following_url": "https://api.github.com/users/patrickvonplaten/following{/other_user}",
          "gists_url": "https://api.github.com/users/patrickvonplaten/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/patrickvonplaten/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/patrickvonplaten/subscriptions",
          "organizations_url": "https://api.github.com/users/patrickvonplaten/orgs",
          "repos_url": "https://api.github.com/users/patrickvonplaten/repos",
          "events_url": "https://api.github.com/users/patrickvonplaten/events{/privacy}",
          "received_events_url": "https://api.github.com/users/patrickvonplaten/received_events",
          "type": "User",
          "user_view_type": "public",
          "site_admin": false
        },
        "body": "https://github.com/mistralai/mistral-common/pull/99/files#r2144820318",
        "created_at": "2025-06-13T11:10:38Z",
        "updated_at": "2025-06-13T11:10:38Z",
        "html_url": "https://github.com/mistralai/mistral-common/pull/99#discussion_r2144822700",
        "pull_request_url": "https://api.github.com/repos/mistralai/mistral-common/pulls/99",
        "author_association": "CONTRIBUTOR",
        "_links": {
          "self": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2144822700"
          },
          "html": {
            "href": "https://github.com/mistralai/mistral-common/pull/99#discussion_r2144822700"
          },
          "pull_request": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/99"
          }
        },
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2144822700/reactions",
          "total_count": 0,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "start_line": null,
        "original_start_line": null,
        "start_side": null,
        "line": 165,
        "original_line": 165,
        "side": "RIGHT",
        "original_position": 24,
        "position": 24,
        "subject_type": "line"
      },
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2144825645",
        "pull_request_review_id": 2924391776,
        "id": 2144825645,
        "node_id": "PRRC_kwDOLuT1gc5_13Et",
        "diff_hunk": "@@ -461,7 +468,9 @@ def encode_fim(self, request: FIMRequest) -> Tokenized:\n             self.PREFIX,\n             *prefix_tokens,\n         ]\n-        return Tokenized(tokens=tokens, text=self.tokenizer.to_string(tokens))\n+        return Tokenized(\n+            tokens=tokens, text=self.tokenizer.decode(tokens, special_token_policy=SpecialTokenPolicy.KEEP)",
        "path": "src/mistral_common/tokens/tokenizers/instruct.py",
        "commit_id": "ae62bb579ce8dfaf32b9d7bc897b43c2871a8b82",
        "original_commit_id": "99fcc3d1968f18c3091f09164756e8980e8aa8ef",
        "user": {
          "login": "patrickvonplaten",
          "id": 23423619,
          "node_id": "MDQ6VXNlcjIzNDIzNjE5",
          "avatar_url": "https://avatars.githubusercontent.com/u/23423619?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/patrickvonplaten",
          "html_url": "https://github.com/patrickvonplaten",
          "followers_url": "https://api.github.com/users/patrickvonplaten/followers",
          "following_url": "https://api.github.com/users/patrickvonplaten/following{/other_user}",
          "gists_url": "https://api.github.com/users/patrickvonplaten/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/patrickvonplaten/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/patrickvonplaten/subscriptions",
          "organizations_url": "https://api.github.com/users/patrickvonplaten/orgs",
          "repos_url": "https://api.github.com/users/patrickvonplaten/repos",
          "events_url": "https://api.github.com/users/patrickvonplaten/events{/privacy}",
          "received_events_url": "https://api.github.com/users/patrickvonplaten/received_events",
          "type": "User",
          "user_view_type": "public",
          "site_admin": false
        },
        "body": "```suggestion\r\n            tokens=tokens, text=self.decode(tokens, special_token_policy=SpecialTokenPolicy.KEEP)\r\n```",
        "created_at": "2025-06-13T11:11:24Z",
        "updated_at": "2025-06-13T11:11:25Z",
        "html_url": "https://github.com/mistralai/mistral-common/pull/99#discussion_r2144825645",
        "pull_request_url": "https://api.github.com/repos/mistralai/mistral-common/pulls/99",
        "author_association": "CONTRIBUTOR",
        "_links": {
          "self": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2144825645"
          },
          "html": {
            "href": "https://github.com/mistralai/mistral-common/pull/99#discussion_r2144825645"
          },
          "pull_request": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/99"
          }
        },
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2144825645/reactions",
          "total_count": 0,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "start_line": null,
        "original_start_line": null,
        "start_side": null,
        "line": null,
        "original_line": 472,
        "side": "RIGHT",
        "original_position": 45,
        "position": null,
        "subject_type": "line"
      },
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2144829755",
        "pull_request_review_id": 2924396763,
        "id": 2144829755,
        "node_id": "PRRC_kwDOLuT1gc5_14E7",
        "diff_hunk": "@@ -100,7 +110,10 @@ def __init__(\n         \"\"\"\n         self._chat_completion_request_validator = validator\n         self._instruct_request_normalizer = request_normalizer\n-        self.instruct_tokenizer = instruct_tokenizer\n+        self.instruct_tokenizer: InstructTokenizer[InstructRequest, FIMRequest, TokenizedType, AssistantMessageType] = (\n+            instruct_tokenizer\n+        )\n+        self.raw_tokenizer: Tokenizer = instruct_tokenizer.tokenizer",
        "path": "src/mistral_common/tokens/tokenizers/mistral.py",
        "commit_id": "ae62bb579ce8dfaf32b9d7bc897b43c2871a8b82",
        "original_commit_id": "99fcc3d1968f18c3091f09164756e8980e8aa8ef",
        "user": {
          "login": "patrickvonplaten",
          "id": 23423619,
          "node_id": "MDQ6VXNlcjIzNDIzNjE5",
          "avatar_url": "https://avatars.githubusercontent.com/u/23423619?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/patrickvonplaten",
          "html_url": "https://github.com/patrickvonplaten",
          "followers_url": "https://api.github.com/users/patrickvonplaten/followers",
          "following_url": "https://api.github.com/users/patrickvonplaten/following{/other_user}",
          "gists_url": "https://api.github.com/users/patrickvonplaten/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/patrickvonplaten/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/patrickvonplaten/subscriptions",
          "organizations_url": "https://api.github.com/users/patrickvonplaten/orgs",
          "repos_url": "https://api.github.com/users/patrickvonplaten/repos",
          "events_url": "https://api.github.com/users/patrickvonplaten/events{/privacy}",
          "received_events_url": "https://api.github.com/users/patrickvonplaten/received_events",
          "type": "User",
          "user_view_type": "public",
          "site_admin": false
        },
        "body": "```suggestio\r\n```\r\n\r\nthis doesn't seem necessary to me - let's not increase the API too much no?",
        "created_at": "2025-06-13T11:12:22Z",
        "updated_at": "2025-06-13T11:12:23Z",
        "html_url": "https://github.com/mistralai/mistral-common/pull/99#discussion_r2144829755",
        "pull_request_url": "https://api.github.com/repos/mistralai/mistral-common/pulls/99",
        "author_association": "CONTRIBUTOR",
        "_links": {
          "self": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2144829755"
          },
          "html": {
            "href": "https://github.com/mistralai/mistral-common/pull/99#discussion_r2144829755"
          },
          "pull_request": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/99"
          }
        },
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2144829755/reactions",
          "total_count": 0,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "start_line": null,
        "original_start_line": null,
        "start_side": null,
        "line": null,
        "original_line": 116,
        "side": "RIGHT",
        "original_position": 34,
        "position": null,
        "subject_type": "line"
      },
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2144833673",
        "pull_request_review_id": 2924401504,
        "id": 2144833673,
        "node_id": "PRRC_kwDOLuT1gc5_15CJ",
        "diff_hunk": "@@ -132,33 +134,42 @@ def encode(self, s: str, bos: bool, eos: bool) -> List[int]:\n             t = [*t, self.eos_id]\n         return t\n \n-    def decode(self, t: List[int]) -> str:\n+    def decode(self, tokens: List[int], special_token_policy: Optional[SpecialTokenPolicy] = None) -> str:\n         r\"\"\"Decode the given list of token ids into a string.\n \n+        Note:\n+            Using `special_token_policy=SpecialTokenPolicy.KEEP` will keep the special tokens and the normal tokens as",
        "path": "src/mistral_common/tokens/tokenizers/sentencepiece.py",
        "commit_id": "ae62bb579ce8dfaf32b9d7bc897b43c2871a8b82",
        "original_commit_id": "99fcc3d1968f18c3091f09164756e8980e8aa8ef",
        "user": {
          "login": "patrickvonplaten",
          "id": 23423619,
          "node_id": "MDQ6VXNlcjIzNDIzNjE5",
          "avatar_url": "https://avatars.githubusercontent.com/u/23423619?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/patrickvonplaten",
          "html_url": "https://github.com/patrickvonplaten",
          "followers_url": "https://api.github.com/users/patrickvonplaten/followers",
          "following_url": "https://api.github.com/users/patrickvonplaten/following{/other_user}",
          "gists_url": "https://api.github.com/users/patrickvonplaten/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/patrickvonplaten/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/patrickvonplaten/subscriptions",
          "organizations_url": "https://api.github.com/users/patrickvonplaten/orgs",
          "repos_url": "https://api.github.com/users/patrickvonplaten/repos",
          "events_url": "https://api.github.com/users/patrickvonplaten/events{/privacy}",
          "received_events_url": "https://api.github.com/users/patrickvonplaten/received_events",
          "type": "User",
          "user_view_type": "public",
          "site_admin": false
        },
        "body": "same deprecation warning here as well no?",
        "created_at": "2025-06-13T11:13:16Z",
        "updated_at": "2025-06-13T11:13:16Z",
        "html_url": "https://github.com/mistralai/mistral-common/pull/99#discussion_r2144833673",
        "pull_request_url": "https://api.github.com/repos/mistralai/mistral-common/pulls/99",
        "author_association": "CONTRIBUTOR",
        "_links": {
          "self": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2144833673"
          },
          "html": {
            "href": "https://github.com/mistralai/mistral-common/pull/99#discussion_r2144833673"
          },
          "pull_request": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/99"
          }
        },
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2144833673/reactions",
          "total_count": 0,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "start_line": null,
        "original_start_line": null,
        "start_side": null,
        "line": 141,
        "original_line": 141,
        "side": "RIGHT",
        "original_position": 24,
        "position": 24,
        "subject_type": "line"
      },
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2144837004",
        "pull_request_review_id": 2924406031,
        "id": 2144837004,
        "node_id": "PRRC_kwDOLuT1gc5_152M",
        "diff_hunk": "@@ -173,6 +184,25 @@ def to_string(self, tokens: List[int]) -> str:\n \n         return text\n \n+    def to_string(self, tokens: List[int]) -> str:\n+        r\"\"\"[DEPRECATED] Converts a list of token ids into a string, keeping special tokens.\n+\n+        Use `decode` with `special_token_policy=SpecialTokenPolicy.KEEP` instead.\n+\n+        This is a convenient method for debugging.\n+        \"\"\"\n+        warnings.warn(\n+            (\n+                \"`to_string` is deprecated and will be removed in 1.7.0. \"\n+                \"Use `decode` with `special_token_policy=SpecialTokenPolicy.KEEP` instead.\"\n+            ),\n+            DeprecationWarning,",
        "path": "src/mistral_common/tokens/tokenizers/sentencepiece.py",
        "commit_id": "ae62bb579ce8dfaf32b9d7bc897b43c2871a8b82",
        "original_commit_id": "99fcc3d1968f18c3091f09164756e8980e8aa8ef",
        "user": {
          "login": "patrickvonplaten",
          "id": 23423619,
          "node_id": "MDQ6VXNlcjIzNDIzNjE5",
          "avatar_url": "https://avatars.githubusercontent.com/u/23423619?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/patrickvonplaten",
          "html_url": "https://github.com/patrickvonplaten",
          "followers_url": "https://api.github.com/users/patrickvonplaten/followers",
          "following_url": "https://api.github.com/users/patrickvonplaten/following{/other_user}",
          "gists_url": "https://api.github.com/users/patrickvonplaten/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/patrickvonplaten/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/patrickvonplaten/subscriptions",
          "organizations_url": "https://api.github.com/users/patrickvonplaten/orgs",
          "repos_url": "https://api.github.com/users/patrickvonplaten/repos",
          "events_url": "https://api.github.com/users/patrickvonplaten/events{/privacy}",
          "received_events_url": "https://api.github.com/users/patrickvonplaten/received_events",
          "type": "User",
          "user_view_type": "public",
          "site_admin": false
        },
        "body": "```suggestion\r\n            FutureWarning,\r\n```\r\n\r\nis better because it throws a warning by default",
        "created_at": "2025-06-13T11:14:07Z",
        "updated_at": "2025-06-13T11:14:07Z",
        "html_url": "https://github.com/mistralai/mistral-common/pull/99#discussion_r2144837004",
        "pull_request_url": "https://api.github.com/repos/mistralai/mistral-common/pulls/99",
        "author_association": "CONTRIBUTOR",
        "_links": {
          "self": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2144837004"
          },
          "html": {
            "href": "https://github.com/mistralai/mistral-common/pull/99#discussion_r2144837004"
          },
          "pull_request": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/99"
          }
        },
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2144837004/reactions",
          "total_count": 0,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "start_line": null,
        "original_start_line": null,
        "start_side": null,
        "line": null,
        "original_line": 199,
        "side": "RIGHT",
        "original_position": 86,
        "position": null,
        "subject_type": "line"
      },
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2144838235",
        "pull_request_review_id": 2924407695,
        "id": 2144838235,
        "node_id": "PRRC_kwDOLuT1gc5_16Jb",
        "diff_hunk": "@@ -93,20 +93,6 @@ class ModelData(TypedDict):\n     multimodal: MultimodalConfig\n \n \n-class SpecialTokenPolicy(Enum):",
        "path": "src/mistral_common/tokens/tokenizers/tekken.py",
        "commit_id": "ae62bb579ce8dfaf32b9d7bc897b43c2871a8b82",
        "original_commit_id": "99fcc3d1968f18c3091f09164756e8980e8aa8ef",
        "user": {
          "login": "patrickvonplaten",
          "id": 23423619,
          "node_id": "MDQ6VXNlcjIzNDIzNjE5",
          "avatar_url": "https://avatars.githubusercontent.com/u/23423619?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/patrickvonplaten",
          "html_url": "https://github.com/patrickvonplaten",
          "followers_url": "https://api.github.com/users/patrickvonplaten/followers",
          "following_url": "https://api.github.com/users/patrickvonplaten/following{/other_user}",
          "gists_url": "https://api.github.com/users/patrickvonplaten/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/patrickvonplaten/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/patrickvonplaten/subscriptions",
          "organizations_url": "https://api.github.com/users/patrickvonplaten/orgs",
          "repos_url": "https://api.github.com/users/patrickvonplaten/repos",
          "events_url": "https://api.github.com/users/patrickvonplaten/events{/privacy}",
          "received_events_url": "https://api.github.com/users/patrickvonplaten/received_events",
          "type": "User",
          "user_view_type": "public",
          "site_admin": false
        },
        "body": "makes sense to move out!",
        "created_at": "2025-06-13T11:14:26Z",
        "updated_at": "2025-06-13T11:14:26Z",
        "html_url": "https://github.com/mistralai/mistral-common/pull/99#discussion_r2144838235",
        "pull_request_url": "https://api.github.com/repos/mistralai/mistral-common/pulls/99",
        "author_association": "CONTRIBUTOR",
        "_links": {
          "self": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2144838235"
          },
          "html": {
            "href": "https://github.com/mistralai/mistral-common/pull/99#discussion_r2144838235"
          },
          "pull_request": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/99"
          }
        },
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2144838235/reactions",
          "total_count": 0,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "start_line": null,
        "original_start_line": null,
        "start_side": null,
        "line": 96,
        "original_line": 96,
        "side": "LEFT",
        "original_position": 20,
        "position": 20,
        "subject_type": "line"
      },
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2144838745",
        "pull_request_review_id": 2924408306,
        "id": 2144838745,
        "node_id": "PRRC_kwDOLuT1gc5_16RZ",
        "diff_hunk": "@@ -308,6 +294,18 @@ def special_token_policy(self) -> SpecialTokenPolicy:\n \n     @special_token_policy.setter\n     def special_token_policy(self, policy: SpecialTokenPolicy) -> None:\n+        r\"\"\"Set the policy for handling special tokens.\"\"\"\n+        if not isinstance(policy, SpecialTokenPolicy):\n+            raise ValueError(f\"Expected SpecialTokenPolicy, got {type(policy)}.\")\n+\n+        warnings.warn(\n+            (\n+                \"The attributed `special_token_policy` is deprecated and will be removed in 1.7.0. \"\n+                \"Please pass a special token policy explicitly to the relevant methods.\"\n+            ),\n+            DeprecationWarning,",
        "path": "src/mistral_common/tokens/tokenizers/tekken.py",
        "commit_id": "ae62bb579ce8dfaf32b9d7bc897b43c2871a8b82",
        "original_commit_id": "99fcc3d1968f18c3091f09164756e8980e8aa8ef",
        "user": {
          "login": "patrickvonplaten",
          "id": 23423619,
          "node_id": "MDQ6VXNlcjIzNDIzNjE5",
          "avatar_url": "https://avatars.githubusercontent.com/u/23423619?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/patrickvonplaten",
          "html_url": "https://github.com/patrickvonplaten",
          "followers_url": "https://api.github.com/users/patrickvonplaten/followers",
          "following_url": "https://api.github.com/users/patrickvonplaten/following{/other_user}",
          "gists_url": "https://api.github.com/users/patrickvonplaten/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/patrickvonplaten/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/patrickvonplaten/subscriptions",
          "organizations_url": "https://api.github.com/users/patrickvonplaten/orgs",
          "repos_url": "https://api.github.com/users/patrickvonplaten/repos",
          "events_url": "https://api.github.com/users/patrickvonplaten/events{/privacy}",
          "received_events_url": "https://api.github.com/users/patrickvonplaten/received_events",
          "type": "User",
          "user_view_type": "public",
          "site_admin": false
        },
        "body": "```suggestion\r\n            FutureWarning,\r\n```",
        "created_at": "2025-06-13T11:14:34Z",
        "updated_at": "2025-06-13T11:14:35Z",
        "html_url": "https://github.com/mistralai/mistral-common/pull/99#discussion_r2144838745",
        "pull_request_url": "https://api.github.com/repos/mistralai/mistral-common/pulls/99",
        "author_association": "CONTRIBUTOR",
        "_links": {
          "self": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2144838745"
          },
          "html": {
            "href": "https://github.com/mistralai/mistral-common/pull/99#discussion_r2144838745"
          },
          "pull_request": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/99"
          }
        },
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2144838745/reactions",
          "total_count": 0,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "start_line": null,
        "original_start_line": null,
        "start_side": null,
        "line": null,
        "original_line": 306,
        "side": "RIGHT",
        "original_position": 50,
        "position": null,
        "subject_type": "line"
      },
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2144840522",
        "pull_request_review_id": 2924410527,
        "id": 2144840522,
        "node_id": "PRRC_kwDOLuT1gc5_16tK",
        "diff_hunk": "@@ -405,25 +403,95 @@ def get_control_token(self, s: str) -> int:\n         else:\n             raise ValueError(f\"Unknown control token {s}\")\n \n-    def decode(self, tokens: List[int]) -> str:\n-        r\"\"\"Decode a list of token ids into a string.\"\"\"\n-        return \"\".join(self._decode_all(tokens, special_token_policy=self._special_token_policy))\n+    def decode(self, tokens: List[int], special_token_policy: Optional[SpecialTokenPolicy] = None) -> str:\n+        r\"\"\"Decode a list of token ids into a string.\n+\n+        Args:\n+            tokens: The list of token ids to decode.\n+            special_token_policy: The policy for handling special tokens.\n+                Use the tokenizer's [attribute][mistral_common.tokens.tokenizers.tekken.Tekkenizer.special_token_policy]\n+                if `None`. Passing `None` is deprecated and will be changed\n+                to `SpecialTokenPolicy.IGNORE` in `mistral_common=1.7.0`.\n+\n+        Returns:\n+            The decoded string.\n+        \"\"\"\n+        if special_token_policy is not None and not isinstance(special_token_policy, SpecialTokenPolicy):\n+            raise ValueError(\n+                f\"Expected `special_token_policy` to be None or SpecialTokenPolicy, got {type(special_token_policy)}.\"\n+            )\n+\n+        if special_token_policy is None:\n+            warnings.warn(\n+                (\n+                    f\"Using the tokenizer's special token policy ({self._special_token_policy}) is deprecated. \"\n+                    \"It will be removed in 1.7.0. \"\n+                    \"Please pass a special token policy explicitly. \"\n+                    \"Future default will be SpecialTokenPolicy.IGNORE.\"\n+                ),\n+                DeprecationWarning,",
        "path": "src/mistral_common/tokens/tokenizers/tekken.py",
        "commit_id": "ae62bb579ce8dfaf32b9d7bc897b43c2871a8b82",
        "original_commit_id": "99fcc3d1968f18c3091f09164756e8980e8aa8ef",
        "user": {
          "login": "patrickvonplaten",
          "id": 23423619,
          "node_id": "MDQ6VXNlcjIzNDIzNjE5",
          "avatar_url": "https://avatars.githubusercontent.com/u/23423619?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/patrickvonplaten",
          "html_url": "https://github.com/patrickvonplaten",
          "followers_url": "https://api.github.com/users/patrickvonplaten/followers",
          "following_url": "https://api.github.com/users/patrickvonplaten/following{/other_user}",
          "gists_url": "https://api.github.com/users/patrickvonplaten/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/patrickvonplaten/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/patrickvonplaten/subscriptions",
          "organizations_url": "https://api.github.com/users/patrickvonplaten/orgs",
          "repos_url": "https://api.github.com/users/patrickvonplaten/repos",
          "events_url": "https://api.github.com/users/patrickvonplaten/events{/privacy}",
          "received_events_url": "https://api.github.com/users/patrickvonplaten/received_events",
          "type": "User",
          "user_view_type": "public",
          "site_admin": false
        },
        "body": "```suggestion\r\n                FutureWarning,\r\n```",
        "created_at": "2025-06-13T11:15:01Z",
        "updated_at": "2025-06-13T11:15:01Z",
        "html_url": "https://github.com/mistralai/mistral-common/pull/99#discussion_r2144840522",
        "pull_request_url": "https://api.github.com/repos/mistralai/mistral-common/pulls/99",
        "author_association": "CONTRIBUTOR",
        "_links": {
          "self": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2144840522"
          },
          "html": {
            "href": "https://github.com/mistralai/mistral-common/pull/99#discussion_r2144840522"
          },
          "pull_request": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/99"
          }
        },
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2144840522/reactions",
          "total_count": 0,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "start_line": null,
        "original_start_line": null,
        "start_side": null,
        "line": null,
        "original_line": 432,
        "side": "RIGHT",
        "original_position": 89,
        "position": null,
        "subject_type": "line"
      },
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2144841286",
        "pull_request_review_id": 2924411605,
        "id": 2144841286,
        "node_id": "PRRC_kwDOLuT1gc5_165G",
        "diff_hunk": "@@ -405,25 +403,95 @@ def get_control_token(self, s: str) -> int:\n         else:\n             raise ValueError(f\"Unknown control token {s}\")\n \n-    def decode(self, tokens: List[int]) -> str:\n-        r\"\"\"Decode a list of token ids into a string.\"\"\"\n-        return \"\".join(self._decode_all(tokens, special_token_policy=self._special_token_policy))\n+    def decode(self, tokens: List[int], special_token_policy: Optional[SpecialTokenPolicy] = None) -> str:\n+        r\"\"\"Decode a list of token ids into a string.\n+\n+        Args:\n+            tokens: The list of token ids to decode.\n+            special_token_policy: The policy for handling special tokens.\n+                Use the tokenizer's [attribute][mistral_common.tokens.tokenizers.tekken.Tekkenizer.special_token_policy]\n+                if `None`. Passing `None` is deprecated and will be changed\n+                to `SpecialTokenPolicy.IGNORE` in `mistral_common=1.7.0`.\n+\n+        Returns:\n+            The decoded string.\n+        \"\"\"\n+        if special_token_policy is not None and not isinstance(special_token_policy, SpecialTokenPolicy):\n+            raise ValueError(\n+                f\"Expected `special_token_policy` to be None or SpecialTokenPolicy, got {type(special_token_policy)}.\"\n+            )\n+\n+        if special_token_policy is None:\n+            warnings.warn(\n+                (\n+                    f\"Using the tokenizer's special token policy ({self._special_token_policy}) is deprecated. \"\n+                    \"It will be removed in 1.7.0. \"\n+                    \"Please pass a special token policy explicitly. \"\n+                    \"Future default will be SpecialTokenPolicy.IGNORE.\"\n+                ),\n+                DeprecationWarning,\n+            )\n+            special_token_policy = self._special_token_policy\n+\n+        return \"\".join(self._decode_all(tokens, special_token_policy=special_token_policy))\n \n     def to_string(self, tokens: List[int]) -> str:\n-        r\"\"\"Decode a list of token ids into a string keeping special tokens for debugging purposes.\"\"\"\n-        return \"\".join(self._decode_all(tokens, special_token_policy=SpecialTokenPolicy.KEEP))\n+        r\"\"\"[DEPRECATED] Converts a list of token ids into a string, keeping special tokens.\n+\n+        Use `decode` with `special_token_policy=SpecialTokenPolicy.KEEP` instead.\n+\n+        This is a convenient method for debugging.\n+        \"\"\"\n+        warnings.warn(\n+            (\n+                \"`to_string` is deprecated and will be removed in 1.7.0. \"\n+                \"Use `decode` with `special_token_policy=SpecialTokenPolicy.KEEP` instead.\"\n+            ),\n+            DeprecationWarning,\n+        )\n+        return self._to_string(tokens)\n+\n+    def _to_string(self, tokens: List[int]) -> str:\n+        return self.decode(tokens, special_token_policy=SpecialTokenPolicy.KEEP)\n \n     def id_to_piece(self, token_id: int) -> str:\n         r\"\"\"Convert a token id to its string representation.\"\"\"\n-        return self._decode_all([token_id], special_token_policy=SpecialTokenPolicy.KEEP)[0]\n+        return self.decode([token_id], special_token_policy=SpecialTokenPolicy.KEEP)\n+\n+    def id_to_byte_piece(self, token_id: int, special_token_policy: Optional[SpecialTokenPolicy] = None) -> bytes:\n+        r\"\"\"Convert a token id to its byte representation.\n+\n+        Args:\n+            token_id: The token id to convert.\n+            special_token_policy: The policy for handling special tokens.\n+                Use the tokenizer's [attribute][mistral_common.tokens.tokenizers.tekken.Tekkenizer.special_token_policy]\n+                if `None`. Passing `None` is deprecated and will be changed\n+                to `SpecialTokenPolicy.IGNORE` in `mistral_common=1.7.0`.\n+\n+        Returns:\n+            The byte representation of the token.\n+        \"\"\"\n+        if special_token_policy is None:\n+            warnings.warn(\n+                (\n+                    f\"Using the tokenizer's special token policy ({self._special_token_policy}) is deprecated. \"\n+                    \"It will be removed in 1.7.0. \"\n+                    \"Please pass a special token policy explicitly. \"\n+                    \"Future default will be SpecialTokenPolicy.IGNORE.\"\n+                ),\n+                DeprecationWarning,",
        "path": "src/mistral_common/tokens/tokenizers/tekken.py",
        "commit_id": "ae62bb579ce8dfaf32b9d7bc897b43c2871a8b82",
        "original_commit_id": "99fcc3d1968f18c3091f09164756e8980e8aa8ef",
        "user": {
          "login": "patrickvonplaten",
          "id": 23423619,
          "node_id": "MDQ6VXNlcjIzNDIzNjE5",
          "avatar_url": "https://avatars.githubusercontent.com/u/23423619?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/patrickvonplaten",
          "html_url": "https://github.com/patrickvonplaten",
          "followers_url": "https://api.github.com/users/patrickvonplaten/followers",
          "following_url": "https://api.github.com/users/patrickvonplaten/following{/other_user}",
          "gists_url": "https://api.github.com/users/patrickvonplaten/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/patrickvonplaten/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/patrickvonplaten/subscriptions",
          "organizations_url": "https://api.github.com/users/patrickvonplaten/orgs",
          "repos_url": "https://api.github.com/users/patrickvonplaten/repos",
          "events_url": "https://api.github.com/users/patrickvonplaten/events{/privacy}",
          "received_events_url": "https://api.github.com/users/patrickvonplaten/received_events",
          "type": "User",
          "user_view_type": "public",
          "site_admin": false
        },
        "body": "```suggestion\r\n                FutureWarning,\r\n```",
        "created_at": "2025-06-13T11:15:15Z",
        "updated_at": "2025-06-13T11:15:16Z",
        "html_url": "https://github.com/mistralai/mistral-common/pull/99#discussion_r2144841286",
        "pull_request_url": "https://api.github.com/repos/mistralai/mistral-common/pulls/99",
        "author_association": "CONTRIBUTOR",
        "_links": {
          "self": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2144841286"
          },
          "html": {
            "href": "https://github.com/mistralai/mistral-common/pull/99#discussion_r2144841286"
          },
          "pull_request": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/99"
          }
        },
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2144841286/reactions",
          "total_count": 0,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "start_line": null,
        "original_start_line": null,
        "start_side": null,
        "line": null,
        "original_line": 482,
        "side": "RIGHT",
        "original_position": 142,
        "position": null,
        "subject_type": "line"
      },
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2144842351",
        "pull_request_review_id": 2924412970,
        "id": 2144842351,
        "node_id": "PRRC_kwDOLuT1gc5_17Jv",
        "diff_hunk": "@@ -405,25 +403,95 @@ def get_control_token(self, s: str) -> int:\n         else:\n             raise ValueError(f\"Unknown control token {s}\")\n \n-    def decode(self, tokens: List[int]) -> str:\n-        r\"\"\"Decode a list of token ids into a string.\"\"\"\n-        return \"\".join(self._decode_all(tokens, special_token_policy=self._special_token_policy))\n+    def decode(self, tokens: List[int], special_token_policy: Optional[SpecialTokenPolicy] = None) -> str:\n+        r\"\"\"Decode a list of token ids into a string.\n+\n+        Args:\n+            tokens: The list of token ids to decode.\n+            special_token_policy: The policy for handling special tokens.\n+                Use the tokenizer's [attribute][mistral_common.tokens.tokenizers.tekken.Tekkenizer.special_token_policy]\n+                if `None`. Passing `None` is deprecated and will be changed\n+                to `SpecialTokenPolicy.IGNORE` in `mistral_common=1.7.0`.\n+\n+        Returns:\n+            The decoded string.\n+        \"\"\"\n+        if special_token_policy is not None and not isinstance(special_token_policy, SpecialTokenPolicy):\n+            raise ValueError(\n+                f\"Expected `special_token_policy` to be None or SpecialTokenPolicy, got {type(special_token_policy)}.\"\n+            )\n+\n+        if special_token_policy is None:\n+            warnings.warn(\n+                (\n+                    f\"Using the tokenizer's special token policy ({self._special_token_policy}) is deprecated. \"\n+                    \"It will be removed in 1.7.0. \"\n+                    \"Please pass a special token policy explicitly. \"\n+                    \"Future default will be SpecialTokenPolicy.IGNORE.\"\n+                ),\n+                DeprecationWarning,\n+            )\n+            special_token_policy = self._special_token_policy\n+\n+        return \"\".join(self._decode_all(tokens, special_token_policy=special_token_policy))\n \n     def to_string(self, tokens: List[int]) -> str:\n-        r\"\"\"Decode a list of token ids into a string keeping special tokens for debugging purposes.\"\"\"\n-        return \"\".join(self._decode_all(tokens, special_token_policy=SpecialTokenPolicy.KEEP))\n+        r\"\"\"[DEPRECATED] Converts a list of token ids into a string, keeping special tokens.\n+\n+        Use `decode` with `special_token_policy=SpecialTokenPolicy.KEEP` instead.\n+\n+        This is a convenient method for debugging.\n+        \"\"\"\n+        warnings.warn(\n+            (\n+                \"`to_string` is deprecated and will be removed in 1.7.0. \"\n+                \"Use `decode` with `special_token_policy=SpecialTokenPolicy.KEEP` instead.\"\n+            ),\n+            DeprecationWarning,\n+        )\n+        return self._to_string(tokens)\n+\n+    def _to_string(self, tokens: List[int]) -> str:\n+        return self.decode(tokens, special_token_policy=SpecialTokenPolicy.KEEP)\n \n     def id_to_piece(self, token_id: int) -> str:\n         r\"\"\"Convert a token id to its string representation.\"\"\"\n-        return self._decode_all([token_id], special_token_policy=SpecialTokenPolicy.KEEP)[0]\n+        return self.decode([token_id], special_token_policy=SpecialTokenPolicy.KEEP)\n+\n+    def id_to_byte_piece(self, token_id: int, special_token_policy: Optional[SpecialTokenPolicy] = None) -> bytes:\n+        r\"\"\"Convert a token id to its byte representation.\n+\n+        Args:\n+            token_id: The token id to convert.\n+            special_token_policy: The policy for handling special tokens.\n+                Use the tokenizer's [attribute][mistral_common.tokens.tokenizers.tekken.Tekkenizer.special_token_policy]\n+                if `None`. Passing `None` is deprecated and will be changed\n+                to `SpecialTokenPolicy.IGNORE` in `mistral_common=1.7.0`.\n+\n+        Returns:\n+            The byte representation of the token.\n+        \"\"\"\n+        if special_token_policy is None:\n+            warnings.warn(\n+                (\n+                    f\"Using the tokenizer's special token policy ({self._special_token_policy}) is deprecated. \"\n+                    \"It will be removed in 1.7.0. \"\n+                    \"Please pass a special token policy explicitly. \"\n+                    \"Future default will be SpecialTokenPolicy.IGNORE.\"\n+                ),\n+                DeprecationWarning,\n+            )\n+            special_token_policy = self._special_token_policy\n \n-    def id_to_byte_piece(self, token_id: int) -> bytes:\n-        r\"\"\"Convert a token id to its byte representation.\"\"\"\n         if token_id < self.num_special_tokens:\n-            if self._special_token_policy == SpecialTokenPolicy.KEEP:\n+            if special_token_policy == SpecialTokenPolicy.KEEP:\n                 return self._all_special_tokens[token_id][\"token_str\"].encode(\"utf-8\")\n-            elif self._special_token_policy == SpecialTokenPolicy.RAISE:\n+            elif special_token_policy == SpecialTokenPolicy.RAISE:\n                 raise ValueError(f\"{token_id} is a special token\")\n+            elif special_token_policy == SpecialTokenPolicy.IGNORE:\n+                return b\"\"",
        "path": "src/mistral_common/tokens/tokenizers/tekken.py",
        "commit_id": "ae62bb579ce8dfaf32b9d7bc897b43c2871a8b82",
        "original_commit_id": "99fcc3d1968f18c3091f09164756e8980e8aa8ef",
        "user": {
          "login": "patrickvonplaten",
          "id": 23423619,
          "node_id": "MDQ6VXNlcjIzNDIzNjE5",
          "avatar_url": "https://avatars.githubusercontent.com/u/23423619?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/patrickvonplaten",
          "html_url": "https://github.com/patrickvonplaten",
          "followers_url": "https://api.github.com/users/patrickvonplaten/followers",
          "following_url": "https://api.github.com/users/patrickvonplaten/following{/other_user}",
          "gists_url": "https://api.github.com/users/patrickvonplaten/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/patrickvonplaten/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/patrickvonplaten/subscriptions",
          "organizations_url": "https://api.github.com/users/patrickvonplaten/orgs",
          "repos_url": "https://api.github.com/users/patrickvonplaten/repos",
          "events_url": "https://api.github.com/users/patrickvonplaten/events{/privacy}",
          "received_events_url": "https://api.github.com/users/patrickvonplaten/received_events",
          "type": "User",
          "user_view_type": "public",
          "site_admin": false
        },
        "body": "nice!",
        "created_at": "2025-06-13T11:15:29Z",
        "updated_at": "2025-06-13T11:15:29Z",
        "html_url": "https://github.com/mistralai/mistral-common/pull/99#discussion_r2144842351",
        "pull_request_url": "https://api.github.com/repos/mistralai/mistral-common/pulls/99",
        "author_association": "CONTRIBUTOR",
        "_links": {
          "self": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2144842351"
          },
          "html": {
            "href": "https://github.com/mistralai/mistral-common/pull/99#discussion_r2144842351"
          },
          "pull_request": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/99"
          }
        },
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2144842351/reactions",
          "total_count": 0,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "start_line": null,
        "original_start_line": null,
        "start_side": null,
        "line": 492,
        "original_line": 492,
        "side": "RIGHT",
        "original_position": 156,
        "position": 156,
        "subject_type": "line"
      },
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2144842745",
        "pull_request_review_id": 2924413479,
        "id": 2144842745,
        "node_id": "PRRC_kwDOLuT1gc5_17P5",
        "diff_hunk": "@@ -189,3 +193,61 @@ def test_isbyte() -> None:\n     assert len(byte_tok) == 1\n     assert tekkenizer.is_byte(byte_tok[0]), byte_tok\n     assert byte_tok[0] < 256 + tekkenizer.num_special_tokens <= tok[0]\n+\n+\n+def test_id_to_byte_piece() -> None:",
        "path": "tests/test_tekken.py",
        "commit_id": "ae62bb579ce8dfaf32b9d7bc897b43c2871a8b82",
        "original_commit_id": "99fcc3d1968f18c3091f09164756e8980e8aa8ef",
        "user": {
          "login": "patrickvonplaten",
          "id": 23423619,
          "node_id": "MDQ6VXNlcjIzNDIzNjE5",
          "avatar_url": "https://avatars.githubusercontent.com/u/23423619?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/patrickvonplaten",
          "html_url": "https://github.com/patrickvonplaten",
          "followers_url": "https://api.github.com/users/patrickvonplaten/followers",
          "following_url": "https://api.github.com/users/patrickvonplaten/following{/other_user}",
          "gists_url": "https://api.github.com/users/patrickvonplaten/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/patrickvonplaten/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/patrickvonplaten/subscriptions",
          "organizations_url": "https://api.github.com/users/patrickvonplaten/orgs",
          "repos_url": "https://api.github.com/users/patrickvonplaten/repos",
          "events_url": "https://api.github.com/users/patrickvonplaten/events{/privacy}",
          "received_events_url": "https://api.github.com/users/patrickvonplaten/received_events",
          "type": "User",
          "user_view_type": "public",
          "site_admin": false
        },
        "body": "nice",
        "created_at": "2025-06-13T11:15:38Z",
        "updated_at": "2025-06-13T11:15:38Z",
        "html_url": "https://github.com/mistralai/mistral-common/pull/99#discussion_r2144842745",
        "pull_request_url": "https://api.github.com/repos/mistralai/mistral-common/pulls/99",
        "author_association": "CONTRIBUTOR",
        "_links": {
          "self": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2144842745"
          },
          "html": {
            "href": "https://github.com/mistralai/mistral-common/pull/99#discussion_r2144842745"
          },
          "pull_request": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/99"
          }
        },
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2144842745/reactions",
          "total_count": 0,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "start_line": null,
        "original_start_line": null,
        "start_side": null,
        "line": 198,
        "original_line": 198,
        "side": "RIGHT",
        "original_position": 26,
        "position": 26,
        "subject_type": "line"
      }
    ]
  },
  "92": {
    "issue_comments": [],
    "review_comments": [
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2135300605",
        "pull_request_review_id": 2909367841,
        "id": 2135300605,
        "node_id": "PRRC_kwDOLuT1gc5_Rhn9",
        "diff_hunk": "@@ -0,0 +1,559 @@\n+from inspect import signature\n+from pathlib import Path\n+from typing import Any, Dict, List, Optional, Type, Union\n+\n+import pytest\n+from openai.resources.chat.completions.completions import Completions\n+from openai.types.chat.chat_completion_assistant_message_param import (\n+    ChatCompletionAssistantMessageParam as OpenAIAssistantMessage,\n+)\n+from openai.types.chat.chat_completion_content_part_image_param import (\n+    ChatCompletionContentPartImageParam as OpenAIImageChunk,\n+)\n+from openai.types.chat.chat_completion_content_part_text_param import (\n+    ChatCompletionContentPartTextParam as OpenAITextChunk,\n+)\n+from openai.types.chat.chat_completion_message_tool_call_param import (\n+    ChatCompletionMessageToolCallParam as OpenAIToolCall,\n+)\n+from openai.types.chat.chat_completion_system_message_param import (\n+    ChatCompletionSystemMessageParam as OpenAISystemMessage,\n+)\n+from openai.types.chat.chat_completion_tool_message_param import ChatCompletionToolMessageParam as OpenAIToolMessage",
        "path": "tests/test_converters.py",
        "commit_id": "af2f6d48bbcb55e31bf28475684e57c0a2b8e689",
        "original_commit_id": "dcfbcb7cdb6a2e44e2b68651b6391e1550d6a11c",
        "user": {
          "login": "patrickvonplaten",
          "id": 23423619,
          "node_id": "MDQ6VXNlcjIzNDIzNjE5",
          "avatar_url": "https://avatars.githubusercontent.com/u/23423619?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/patrickvonplaten",
          "html_url": "https://github.com/patrickvonplaten",
          "followers_url": "https://api.github.com/users/patrickvonplaten/followers",
          "following_url": "https://api.github.com/users/patrickvonplaten/following{/other_user}",
          "gists_url": "https://api.github.com/users/patrickvonplaten/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/patrickvonplaten/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/patrickvonplaten/subscriptions",
          "organizations_url": "https://api.github.com/users/patrickvonplaten/orgs",
          "repos_url": "https://api.github.com/users/patrickvonplaten/repos",
          "events_url": "https://api.github.com/users/patrickvonplaten/events{/privacy}",
          "received_events_url": "https://api.github.com/users/patrickvonplaten/received_events",
          "type": "User",
          "user_view_type": "public",
          "site_admin": false
        },
        "body": "Nice that works for me",
        "created_at": "2025-06-09T08:39:53Z",
        "updated_at": "2025-06-09T08:39:53Z",
        "html_url": "https://github.com/mistralai/mistral-common/pull/92#discussion_r2135300605",
        "pull_request_url": "https://api.github.com/repos/mistralai/mistral-common/pulls/92",
        "author_association": "CONTRIBUTOR",
        "_links": {
          "self": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2135300605"
          },
          "html": {
            "href": "https://github.com/mistralai/mistral-common/pull/92#discussion_r2135300605"
          },
          "pull_request": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/92"
          }
        },
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2135300605/reactions",
          "total_count": 0,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "start_line": null,
        "original_start_line": null,
        "start_side": null,
        "line": 22,
        "original_line": 22,
        "side": "RIGHT",
        "original_position": 22,
        "position": 22,
        "subject_type": "line"
      }
    ]
  },
  "91": {
    "issue_comments": [
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/issues/comments/2955470530",
        "html_url": "https://github.com/mistralai/mistral-common/pull/91#issuecomment-2955470530",
        "issue_url": "https://api.github.com/repos/mistralai/mistral-common/issues/91",
        "id": 2955470530,
        "node_id": "IC_kwDOLuT1gc6wKObC",
        "user": {
          "login": "patrickvonplaten",
          "id": 23423619,
          "node_id": "MDQ6VXNlcjIzNDIzNjE5",
          "avatar_url": "https://avatars.githubusercontent.com/u/23423619?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/patrickvonplaten",
          "html_url": "https://github.com/patrickvonplaten",
          "followers_url": "https://api.github.com/users/patrickvonplaten/followers",
          "following_url": "https://api.github.com/users/patrickvonplaten/following{/other_user}",
          "gists_url": "https://api.github.com/users/patrickvonplaten/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/patrickvonplaten/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/patrickvonplaten/subscriptions",
          "organizations_url": "https://api.github.com/users/patrickvonplaten/orgs",
          "repos_url": "https://api.github.com/users/patrickvonplaten/repos",
          "events_url": "https://api.github.com/users/patrickvonplaten/events{/privacy}",
          "received_events_url": "https://api.github.com/users/patrickvonplaten/received_events",
          "type": "User",
          "user_view_type": "public",
          "site_admin": false
        },
        "created_at": "2025-06-09T11:07:18Z",
        "updated_at": "2025-06-09T11:07:18Z",
        "author_association": "CONTRIBUTOR",
        "body": "> LGTM I think there there are some places in the code where we deprecated stuff at 1.6.0. Should we reschedule deprecation or take care of it ?\r\n\r\nYeah nice catch! Delayed to 1.7.0",
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/issues/comments/2955470530/reactions",
          "total_count": 0,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "performed_via_github_app": null
      }
    ],
    "review_comments": [
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2135271186",
        "pull_request_review_id": 2909324016,
        "id": 2135271186,
        "node_id": "PRRC_kwDOLuT1gc5_RacS",
        "diff_hunk": "@@ -545,3 +540,39 @@ def encode_assistant_message(self, message: AssistantMessageType, is_before_last\n             curr_tokens.append(self.tokenizer.eos_id)\n \n         return curr_tokens\n+\n+\n+class InstructTokenizerV11(InstructTokenizerV7):\n+    \"\"\"\n+    The difference with V7 tokenizer is that it encodes tool calls differently:\n+    Tool call results are encoded as :\n+    - [begin tool call] call_name_tokens [call id] call_id_tokens [args] content tokens\n+    \"\"\"\n+\n+    def __init__(\n+        self,\n+        tokenizer: Tokenizer,\n+        mm_encoder: Optional[MultiModalEncoder] = None,\n+    ) -> None:\n+        super().__init__(tokenizer, mm_encoder)\n+        self.ARGS = self.tokenizer.get_control_token(SpecialTokens.args.value)\n+        self.CALL_ID = self.tokenizer.get_control_token(SpecialTokens.call_id.value)\n+\n+    def _encode_tool_calls_in_assistant_message(self, message: AssistantMessageType) -> List[int]:\n+        assert message.tool_calls, f\"Assistant message must have tool calls. Got {message}\"\n+        curr_tokens = []\n+        for tool_call in message.tool_calls:\n+            prepared = self._prepare_function_call(tool_call)\n+\n+            ids = []\n+            if \"id\" in prepared:\n+                ids = [self.CALL_ID, *self.tokenizer.encode(prepared[\"id\"], bos=False, eos=False)]\n+\n+            curr_tokens += [",
        "path": "src/mistral_common/tokens/tokenizers/instruct.py",
        "commit_id": "fb6bf55112c48728f5f9aa9c9c303d7ec24beda7",
        "original_commit_id": "3b4d056c05f4102a9d8992e2be89d3b26172d276",
        "user": {
          "login": "patrickvonplaten",
          "id": 23423619,
          "node_id": "MDQ6VXNlcjIzNDIzNjE5",
          "avatar_url": "https://avatars.githubusercontent.com/u/23423619?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/patrickvonplaten",
          "html_url": "https://github.com/patrickvonplaten",
          "followers_url": "https://api.github.com/users/patrickvonplaten/followers",
          "following_url": "https://api.github.com/users/patrickvonplaten/following{/other_user}",
          "gists_url": "https://api.github.com/users/patrickvonplaten/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/patrickvonplaten/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/patrickvonplaten/subscriptions",
          "organizations_url": "https://api.github.com/users/patrickvonplaten/orgs",
          "repos_url": "https://api.github.com/users/patrickvonplaten/repos",
          "events_url": "https://api.github.com/users/patrickvonplaten/events{/privacy}",
          "received_events_url": "https://api.github.com/users/patrickvonplaten/received_events",
          "type": "User",
          "user_view_type": "public",
          "site_admin": false
        },
        "body": "new fn calling format that encodes both name and fn arguments",
        "created_at": "2025-06-09T08:19:37Z",
        "updated_at": "2025-06-09T08:19:37Z",
        "html_url": "https://github.com/mistralai/mistral-common/pull/91#discussion_r2135271186",
        "pull_request_url": "https://api.github.com/repos/mistralai/mistral-common/pulls/91",
        "author_association": "CONTRIBUTOR",
        "_links": {
          "self": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2135271186"
          },
          "html": {
            "href": "https://github.com/mistralai/mistral-common/pull/91#discussion_r2135271186"
          },
          "pull_request": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/91"
          }
        },
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2135271186/reactions",
          "total_count": 0,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "start_line": null,
        "original_start_line": null,
        "start_side": null,
        "line": 795,
        "original_line": 571,
        "side": "RIGHT",
        "original_position": 60,
        "position": 74,
        "subject_type": "line"
      },
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2135305033",
        "pull_request_review_id": 2909374252,
        "id": 2135305033,
        "node_id": "PRRC_kwDOLuT1gc5_RitJ",
        "diff_hunk": "@@ -166,15 +166,7 @@ def decode(self, tokens: List[int]) -> str:\n             The decoded string.\n         \"\"\"\n         return self.tokenizer.decode(tokens)\n-\n-    def function_call_prefix(self, tool_choice: ToolChoice) -> List[int]:",
        "path": "src/mistral_common/tokens/tokenizers/instruct.py",
        "commit_id": "fb6bf55112c48728f5f9aa9c9c303d7ec24beda7",
        "original_commit_id": "e4404898c35f8a311b475248e843289536f9fd0c",
        "user": {
          "login": "patrickvonplaten",
          "id": 23423619,
          "node_id": "MDQ6VXNlcjIzNDIzNjE5",
          "avatar_url": "https://avatars.githubusercontent.com/u/23423619?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/patrickvonplaten",
          "html_url": "https://github.com/patrickvonplaten",
          "followers_url": "https://api.github.com/users/patrickvonplaten/followers",
          "following_url": "https://api.github.com/users/patrickvonplaten/following{/other_user}",
          "gists_url": "https://api.github.com/users/patrickvonplaten/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/patrickvonplaten/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/patrickvonplaten/subscriptions",
          "organizations_url": "https://api.github.com/users/patrickvonplaten/orgs",
          "repos_url": "https://api.github.com/users/patrickvonplaten/repos",
          "events_url": "https://api.github.com/users/patrickvonplaten/events{/privacy}",
          "received_events_url": "https://api.github.com/users/patrickvonplaten/received_events",
          "type": "User",
          "user_view_type": "public",
          "site_admin": false
        },
        "body": "We never make use of this function",
        "created_at": "2025-06-09T08:42:41Z",
        "updated_at": "2025-06-09T08:42:42Z",
        "html_url": "https://github.com/mistralai/mistral-common/pull/91#discussion_r2135305033",
        "pull_request_url": "https://api.github.com/repos/mistralai/mistral-common/pulls/91",
        "author_association": "CONTRIBUTOR",
        "_links": {
          "self": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2135305033"
          },
          "html": {
            "href": "https://github.com/mistralai/mistral-common/pull/91#discussion_r2135305033"
          },
          "pull_request": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/91"
          }
        },
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2135305033/reactions",
          "total_count": 0,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "start_line": null,
        "original_start_line": null,
        "start_side": null,
        "line": 170,
        "original_line": 170,
        "side": "LEFT",
        "original_position": 14,
        "position": 13,
        "subject_type": "line"
      },
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2135437808",
        "pull_request_review_id": 2909587922,
        "id": 2135437808,
        "node_id": "PRRC_kwDOLuT1gc5_SDHw",
        "diff_hunk": "@@ -29,9 +30,28 @@ def _quick_vocab(extra_toks: Sequence[bytes] = ()) -> List[TokenInfo]:\n     return vocab\n \n \n+def get_special_tokens(tokenizer_version: TokenizerVersion) -> List[SpecialTokenInfo]:\n+    special_tokens = list(Tekkenizer.DEPRECATED_SPECIAL_TOKENS)\n+    if tokenizer_version <= TokenizerVersion.v7:\n+        return special_tokens\n+\n+    special_tokens += [\n+        SpecialTokenInfo(rank=i, token_str=f\"<SPCECIAL_{i}>\", is_control=True) for i in range(len(special_tokens), 32)\n+    ]\n+\n+    # new special tokens\n+    special_tokens += [\n+        SpecialTokenInfo(rank=32, token_str=SpecialTokens.args, is_control=True),\n+        SpecialTokenInfo(rank=33, token_str=SpecialTokens.call_id, is_control=True),\n+    ]\n+\n+    return special_tokens",
        "path": "tests/test_tekken.py",
        "commit_id": "fb6bf55112c48728f5f9aa9c9c303d7ec24beda7",
        "original_commit_id": "94962311bfb7ff06e22f7c8ff615f5ef400dc47a",
        "user": {
          "login": "juliendenize",
          "id": 40604584,
          "node_id": "MDQ6VXNlcjQwNjA0NTg0",
          "avatar_url": "https://avatars.githubusercontent.com/u/40604584?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/juliendenize",
          "html_url": "https://github.com/juliendenize",
          "followers_url": "https://api.github.com/users/juliendenize/followers",
          "following_url": "https://api.github.com/users/juliendenize/following{/other_user}",
          "gists_url": "https://api.github.com/users/juliendenize/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/juliendenize/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/juliendenize/subscriptions",
          "organizations_url": "https://api.github.com/users/juliendenize/orgs",
          "repos_url": "https://api.github.com/users/juliendenize/repos",
          "events_url": "https://api.github.com/users/juliendenize/events{/privacy}",
          "received_events_url": "https://api.github.com/users/juliendenize/received_events",
          "type": "User",
          "user_view_type": "public",
          "site_admin": false
        },
        "body": "Nice",
        "created_at": "2025-06-09T10:03:04Z",
        "updated_at": "2025-06-09T10:05:21Z",
        "html_url": "https://github.com/mistralai/mistral-common/pull/91#discussion_r2135437808",
        "pull_request_url": "https://api.github.com/repos/mistralai/mistral-common/pulls/91",
        "author_association": "CONTRIBUTOR",
        "_links": {
          "self": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2135437808"
          },
          "html": {
            "href": "https://github.com/mistralai/mistral-common/pull/91#discussion_r2135437808"
          },
          "pull_request": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/91"
          }
        },
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2135437808/reactions",
          "total_count": 0,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "start_line": 33,
        "original_start_line": 33,
        "start_side": "RIGHT",
        "line": 48,
        "original_line": 48,
        "side": "RIGHT",
        "original_position": 31,
        "position": 31,
        "subject_type": "line"
      }
    ]
  },
  "86": {
    "issue_comments": [
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/issues/comments/2942953548",
        "html_url": "https://github.com/mistralai/mistral-common/pull/86#issuecomment-2942953548",
        "issue_url": "https://api.github.com/repos/mistralai/mistral-common/issues/86",
        "id": 2942953548,
        "node_id": "IC_kwDOLuT1gc6vaehM",
        "user": {
          "login": "djsaunde",
          "id": 1245942,
          "node_id": "MDQ6VXNlcjEyNDU5NDI=",
          "avatar_url": "https://avatars.githubusercontent.com/u/1245942?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/djsaunde",
          "html_url": "https://github.com/djsaunde",
          "followers_url": "https://api.github.com/users/djsaunde/followers",
          "following_url": "https://api.github.com/users/djsaunde/following{/other_user}",
          "gists_url": "https://api.github.com/users/djsaunde/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/djsaunde/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/djsaunde/subscriptions",
          "organizations_url": "https://api.github.com/users/djsaunde/orgs",
          "repos_url": "https://api.github.com/users/djsaunde/repos",
          "events_url": "https://api.github.com/users/djsaunde/events{/privacy}",
          "received_events_url": "https://api.github.com/users/djsaunde/received_events",
          "type": "User",
          "user_view_type": "public",
          "site_admin": false
        },
        "created_at": "2025-06-05T06:40:40Z",
        "updated_at": "2025-06-05T06:40:40Z",
        "author_association": "CONTRIBUTOR",
        "body": "Oops, this doesn't work. I'll fix.",
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/issues/comments/2942953548/reactions",
          "total_count": 0,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "performed_via_github_app": null
      },
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/issues/comments/2942968295",
        "html_url": "https://github.com/mistralai/mistral-common/pull/86#issuecomment-2942968295",
        "issue_url": "https://api.github.com/repos/mistralai/mistral-common/issues/86",
        "id": 2942968295,
        "node_id": "IC_kwDOLuT1gc6vaiHn",
        "user": {
          "login": "djsaunde",
          "id": 1245942,
          "node_id": "MDQ6VXNlcjEyNDU5NDI=",
          "avatar_url": "https://avatars.githubusercontent.com/u/1245942?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/djsaunde",
          "html_url": "https://github.com/djsaunde",
          "followers_url": "https://api.github.com/users/djsaunde/followers",
          "following_url": "https://api.github.com/users/djsaunde/following{/other_user}",
          "gists_url": "https://api.github.com/users/djsaunde/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/djsaunde/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/djsaunde/subscriptions",
          "organizations_url": "https://api.github.com/users/djsaunde/orgs",
          "repos_url": "https://api.github.com/users/djsaunde/repos",
          "events_url": "https://api.github.com/users/djsaunde/events{/privacy}",
          "received_events_url": "https://api.github.com/users/djsaunde/received_events",
          "type": "User",
          "user_view_type": "public",
          "site_admin": false
        },
        "created_at": "2025-06-05T06:48:11Z",
        "updated_at": "2025-06-05T06:48:11Z",
        "author_association": "CONTRIBUTOR",
        "body": "Okay, should be good to go now. I tested using the code snippets found here: https://docs.mistral.ai/guides/tokenization/#run-our-tokenizer-in-python\r\n\r\n```python\r\nfrom mistral_common.protocol.instruct.messages import (\r\n    UserMessage,\r\n)\r\nfrom mistral_common.protocol.instruct.request import ChatCompletionRequest\r\nfrom mistral_common.protocol.instruct.tool_calls import (\r\n    Function,\r\n    Tool,\r\n)\r\nfrom mistral_common.tokens.tokenizers.mistral import MistralTokenizer\r\n```\r\n\r\n```\r\ntokenizer = MistralTokenizer.v3(is_tekken=True)\r\nmodel_name = \"nemostral\"\r\ntokenizer = MistralTokenizer.from_model(model_name)\r\n```",
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/issues/comments/2942968295/reactions",
          "total_count": 0,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "performed_via_github_app": null
      },
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/issues/comments/2943218129",
        "html_url": "https://github.com/mistralai/mistral-common/pull/86#issuecomment-2943218129",
        "issue_url": "https://api.github.com/repos/mistralai/mistral-common/issues/86",
        "id": 2943218129,
        "node_id": "IC_kwDOLuT1gc6vbfHR",
        "user": {
          "login": "patrickvonplaten",
          "id": 23423619,
          "node_id": "MDQ6VXNlcjIzNDIzNjE5",
          "avatar_url": "https://avatars.githubusercontent.com/u/23423619?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/patrickvonplaten",
          "html_url": "https://github.com/patrickvonplaten",
          "followers_url": "https://api.github.com/users/patrickvonplaten/followers",
          "following_url": "https://api.github.com/users/patrickvonplaten/following{/other_user}",
          "gists_url": "https://api.github.com/users/patrickvonplaten/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/patrickvonplaten/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/patrickvonplaten/subscriptions",
          "organizations_url": "https://api.github.com/users/patrickvonplaten/orgs",
          "repos_url": "https://api.github.com/users/patrickvonplaten/repos",
          "events_url": "https://api.github.com/users/patrickvonplaten/events{/privacy}",
          "received_events_url": "https://api.github.com/users/patrickvonplaten/received_events",
          "type": "User",
          "user_view_type": "public",
          "site_admin": false
        },
        "created_at": "2025-06-05T08:22:04Z",
        "updated_at": "2025-06-05T08:22:04Z",
        "author_association": "CONTRIBUTOR",
        "body": "cc @juliendenize can you check as well? ",
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/issues/comments/2943218129/reactions",
          "total_count": 0,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "performed_via_github_app": null
      }
    ],
    "review_comments": [
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2128246127",
        "pull_request_review_id": 2899326438,
        "id": 2128246127,
        "node_id": "PRRC_kwDOLuT1gc5-2nVv",
        "diff_hunk": "@@ -1,3 +1,5 @@\n+from __future__ import annotations",
        "path": "src/mistral_common/tokens/tokenizers/mistral.py",
        "commit_id": "7eb47a86c6bcf079d991fe1e8b55094288423cc4",
        "original_commit_id": "6150ce60934f84e2479eb4fdeaab95ffe625f8d8",
        "user": {
          "login": "patrickvonplaten",
          "id": 23423619,
          "node_id": "MDQ6VXNlcjIzNDIzNjE5",
          "avatar_url": "https://avatars.githubusercontent.com/u/23423619?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/patrickvonplaten",
          "html_url": "https://github.com/patrickvonplaten",
          "followers_url": "https://api.github.com/users/patrickvonplaten/followers",
          "following_url": "https://api.github.com/users/patrickvonplaten/following{/other_user}",
          "gists_url": "https://api.github.com/users/patrickvonplaten/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/patrickvonplaten/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/patrickvonplaten/subscriptions",
          "organizations_url": "https://api.github.com/users/patrickvonplaten/orgs",
          "repos_url": "https://api.github.com/users/patrickvonplaten/repos",
          "events_url": "https://api.github.com/users/patrickvonplaten/events{/privacy}",
          "received_events_url": "https://api.github.com/users/patrickvonplaten/received_events",
          "type": "User",
          "user_view_type": "public",
          "site_admin": false
        },
        "body": "Ah yeah nice fix",
        "created_at": "2025-06-05T08:21:14Z",
        "updated_at": "2025-06-05T08:21:14Z",
        "html_url": "https://github.com/mistralai/mistral-common/pull/86#discussion_r2128246127",
        "pull_request_url": "https://api.github.com/repos/mistralai/mistral-common/pulls/86",
        "author_association": "CONTRIBUTOR",
        "_links": {
          "self": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2128246127"
          },
          "html": {
            "href": "https://github.com/mistralai/mistral-common/pull/86#discussion_r2128246127"
          },
          "pull_request": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/86"
          }
        },
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2128246127/reactions",
          "total_count": 0,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "start_line": null,
        "original_start_line": null,
        "start_side": null,
        "line": null,
        "original_line": 1,
        "side": "RIGHT",
        "original_position": 1,
        "position": null,
        "subject_type": "line"
      },
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2128247325",
        "pull_request_review_id": 2899328197,
        "id": 2128247325,
        "node_id": "PRRC_kwDOLuT1gc5-2nod",
        "diff_hunk": "@@ -250,3 +220,36 @@ def encode_fim(self, request: FIMRequest) -> TokenizedType:\n \n     def decode(self, tokens: List[int]) -> str:\n         return self.instruct_tokenizer.decode(tokens)\n+\n+\n+MODEL_NAME_TO_TOKENIZER_CLS: Dict[str, Callable[[], MistralTokenizer]] = {",
        "path": "src/mistral_common/tokens/tokenizers/mistral.py",
        "commit_id": "7eb47a86c6bcf079d991fe1e8b55094288423cc4",
        "original_commit_id": "6150ce60934f84e2479eb4fdeaab95ffe625f8d8",
        "user": {
          "login": "patrickvonplaten",
          "id": 23423619,
          "node_id": "MDQ6VXNlcjIzNDIzNjE5",
          "avatar_url": "https://avatars.githubusercontent.com/u/23423619?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/patrickvonplaten",
          "html_url": "https://github.com/patrickvonplaten",
          "followers_url": "https://api.github.com/users/patrickvonplaten/followers",
          "following_url": "https://api.github.com/users/patrickvonplaten/following{/other_user}",
          "gists_url": "https://api.github.com/users/patrickvonplaten/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/patrickvonplaten/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/patrickvonplaten/subscriptions",
          "organizations_url": "https://api.github.com/users/patrickvonplaten/orgs",
          "repos_url": "https://api.github.com/users/patrickvonplaten/repos",
          "events_url": "https://api.github.com/users/patrickvonplaten/events{/privacy}",
          "received_events_url": "https://api.github.com/users/patrickvonplaten/received_events",
          "type": "User",
          "user_view_type": "public",
          "site_admin": false
        },
        "body": "Generally, we're thinking about moving a bit away from the `from_model` function and instead rely more on always loading via `load_file(...)` - but def ok to move the definition here from my side! ",
        "created_at": "2025-06-05T08:21:51Z",
        "updated_at": "2025-06-05T08:21:52Z",
        "html_url": "https://github.com/mistralai/mistral-common/pull/86#discussion_r2128247325",
        "pull_request_url": "https://api.github.com/repos/mistralai/mistral-common/pulls/86",
        "author_association": "CONTRIBUTOR",
        "_links": {
          "self": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2128247325"
          },
          "html": {
            "href": "https://github.com/mistralai/mistral-common/pull/86#discussion_r2128247325"
          },
          "pull_request": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/86"
          }
        },
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2128247325/reactions",
          "total_count": 0,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "start_line": null,
        "original_start_line": null,
        "start_side": null,
        "line": 223,
        "original_line": 225,
        "side": "RIGHT",
        "original_position": 111,
        "position": 63,
        "subject_type": "line"
      },
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2128310959",
        "pull_request_review_id": 2899428323,
        "id": 2128310959,
        "node_id": "PRRC_kwDOLuT1gc5-23Kv",
        "diff_hunk": "@@ -1,3 +1,5 @@\n+from __future__ import annotations\n+",
        "path": "src/mistral_common/tokens/tokenizers/mistral.py",
        "commit_id": "7eb47a86c6bcf079d991fe1e8b55094288423cc4",
        "original_commit_id": "6150ce60934f84e2479eb4fdeaab95ffe625f8d8",
        "user": {
          "login": "juliendenize",
          "id": 40604584,
          "node_id": "MDQ6VXNlcjQwNjA0NTg0",
          "avatar_url": "https://avatars.githubusercontent.com/u/40604584?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/juliendenize",
          "html_url": "https://github.com/juliendenize",
          "followers_url": "https://api.github.com/users/juliendenize/followers",
          "following_url": "https://api.github.com/users/juliendenize/following{/other_user}",
          "gists_url": "https://api.github.com/users/juliendenize/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/juliendenize/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/juliendenize/subscriptions",
          "organizations_url": "https://api.github.com/users/juliendenize/orgs",
          "repos_url": "https://api.github.com/users/juliendenize/repos",
          "events_url": "https://api.github.com/users/juliendenize/events{/privacy}",
          "received_events_url": "https://api.github.com/users/juliendenize/received_events",
          "type": "User",
          "user_view_type": "public",
          "site_admin": false
        },
        "body": "To keep consistency in the lib that does not import future annotation, I'd prefer removing it.\r\n\r\n```suggestion\r\n```",
        "created_at": "2025-06-05T08:53:49Z",
        "updated_at": "2025-06-05T08:58:17Z",
        "html_url": "https://github.com/mistralai/mistral-common/pull/86#discussion_r2128310959",
        "pull_request_url": "https://api.github.com/repos/mistralai/mistral-common/pulls/86",
        "author_association": "CONTRIBUTOR",
        "_links": {
          "self": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2128310959"
          },
          "html": {
            "href": "https://github.com/mistralai/mistral-common/pull/86#discussion_r2128310959"
          },
          "pull_request": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/86"
          }
        },
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2128310959/reactions",
          "total_count": 0,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "start_line": null,
        "original_start_line": 1,
        "start_side": "RIGHT",
        "line": null,
        "original_line": 2,
        "side": "RIGHT",
        "original_position": 2,
        "position": null,
        "subject_type": "line"
      },
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2128311531",
        "pull_request_review_id": 2899428323,
        "id": 2128311531,
        "node_id": "PRRC_kwDOLuT1gc5-23Tr",
        "diff_hunk": "@@ -80,19 +82,19 @@ def _data_path(cls) -> Path:\n         return Path(__file__).parents[2] / \"data\"\n \n     @classmethod\n-    def v1(cls) -> \"MistralTokenizer\":\n+    def v1(cls) -> MistralTokenizer:",
        "path": "src/mistral_common/tokens/tokenizers/mistral.py",
        "commit_id": "7eb47a86c6bcf079d991fe1e8b55094288423cc4",
        "original_commit_id": "6150ce60934f84e2479eb4fdeaab95ffe625f8d8",
        "user": {
          "login": "juliendenize",
          "id": 40604584,
          "node_id": "MDQ6VXNlcjQwNjA0NTg0",
          "avatar_url": "https://avatars.githubusercontent.com/u/40604584?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/juliendenize",
          "html_url": "https://github.com/juliendenize",
          "followers_url": "https://api.github.com/users/juliendenize/followers",
          "following_url": "https://api.github.com/users/juliendenize/following{/other_user}",
          "gists_url": "https://api.github.com/users/juliendenize/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/juliendenize/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/juliendenize/subscriptions",
          "organizations_url": "https://api.github.com/users/juliendenize/orgs",
          "repos_url": "https://api.github.com/users/juliendenize/repos",
          "events_url": "https://api.github.com/users/juliendenize/events{/privacy}",
          "received_events_url": "https://api.github.com/users/juliendenize/received_events",
          "type": "User",
          "user_view_type": "public",
          "site_admin": false
        },
        "body": "```suggestion\r\n    def v1(cls) -> \"MistralTokenizer\":\r\n```",
        "created_at": "2025-06-05T08:54:07Z",
        "updated_at": "2025-06-05T08:58:17Z",
        "html_url": "https://github.com/mistralai/mistral-common/pull/86#discussion_r2128311531",
        "pull_request_url": "https://api.github.com/repos/mistralai/mistral-common/pulls/86",
        "author_association": "CONTRIBUTOR",
        "_links": {
          "self": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2128311531"
          },
          "html": {
            "href": "https://github.com/mistralai/mistral-common/pull/86#discussion_r2128311531"
          },
          "pull_request": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/86"
          }
        },
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2128311531/reactions",
          "total_count": 0,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "start_line": null,
        "original_start_line": null,
        "start_side": null,
        "line": null,
        "original_line": 85,
        "side": "RIGHT",
        "original_position": 11,
        "position": null,
        "subject_type": "line"
      },
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2128311931",
        "pull_request_review_id": 2899428323,
        "id": 2128311931,
        "node_id": "PRRC_kwDOLuT1gc5-23Z7",
        "diff_hunk": "@@ -80,19 +82,19 @@ def _data_path(cls) -> Path:\n         return Path(__file__).parents[2] / \"data\"\n \n     @classmethod\n-    def v1(cls) -> \"MistralTokenizer\":\n+    def v1(cls) -> MistralTokenizer:\n         \"\"\"open 7B x 8x7B + embed\"\"\"\n         return cls.from_file(str(cls._data_path() / \"tokenizer.model.v1\"), mode=ValidationMode.test)\n \n     @classmethod\n-    def v2(cls) -> \"MistralTokenizer\":\n+    def v2(cls) -> MistralTokenizer:",
        "path": "src/mistral_common/tokens/tokenizers/mistral.py",
        "commit_id": "7eb47a86c6bcf079d991fe1e8b55094288423cc4",
        "original_commit_id": "6150ce60934f84e2479eb4fdeaab95ffe625f8d8",
        "user": {
          "login": "juliendenize",
          "id": 40604584,
          "node_id": "MDQ6VXNlcjQwNjA0NTg0",
          "avatar_url": "https://avatars.githubusercontent.com/u/40604584?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/juliendenize",
          "html_url": "https://github.com/juliendenize",
          "followers_url": "https://api.github.com/users/juliendenize/followers",
          "following_url": "https://api.github.com/users/juliendenize/following{/other_user}",
          "gists_url": "https://api.github.com/users/juliendenize/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/juliendenize/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/juliendenize/subscriptions",
          "organizations_url": "https://api.github.com/users/juliendenize/orgs",
          "repos_url": "https://api.github.com/users/juliendenize/repos",
          "events_url": "https://api.github.com/users/juliendenize/events{/privacy}",
          "received_events_url": "https://api.github.com/users/juliendenize/received_events",
          "type": "User",
          "user_view_type": "public",
          "site_admin": false
        },
        "body": "```suggestion\r\n    def v2(cls) -> \"MistralTokenizer\":\r\n```",
        "created_at": "2025-06-05T08:54:18Z",
        "updated_at": "2025-06-05T08:58:17Z",
        "html_url": "https://github.com/mistralai/mistral-common/pull/86#discussion_r2128311931",
        "pull_request_url": "https://api.github.com/repos/mistralai/mistral-common/pulls/86",
        "author_association": "CONTRIBUTOR",
        "_links": {
          "self": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2128311931"
          },
          "html": {
            "href": "https://github.com/mistralai/mistral-common/pull/86#discussion_r2128311931"
          },
          "pull_request": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/86"
          }
        },
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2128311931/reactions",
          "total_count": 0,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "start_line": null,
        "original_start_line": null,
        "start_side": null,
        "line": null,
        "original_line": 90,
        "side": "RIGHT",
        "original_position": 17,
        "position": null,
        "subject_type": "line"
      },
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2128312234",
        "pull_request_review_id": 2899428323,
        "id": 2128312234,
        "node_id": "PRRC_kwDOLuT1gc5-23eq",
        "diff_hunk": "@@ -80,19 +82,19 @@ def _data_path(cls) -> Path:\n         return Path(__file__).parents[2] / \"data\"\n \n     @classmethod\n-    def v1(cls) -> \"MistralTokenizer\":\n+    def v1(cls) -> MistralTokenizer:\n         \"\"\"open 7B x 8x7B + embed\"\"\"\n         return cls.from_file(str(cls._data_path() / \"tokenizer.model.v1\"), mode=ValidationMode.test)\n \n     @classmethod\n-    def v2(cls) -> \"MistralTokenizer\":\n+    def v2(cls) -> MistralTokenizer:\n         \"\"\"mistral-small // mistral-large\"\"\"\n         return cls.from_file(\n             str(cls._data_path() / \"mistral_instruct_tokenizer_240216.model.v2\"), mode=ValidationMode.test\n         )\n \n     @classmethod\n-    def v3(cls, is_tekken: bool = False, is_mm: bool = False) -> \"MistralTokenizer\":\n+    def v3(cls, is_tekken: bool = False, is_mm: bool = False) -> MistralTokenizer:",
        "path": "src/mistral_common/tokens/tokenizers/mistral.py",
        "commit_id": "7eb47a86c6bcf079d991fe1e8b55094288423cc4",
        "original_commit_id": "6150ce60934f84e2479eb4fdeaab95ffe625f8d8",
        "user": {
          "login": "juliendenize",
          "id": 40604584,
          "node_id": "MDQ6VXNlcjQwNjA0NTg0",
          "avatar_url": "https://avatars.githubusercontent.com/u/40604584?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/juliendenize",
          "html_url": "https://github.com/juliendenize",
          "followers_url": "https://api.github.com/users/juliendenize/followers",
          "following_url": "https://api.github.com/users/juliendenize/following{/other_user}",
          "gists_url": "https://api.github.com/users/juliendenize/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/juliendenize/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/juliendenize/subscriptions",
          "organizations_url": "https://api.github.com/users/juliendenize/orgs",
          "repos_url": "https://api.github.com/users/juliendenize/repos",
          "events_url": "https://api.github.com/users/juliendenize/events{/privacy}",
          "received_events_url": "https://api.github.com/users/juliendenize/received_events",
          "type": "User",
          "user_view_type": "public",
          "site_admin": false
        },
        "body": "```suggestion\r\n    def v3(cls, is_tekken: bool = False, is_mm: bool = False) -> \"MistralTokenizer\":\r\n```",
        "created_at": "2025-06-05T08:54:28Z",
        "updated_at": "2025-06-05T08:58:17Z",
        "html_url": "https://github.com/mistralai/mistral-common/pull/86#discussion_r2128312234",
        "pull_request_url": "https://api.github.com/repos/mistralai/mistral-common/pulls/86",
        "author_association": "CONTRIBUTOR",
        "_links": {
          "self": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2128312234"
          },
          "html": {
            "href": "https://github.com/mistralai/mistral-common/pull/86#discussion_r2128312234"
          },
          "pull_request": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/86"
          }
        },
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2128312234/reactions",
          "total_count": 0,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "start_line": null,
        "original_start_line": null,
        "start_side": null,
        "line": null,
        "original_line": 97,
        "side": "RIGHT",
        "original_position": 25,
        "position": null,
        "subject_type": "line"
      },
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2128312920",
        "pull_request_review_id": 2899428323,
        "id": 2128312920,
        "node_id": "PRRC_kwDOLuT1gc5-23pY",
        "diff_hunk": "@@ -106,7 +108,7 @@ def v3(cls, is_tekken: bool = False, is_mm: bool = False) -> \"MistralTokenizer\":\n         return cls.from_file(str(cls._data_path() / tokenizer_name), mode=ValidationMode.test)\n \n     @classmethod\n-    def v7(cls, is_mm: bool = False) -> \"MistralTokenizer\":\n+    def v7(cls, is_mm: bool = False) -> MistralTokenizer:",
        "path": "src/mistral_common/tokens/tokenizers/mistral.py",
        "commit_id": "7eb47a86c6bcf079d991fe1e8b55094288423cc4",
        "original_commit_id": "6150ce60934f84e2479eb4fdeaab95ffe625f8d8",
        "user": {
          "login": "juliendenize",
          "id": 40604584,
          "node_id": "MDQ6VXNlcjQwNjA0NTg0",
          "avatar_url": "https://avatars.githubusercontent.com/u/40604584?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/juliendenize",
          "html_url": "https://github.com/juliendenize",
          "followers_url": "https://api.github.com/users/juliendenize/followers",
          "following_url": "https://api.github.com/users/juliendenize/following{/other_user}",
          "gists_url": "https://api.github.com/users/juliendenize/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/juliendenize/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/juliendenize/subscriptions",
          "organizations_url": "https://api.github.com/users/juliendenize/orgs",
          "repos_url": "https://api.github.com/users/juliendenize/repos",
          "events_url": "https://api.github.com/users/juliendenize/events{/privacy}",
          "received_events_url": "https://api.github.com/users/juliendenize/received_events",
          "type": "User",
          "user_view_type": "public",
          "site_admin": false
        },
        "body": "```suggestion\r\n    def v7(cls, is_mm: bool = False) -> \"MistralTokenizer\":\r\n```",
        "created_at": "2025-06-05T08:54:48Z",
        "updated_at": "2025-06-05T08:58:17Z",
        "html_url": "https://github.com/mistralai/mistral-common/pull/86#discussion_r2128312920",
        "pull_request_url": "https://api.github.com/repos/mistralai/mistral-common/pulls/86",
        "author_association": "CONTRIBUTOR",
        "_links": {
          "self": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2128312920"
          },
          "html": {
            "href": "https://github.com/mistralai/mistral-common/pull/86#discussion_r2128312920"
          },
          "pull_request": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/86"
          }
        },
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2128312920/reactions",
          "total_count": 0,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "start_line": null,
        "original_start_line": null,
        "start_side": null,
        "line": null,
        "original_line": 111,
        "side": "RIGHT",
        "original_position": 34,
        "position": null,
        "subject_type": "line"
      },
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2128314959",
        "pull_request_review_id": 2899428323,
        "id": 2128314959,
        "node_id": "PRRC_kwDOLuT1gc5-24JP",
        "diff_hunk": "@@ -163,21 +133,21 @@ def from_model(cls, model: str, strict: bool = False) -> \"MistralTokenizer\":\n \n             # TODO(Delete this code in mistral_common >= 1.6.0\n             # Prefix search the model name mapping\n-            for model_name, tokenizer_cls in model_name_to_tokenizer_cls.items():\n+            for model_name, tokenizer_cls in MODEL_NAME_TO_TOKENIZER_CLS.items():\n                 if model_name in model.lower():\n                     return tokenizer_cls()\n \n-        if model not in model_name_to_tokenizer_cls:\n+        if model not in MODEL_NAME_TO_TOKENIZER_CLS:\n             raise TokenizerException(f\"Unrecognized model: {model}\")\n \n-        return model_name_to_tokenizer_cls[model]()\n+        return MODEL_NAME_TO_TOKENIZER_CLS[model]()\n \n     @classmethod\n     def from_file(\n         cls,\n         tokenizer_filename: str,\n         mode: ValidationMode = ValidationMode.test,\n-    ) -> \"MistralTokenizer\":\n+    ) -> MistralTokenizer:",
        "path": "src/mistral_common/tokens/tokenizers/mistral.py",
        "commit_id": "7eb47a86c6bcf079d991fe1e8b55094288423cc4",
        "original_commit_id": "6150ce60934f84e2479eb4fdeaab95ffe625f8d8",
        "user": {
          "login": "juliendenize",
          "id": 40604584,
          "node_id": "MDQ6VXNlcjQwNjA0NTg0",
          "avatar_url": "https://avatars.githubusercontent.com/u/40604584?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/juliendenize",
          "html_url": "https://github.com/juliendenize",
          "followers_url": "https://api.github.com/users/juliendenize/followers",
          "following_url": "https://api.github.com/users/juliendenize/following{/other_user}",
          "gists_url": "https://api.github.com/users/juliendenize/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/juliendenize/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/juliendenize/subscriptions",
          "organizations_url": "https://api.github.com/users/juliendenize/orgs",
          "repos_url": "https://api.github.com/users/juliendenize/repos",
          "events_url": "https://api.github.com/users/juliendenize/events{/privacy}",
          "received_events_url": "https://api.github.com/users/juliendenize/received_events",
          "type": "User",
          "user_view_type": "public",
          "site_admin": false
        },
        "body": "```suggestion\r\n    ) -> \"MistralTokenizer\":\r\n```",
        "created_at": "2025-06-05T08:55:53Z",
        "updated_at": "2025-06-05T08:58:17Z",
        "html_url": "https://github.com/mistralai/mistral-common/pull/86#discussion_r2128314959",
        "pull_request_url": "https://api.github.com/repos/mistralai/mistral-common/pulls/86",
        "author_association": "CONTRIBUTOR",
        "_links": {
          "self": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2128314959"
          },
          "html": {
            "href": "https://github.com/mistralai/mistral-common/pull/86#discussion_r2128314959"
          },
          "pull_request": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/86"
          }
        },
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2128314959/reactions",
          "total_count": 0,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "start_line": null,
        "original_start_line": null,
        "start_side": null,
        "line": null,
        "original_line": 150,
        "side": "RIGHT",
        "original_position": 101,
        "position": null,
        "subject_type": "line"
      }
    ]
  },
  "85": {
    "issue_comments": [
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/issues/comments/2945457686",
        "html_url": "https://github.com/mistralai/mistral-common/pull/85#issuecomment-2945457686",
        "issue_url": "https://api.github.com/repos/mistralai/mistral-common/issues/85",
        "id": 2945457686,
        "node_id": "IC_kwDOLuT1gc6vkB4W",
        "user": {
          "login": "patrickvonplaten",
          "id": 23423619,
          "node_id": "MDQ6VXNlcjIzNDIzNjE5",
          "avatar_url": "https://avatars.githubusercontent.com/u/23423619?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/patrickvonplaten",
          "html_url": "https://github.com/patrickvonplaten",
          "followers_url": "https://api.github.com/users/patrickvonplaten/followers",
          "following_url": "https://api.github.com/users/patrickvonplaten/following{/other_user}",
          "gists_url": "https://api.github.com/users/patrickvonplaten/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/patrickvonplaten/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/patrickvonplaten/subscriptions",
          "organizations_url": "https://api.github.com/users/patrickvonplaten/orgs",
          "repos_url": "https://api.github.com/users/patrickvonplaten/repos",
          "events_url": "https://api.github.com/users/patrickvonplaten/events{/privacy}",
          "received_events_url": "https://api.github.com/users/patrickvonplaten/received_events",
          "type": "User",
          "user_view_type": "public",
          "site_admin": false
        },
        "created_at": "2025-06-05T17:45:03Z",
        "updated_at": "2025-06-05T17:45:03Z",
        "author_association": "CONTRIBUTOR",
        "body": "Change works for me - thanks! ",
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/issues/comments/2945457686/reactions",
          "total_count": 0,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "performed_via_github_app": null
      }
    ],
    "review_comments": [
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2132027409",
        "pull_request_review_id": 2904648160,
        "id": 2132027409,
        "node_id": "PRRC_kwDOLuT1gc5_FCgR",
        "diff_hunk": "@@ -48,6 +48,8 @@ def image_from_chunk(chunk: Union[ImageURLChunk, ImageChunk]) -> SerializableIma\n         data = chunk.get_url().split(\",\")[1]\n         image_data = base64.b64decode(data)\n         return Image.open(BytesIO(image_data))\n+    if chunk.get_url().startswith(\"file\"):\n+        return Image.open(open(chunk.get_url().replace(\"file://\", \"\"),'rb'))",
        "path": "src/mistral_common/tokens/tokenizers/multimodal.py",
        "commit_id": "27a746d52ddb089fd4b0a65524ab9b5cba58034c",
        "original_commit_id": "d2ea95ddee8196281f52d461a2194bfc4d8c75dc",
        "user": {
          "login": "juliendenize",
          "id": 40604584,
          "node_id": "MDQ6VXNlcjQwNjA0NTg0",
          "avatar_url": "https://avatars.githubusercontent.com/u/40604584?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/juliendenize",
          "html_url": "https://github.com/juliendenize",
          "followers_url": "https://api.github.com/users/juliendenize/followers",
          "following_url": "https://api.github.com/users/juliendenize/following{/other_user}",
          "gists_url": "https://api.github.com/users/juliendenize/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/juliendenize/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/juliendenize/subscriptions",
          "organizations_url": "https://api.github.com/users/juliendenize/orgs",
          "repos_url": "https://api.github.com/users/juliendenize/repos",
          "events_url": "https://api.github.com/users/juliendenize/events{/privacy}",
          "received_events_url": "https://api.github.com/users/juliendenize/received_events",
          "type": "User",
          "user_view_type": "public",
          "site_admin": false
        },
        "body": "```suggestion\r\n        return Image.open(open(chunk.get_url().replace(\"file://\", \"\"), \"rb\"))\r\n```",
        "created_at": "2025-06-06T11:30:24Z",
        "updated_at": "2025-06-06T11:30:24Z",
        "html_url": "https://github.com/mistralai/mistral-common/pull/85#discussion_r2132027409",
        "pull_request_url": "https://api.github.com/repos/mistralai/mistral-common/pulls/85",
        "author_association": "CONTRIBUTOR",
        "_links": {
          "self": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2132027409"
          },
          "html": {
            "href": "https://github.com/mistralai/mistral-common/pull/85#discussion_r2132027409"
          },
          "pull_request": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/85"
          }
        },
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2132027409/reactions",
          "total_count": 0,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "start_line": null,
        "original_start_line": null,
        "start_side": null,
        "line": null,
        "original_line": 52,
        "side": "RIGHT",
        "original_position": 5,
        "position": null,
        "subject_type": "line"
      }
    ]
  },
  "82": {
    "issue_comments": [],
    "review_comments": [
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2103482796",
        "pull_request_review_id": 2862705711,
        "id": 2103482796,
        "node_id": "PRRC_kwDOLuT1gc59YJms",
        "diff_hunk": "@@ -295,6 +295,9 @@ def _encode_tool_calls_in_assistant_message(self, message: AssistantMessageType)\n         return curr_tokens\n \n     def encode_assistant_message(self, message: AssistantMessageType, is_before_last_user_message: bool) -> List[int]:\n+        if message.tool_calls and message.content:",
        "path": "src/mistral_common/tokens/tokenizers/instruct.py",
        "commit_id": "280cf9f7f2ef7cc06728563af70436560faaa402",
        "original_commit_id": "bbf0f08dd80c45ce40be4d6ed1114892ba9ed360",
        "user": {
          "login": "joa-stdn",
          "id": 3199030,
          "node_id": "MDQ6VXNlcjMxOTkwMzA=",
          "avatar_url": "https://avatars.githubusercontent.com/u/3199030?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/joa-stdn",
          "html_url": "https://github.com/joa-stdn",
          "followers_url": "https://api.github.com/users/joa-stdn/followers",
          "following_url": "https://api.github.com/users/joa-stdn/following{/other_user}",
          "gists_url": "https://api.github.com/users/joa-stdn/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/joa-stdn/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/joa-stdn/subscriptions",
          "organizations_url": "https://api.github.com/users/joa-stdn/orgs",
          "repos_url": "https://api.github.com/users/joa-stdn/repos",
          "events_url": "https://api.github.com/users/joa-stdn/events{/privacy}",
          "received_events_url": "https://api.github.com/users/joa-stdn/received_events",
          "type": "User",
          "user_view_type": "public",
          "site_admin": false
        },
        "body": "I think to be exhaustive maybe we should also raise in `InstructTokenizerV1` that defines its own `encode_assistant_message`? (no need for V3 that calls `super()`)",
        "created_at": "2025-05-22T22:26:34Z",
        "updated_at": "2025-05-22T22:27:44Z",
        "html_url": "https://github.com/mistralai/mistral-common/pull/82#discussion_r2103482796",
        "pull_request_url": "https://api.github.com/repos/mistralai/mistral-common/pulls/82",
        "author_association": "NONE",
        "_links": {
          "self": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2103482796"
          },
          "html": {
            "href": "https://github.com/mistralai/mistral-common/pull/82#discussion_r2103482796"
          },
          "pull_request": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/82"
          }
        },
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2103482796/reactions",
          "total_count": 0,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "start_line": null,
        "original_start_line": null,
        "start_side": null,
        "line": 298,
        "original_line": 298,
        "side": "RIGHT",
        "original_position": 4,
        "position": 4,
        "subject_type": "line"
      },
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2103488622",
        "pull_request_review_id": 2862713921,
        "id": 2103488622,
        "node_id": "PRRC_kwDOLuT1gc59YLBu",
        "diff_hunk": "@@ -339,6 +306,112 @@ def test_normalize_funcalls(self, normalizer: InstructRequestNormalizer) -> None\n         assert normalized == gt\n \n \n+class TestChatCompletionRequestNormalizationV7:\n+    @pytest.fixture(autouse=True)\n+    def normalizer_v7(self) -> InstructRequestNormalizerV7:\n+        return InstructRequestNormalizerV7(UserMessage, AssistantMessage, ToolMessage, SystemMessage, InstructRequest)\n+\n+    def test_system_assistant_user_v7(self, normalizer_v7: InstructRequestNormalizerV7) -> None:\n+        chat_completion_request = mock_chat_completion(\n+            messages=[\n+                SystemMessage(content=\"S\"),\n+                AssistantMessage(content=\"A\"),\n+                UserMessage(content=\"U\"),\n+            ]\n+        )\n+\n+        parsed_request: InstructRequest = normalizer_v7.from_chat_completion_request(chat_completion_request)\n+\n+        first_message = parsed_request.messages[0]\n+        assert isinstance(first_message, SystemMessage)\n+        assert first_message.content == \"S\"\n+\n+        second_message = parsed_request.messages[1]\n+        assert isinstance(second_message, AssistantMessage)\n+        assert second_message.content == \"A\"\n+\n+        assert parsed_request.system_prompt is None\n+\n+    def test_assistant_assistant_system_v7(self, normalizer_v7: InstructRequestNormalizer) -> None:",
        "path": "tests/test_normalization.py",
        "commit_id": "280cf9f7f2ef7cc06728563af70436560faaa402",
        "original_commit_id": "bbf0f08dd80c45ce40be4d6ed1114892ba9ed360",
        "user": {
          "login": "joa-stdn",
          "id": 3199030,
          "node_id": "MDQ6VXNlcjMxOTkwMzA=",
          "avatar_url": "https://avatars.githubusercontent.com/u/3199030?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/joa-stdn",
          "html_url": "https://github.com/joa-stdn",
          "followers_url": "https://api.github.com/users/joa-stdn/followers",
          "following_url": "https://api.github.com/users/joa-stdn/following{/other_user}",
          "gists_url": "https://api.github.com/users/joa-stdn/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/joa-stdn/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/joa-stdn/subscriptions",
          "organizations_url": "https://api.github.com/users/joa-stdn/orgs",
          "repos_url": "https://api.github.com/users/joa-stdn/repos",
          "events_url": "https://api.github.com/users/joa-stdn/events{/privacy}",
          "received_events_url": "https://api.github.com/users/joa-stdn/received_events",
          "type": "User",
          "user_view_type": "public",
          "site_admin": false
        },
        "body": "The name of this test is not adapted?",
        "created_at": "2025-05-22T22:33:55Z",
        "updated_at": "2025-05-22T22:33:55Z",
        "html_url": "https://github.com/mistralai/mistral-common/pull/82#discussion_r2103488622",
        "pull_request_url": "https://api.github.com/repos/mistralai/mistral-common/pulls/82",
        "author_association": "NONE",
        "_links": {
          "self": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2103488622"
          },
          "html": {
            "href": "https://github.com/mistralai/mistral-common/pull/82#discussion_r2103488622"
          },
          "pull_request": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/82"
          }
        },
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2103488622/reactions",
          "total_count": 0,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "start_line": null,
        "original_start_line": null,
        "start_side": null,
        "line": 335,
        "original_line": 335,
        "side": "RIGHT",
        "original_position": 202,
        "position": 202,
        "subject_type": "line"
      },
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2103508139",
        "pull_request_review_id": 2862741918,
        "id": 2103508139,
        "node_id": "PRRC_kwDOLuT1gc59YPyr",
        "diff_hunk": "@@ -339,6 +306,112 @@ def test_normalize_funcalls(self, normalizer: InstructRequestNormalizer) -> None\n         assert normalized == gt\n \n \n+class TestChatCompletionRequestNormalizationV7:\n+    @pytest.fixture(autouse=True)\n+    def normalizer_v7(self) -> InstructRequestNormalizerV7:\n+        return InstructRequestNormalizerV7(UserMessage, AssistantMessage, ToolMessage, SystemMessage, InstructRequest)\n+\n+    def test_system_assistant_user_v7(self, normalizer_v7: InstructRequestNormalizerV7) -> None:\n+        chat_completion_request = mock_chat_completion(\n+            messages=[\n+                SystemMessage(content=\"S\"),\n+                AssistantMessage(content=\"A\"),\n+                UserMessage(content=\"U\"),\n+            ]\n+        )\n+\n+        parsed_request: InstructRequest = normalizer_v7.from_chat_completion_request(chat_completion_request)\n+\n+        first_message = parsed_request.messages[0]\n+        assert isinstance(first_message, SystemMessage)\n+        assert first_message.content == \"S\"\n+\n+        second_message = parsed_request.messages[1]\n+        assert isinstance(second_message, AssistantMessage)\n+        assert second_message.content == \"A\"\n+\n+        assert parsed_request.system_prompt is None\n+\n+    def test_assistant_assistant_system_v7(self, normalizer_v7: InstructRequestNormalizer) -> None:\n+        chat_completion_request = mock_chat_completion(\n+            messages=[\n+                AssistantMessage(content=\"A\"),\n+                SystemMessage(content=\"S\"),\n+            ]\n+        )\n+\n+        parsed_request = normalizer_v7.from_chat_completion_request(chat_completion_request)\n+\n+        assert parsed_request.system_prompt is None\n+\n+        assert len(parsed_request.messages) == 2\n+\n+        first_message = parsed_request.messages[0]\n+        assert isinstance(first_message, AssistantMessage)\n+        assert first_message.content == \"A\"\n+\n+        second_message = parsed_request.messages[1]\n+        assert isinstance(second_message, SystemMessage)\n+        assert second_message.content == \"S\"\n+\n+    def test_assistant_content_with_tool_calls(self, normalizer_v7: InstructRequestNormalizer) -> None:\n+        chat_completion_request = mock_chat_completion(\n+            messages=[\n+                AssistantMessage(\n+                    content=\"A\",\n+                    tool_calls=[ToolCall(function=FunctionCall(name=\"tool1\", arguments='{\"input\": \"11\"}'))],\n+                )\n+            ]\n+        )\n+        normalized_chat_req = normalizer_v7.from_chat_completion_request(chat_completion_request)\n+\n+        assert normalized_chat_req.messages[0].content == \"A\", normalized_chat_req.messages[0].content\n+        assert len(normalized_chat_req.messages[0].tool_calls) == 1, normalized_chat_req.messages[0].tool_calls\n+        assert normalized_chat_req.messages[0].tool_calls[0].function.name == \"tool1\", (\n+            normalized_chat_req.messages[0].tool_calls[0].function.name\n+        )\n+\n+    def test_assistant_content_with_more_tool_calls(self, normalizer_v7: InstructRequestNormalizer) -> None:\n+        chat_completion_request = mock_chat_completion(\n+            messages=[\n+                UserMessage(content=\"A1\"),\n+                AssistantMessage(\n+                    content=\"B1\",\n+                ),\n+                AssistantMessage(\n+                    content=\"B2\",\n+                    tool_calls=[ToolCall(function=FunctionCall(name=\"tool1\", arguments='{\"input\": \"1\"}'))],\n+                ),",
        "path": "tests/test_normalization.py",
        "commit_id": "280cf9f7f2ef7cc06728563af70436560faaa402",
        "original_commit_id": "bbf0f08dd80c45ce40be4d6ed1114892ba9ed360",
        "user": {
          "login": "joa-stdn",
          "id": 3199030,
          "node_id": "MDQ6VXNlcjMxOTkwMzA=",
          "avatar_url": "https://avatars.githubusercontent.com/u/3199030?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/joa-stdn",
          "html_url": "https://github.com/joa-stdn",
          "followers_url": "https://api.github.com/users/joa-stdn/followers",
          "following_url": "https://api.github.com/users/joa-stdn/following{/other_user}",
          "gists_url": "https://api.github.com/users/joa-stdn/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/joa-stdn/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/joa-stdn/subscriptions",
          "organizations_url": "https://api.github.com/users/joa-stdn/orgs",
          "repos_url": "https://api.github.com/users/joa-stdn/repos",
          "events_url": "https://api.github.com/users/joa-stdn/events{/privacy}",
          "received_events_url": "https://api.github.com/users/joa-stdn/received_events",
          "type": "User",
          "user_view_type": "public",
          "site_admin": false
        },
        "body": "Not sure this example makes a lot of sense in practice because we're missing the tool result messages in between? I would say that if anything this example is not that great since it's messing up with the order in tokenization and hiding the fact that B2 led to tool1 and B4 to tools tool21 and tool22\r\nShould we even allow successive assistant messages without tool results?",
        "created_at": "2025-05-22T22:46:31Z",
        "updated_at": "2025-05-22T22:47:15Z",
        "html_url": "https://github.com/mistralai/mistral-common/pull/82#discussion_r2103508139",
        "pull_request_url": "https://api.github.com/repos/mistralai/mistral-common/pulls/82",
        "author_association": "NONE",
        "_links": {
          "self": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2103508139"
          },
          "html": {
            "href": "https://github.com/mistralai/mistral-common/pull/82#discussion_r2103508139"
          },
          "pull_request": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/82"
          }
        },
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2103508139/reactions",
          "total_count": 0,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "start_line": null,
        "original_start_line": null,
        "start_side": null,
        "line": 384,
        "original_line": 384,
        "side": "RIGHT",
        "original_position": 251,
        "position": 251,
        "subject_type": "line"
      },
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2103512342",
        "pull_request_review_id": 2862748691,
        "id": 2103512342,
        "node_id": "PRRC_kwDOLuT1gc59YQ0W",
        "diff_hunk": "@@ -339,6 +306,112 @@ def test_normalize_funcalls(self, normalizer: InstructRequestNormalizer) -> None\n         assert normalized == gt\n \n \n+class TestChatCompletionRequestNormalizationV7:\n+    @pytest.fixture(autouse=True)\n+    def normalizer_v7(self) -> InstructRequestNormalizerV7:\n+        return InstructRequestNormalizerV7(UserMessage, AssistantMessage, ToolMessage, SystemMessage, InstructRequest)\n+\n+    def test_system_assistant_user_v7(self, normalizer_v7: InstructRequestNormalizerV7) -> None:\n+        chat_completion_request = mock_chat_completion(\n+            messages=[\n+                SystemMessage(content=\"S\"),\n+                AssistantMessage(content=\"A\"),\n+                UserMessage(content=\"U\"),\n+            ]\n+        )\n+\n+        parsed_request: InstructRequest = normalizer_v7.from_chat_completion_request(chat_completion_request)\n+\n+        first_message = parsed_request.messages[0]\n+        assert isinstance(first_message, SystemMessage)\n+        assert first_message.content == \"S\"\n+\n+        second_message = parsed_request.messages[1]\n+        assert isinstance(second_message, AssistantMessage)\n+        assert second_message.content == \"A\"\n+\n+        assert parsed_request.system_prompt is None\n+\n+    def test_assistant_assistant_system_v7(self, normalizer_v7: InstructRequestNormalizer) -> None:\n+        chat_completion_request = mock_chat_completion(\n+            messages=[\n+                AssistantMessage(content=\"A\"),\n+                SystemMessage(content=\"S\"),\n+            ]\n+        )\n+\n+        parsed_request = normalizer_v7.from_chat_completion_request(chat_completion_request)\n+\n+        assert parsed_request.system_prompt is None\n+\n+        assert len(parsed_request.messages) == 2\n+\n+        first_message = parsed_request.messages[0]\n+        assert isinstance(first_message, AssistantMessage)\n+        assert first_message.content == \"A\"\n+\n+        second_message = parsed_request.messages[1]\n+        assert isinstance(second_message, SystemMessage)\n+        assert second_message.content == \"S\"\n+\n+    def test_assistant_content_with_tool_calls(self, normalizer_v7: InstructRequestNormalizer) -> None:\n+        chat_completion_request = mock_chat_completion(\n+            messages=[\n+                AssistantMessage(\n+                    content=\"A\",\n+                    tool_calls=[ToolCall(function=FunctionCall(name=\"tool1\", arguments='{\"input\": \"11\"}'))],\n+                )\n+            ]\n+        )\n+        normalized_chat_req = normalizer_v7.from_chat_completion_request(chat_completion_request)\n+\n+        assert normalized_chat_req.messages[0].content == \"A\", normalized_chat_req.messages[0].content\n+        assert len(normalized_chat_req.messages[0].tool_calls) == 1, normalized_chat_req.messages[0].tool_calls\n+        assert normalized_chat_req.messages[0].tool_calls[0].function.name == \"tool1\", (\n+            normalized_chat_req.messages[0].tool_calls[0].function.name\n+        )\n+\n+    def test_assistant_content_with_more_tool_calls(self, normalizer_v7: InstructRequestNormalizer) -> None:\n+        chat_completion_request = mock_chat_completion(\n+            messages=[\n+                UserMessage(content=\"A1\"),\n+                AssistantMessage(\n+                    content=\"B1\",\n+                ),\n+                AssistantMessage(\n+                    content=\"B2\",\n+                    tool_calls=[ToolCall(function=FunctionCall(name=\"tool1\", arguments='{\"input\": \"1\"}'))],\n+                ),",
        "path": "tests/test_normalization.py",
        "commit_id": "280cf9f7f2ef7cc06728563af70436560faaa402",
        "original_commit_id": "bbf0f08dd80c45ce40be4d6ed1114892ba9ed360",
        "user": {
          "login": "joa-stdn",
          "id": 3199030,
          "node_id": "MDQ6VXNlcjMxOTkwMzA=",
          "avatar_url": "https://avatars.githubusercontent.com/u/3199030?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/joa-stdn",
          "html_url": "https://github.com/joa-stdn",
          "followers_url": "https://api.github.com/users/joa-stdn/followers",
          "following_url": "https://api.github.com/users/joa-stdn/following{/other_user}",
          "gists_url": "https://api.github.com/users/joa-stdn/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/joa-stdn/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/joa-stdn/subscriptions",
          "organizations_url": "https://api.github.com/users/joa-stdn/orgs",
          "repos_url": "https://api.github.com/users/joa-stdn/repos",
          "events_url": "https://api.github.com/users/joa-stdn/events{/privacy}",
          "received_events_url": "https://api.github.com/users/joa-stdn/received_events",
          "type": "User",
          "user_view_type": "public",
          "site_admin": false
        },
        "body": "Besides I think we should add another test with normalizer v7 composed with tokenizer v7 to be exhaustive",
        "created_at": "2025-05-22T22:48:11Z",
        "updated_at": "2025-05-22T22:48:12Z",
        "html_url": "https://github.com/mistralai/mistral-common/pull/82#discussion_r2103512342",
        "pull_request_url": "https://api.github.com/repos/mistralai/mistral-common/pulls/82",
        "author_association": "NONE",
        "_links": {
          "self": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2103512342"
          },
          "html": {
            "href": "https://github.com/mistralai/mistral-common/pull/82#discussion_r2103512342"
          },
          "pull_request": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/82"
          }
        },
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2103512342/reactions",
          "total_count": 0,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "start_line": null,
        "original_start_line": null,
        "start_side": null,
        "line": 384,
        "original_line": 384,
        "side": "RIGHT",
        "in_reply_to_id": 2103508139,
        "original_position": 251,
        "position": 251,
        "subject_type": "line"
      },
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2104096758",
        "pull_request_review_id": 2863646935,
        "id": 2104096758,
        "node_id": "PRRC_kwDOLuT1gc59aff2",
        "diff_hunk": "@@ -295,6 +295,9 @@ def _encode_tool_calls_in_assistant_message(self, message: AssistantMessageType)\n         return curr_tokens\n \n     def encode_assistant_message(self, message: AssistantMessageType, is_before_last_user_message: bool) -> List[int]:\n+        if message.tool_calls and message.content:",
        "path": "src/mistral_common/tokens/tokenizers/instruct.py",
        "commit_id": "280cf9f7f2ef7cc06728563af70436560faaa402",
        "original_commit_id": "bbf0f08dd80c45ce40be4d6ed1114892ba9ed360",
        "user": {
          "login": "patrickvonplaten",
          "id": 23423619,
          "node_id": "MDQ6VXNlcjIzNDIzNjE5",
          "avatar_url": "https://avatars.githubusercontent.com/u/23423619?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/patrickvonplaten",
          "html_url": "https://github.com/patrickvonplaten",
          "followers_url": "https://api.github.com/users/patrickvonplaten/followers",
          "following_url": "https://api.github.com/users/patrickvonplaten/following{/other_user}",
          "gists_url": "https://api.github.com/users/patrickvonplaten/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/patrickvonplaten/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/patrickvonplaten/subscriptions",
          "organizations_url": "https://api.github.com/users/patrickvonplaten/orgs",
          "repos_url": "https://api.github.com/users/patrickvonplaten/repos",
          "events_url": "https://api.github.com/users/patrickvonplaten/events{/privacy}",
          "received_events_url": "https://api.github.com/users/patrickvonplaten/received_events",
          "type": "User",
          "user_view_type": "public",
          "site_admin": false
        },
        "body": "Hmm `InstructTokenizerV1` doesn't allow tool calls at all so think we're good here",
        "created_at": "2025-05-23T08:29:20Z",
        "updated_at": "2025-05-23T08:29:21Z",
        "html_url": "https://github.com/mistralai/mistral-common/pull/82#discussion_r2104096758",
        "pull_request_url": "https://api.github.com/repos/mistralai/mistral-common/pulls/82",
        "author_association": "CONTRIBUTOR",
        "_links": {
          "self": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2104096758"
          },
          "html": {
            "href": "https://github.com/mistralai/mistral-common/pull/82#discussion_r2104096758"
          },
          "pull_request": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/82"
          }
        },
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2104096758/reactions",
          "total_count": 1,
          "+1": 1,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "start_line": null,
        "original_start_line": null,
        "start_side": null,
        "line": 298,
        "original_line": 298,
        "side": "RIGHT",
        "in_reply_to_id": 2103482796,
        "original_position": 4,
        "position": 4,
        "subject_type": "line"
      },
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2104098145",
        "pull_request_review_id": 2863649164,
        "id": 2104098145,
        "node_id": "PRRC_kwDOLuT1gc59af1h",
        "diff_hunk": "@@ -339,6 +306,112 @@ def test_normalize_funcalls(self, normalizer: InstructRequestNormalizer) -> None\n         assert normalized == gt\n \n \n+class TestChatCompletionRequestNormalizationV7:\n+    @pytest.fixture(autouse=True)\n+    def normalizer_v7(self) -> InstructRequestNormalizerV7:\n+        return InstructRequestNormalizerV7(UserMessage, AssistantMessage, ToolMessage, SystemMessage, InstructRequest)\n+\n+    def test_system_assistant_user_v7(self, normalizer_v7: InstructRequestNormalizerV7) -> None:\n+        chat_completion_request = mock_chat_completion(\n+            messages=[\n+                SystemMessage(content=\"S\"),\n+                AssistantMessage(content=\"A\"),\n+                UserMessage(content=\"U\"),\n+            ]\n+        )\n+\n+        parsed_request: InstructRequest = normalizer_v7.from_chat_completion_request(chat_completion_request)\n+\n+        first_message = parsed_request.messages[0]\n+        assert isinstance(first_message, SystemMessage)\n+        assert first_message.content == \"S\"\n+\n+        second_message = parsed_request.messages[1]\n+        assert isinstance(second_message, AssistantMessage)\n+        assert second_message.content == \"A\"\n+\n+        assert parsed_request.system_prompt is None\n+\n+    def test_assistant_assistant_system_v7(self, normalizer_v7: InstructRequestNormalizer) -> None:",
        "path": "tests/test_normalization.py",
        "commit_id": "280cf9f7f2ef7cc06728563af70436560faaa402",
        "original_commit_id": "bbf0f08dd80c45ce40be4d6ed1114892ba9ed360",
        "user": {
          "login": "patrickvonplaten",
          "id": 23423619,
          "node_id": "MDQ6VXNlcjIzNDIzNjE5",
          "avatar_url": "https://avatars.githubusercontent.com/u/23423619?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/patrickvonplaten",
          "html_url": "https://github.com/patrickvonplaten",
          "followers_url": "https://api.github.com/users/patrickvonplaten/followers",
          "following_url": "https://api.github.com/users/patrickvonplaten/following{/other_user}",
          "gists_url": "https://api.github.com/users/patrickvonplaten/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/patrickvonplaten/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/patrickvonplaten/subscriptions",
          "organizations_url": "https://api.github.com/users/patrickvonplaten/orgs",
          "repos_url": "https://api.github.com/users/patrickvonplaten/repos",
          "events_url": "https://api.github.com/users/patrickvonplaten/events{/privacy}",
          "received_events_url": "https://api.github.com/users/patrickvonplaten/received_events",
          "type": "User",
          "user_view_type": "public",
          "site_admin": false
        },
        "body": "I just moved it from above ",
        "created_at": "2025-05-23T08:30:07Z",
        "updated_at": "2025-05-23T08:30:08Z",
        "html_url": "https://github.com/mistralai/mistral-common/pull/82#discussion_r2104098145",
        "pull_request_url": "https://api.github.com/repos/mistralai/mistral-common/pulls/82",
        "author_association": "CONTRIBUTOR",
        "_links": {
          "self": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2104098145"
          },
          "html": {
            "href": "https://github.com/mistralai/mistral-common/pull/82#discussion_r2104098145"
          },
          "pull_request": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/82"
          }
        },
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2104098145/reactions",
          "total_count": 0,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "start_line": null,
        "original_start_line": null,
        "start_side": null,
        "line": 335,
        "original_line": 335,
        "side": "RIGHT",
        "in_reply_to_id": 2103488622,
        "original_position": 202,
        "position": 202,
        "subject_type": "line"
      },
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2104199585",
        "pull_request_review_id": 2863806382,
        "id": 2104199585,
        "node_id": "PRRC_kwDOLuT1gc59a4mh",
        "diff_hunk": "@@ -339,6 +306,112 @@ def test_normalize_funcalls(self, normalizer: InstructRequestNormalizer) -> None\n         assert normalized == gt\n \n \n+class TestChatCompletionRequestNormalizationV7:\n+    @pytest.fixture(autouse=True)\n+    def normalizer_v7(self) -> InstructRequestNormalizerV7:\n+        return InstructRequestNormalizerV7(UserMessage, AssistantMessage, ToolMessage, SystemMessage, InstructRequest)\n+\n+    def test_system_assistant_user_v7(self, normalizer_v7: InstructRequestNormalizerV7) -> None:\n+        chat_completion_request = mock_chat_completion(\n+            messages=[\n+                SystemMessage(content=\"S\"),\n+                AssistantMessage(content=\"A\"),\n+                UserMessage(content=\"U\"),\n+            ]\n+        )\n+\n+        parsed_request: InstructRequest = normalizer_v7.from_chat_completion_request(chat_completion_request)\n+\n+        first_message = parsed_request.messages[0]\n+        assert isinstance(first_message, SystemMessage)\n+        assert first_message.content == \"S\"\n+\n+        second_message = parsed_request.messages[1]\n+        assert isinstance(second_message, AssistantMessage)\n+        assert second_message.content == \"A\"\n+\n+        assert parsed_request.system_prompt is None\n+\n+    def test_assistant_assistant_system_v7(self, normalizer_v7: InstructRequestNormalizer) -> None:\n+        chat_completion_request = mock_chat_completion(\n+            messages=[\n+                AssistantMessage(content=\"A\"),\n+                SystemMessage(content=\"S\"),\n+            ]\n+        )\n+\n+        parsed_request = normalizer_v7.from_chat_completion_request(chat_completion_request)\n+\n+        assert parsed_request.system_prompt is None\n+\n+        assert len(parsed_request.messages) == 2\n+\n+        first_message = parsed_request.messages[0]\n+        assert isinstance(first_message, AssistantMessage)\n+        assert first_message.content == \"A\"\n+\n+        second_message = parsed_request.messages[1]\n+        assert isinstance(second_message, SystemMessage)\n+        assert second_message.content == \"S\"\n+\n+    def test_assistant_content_with_tool_calls(self, normalizer_v7: InstructRequestNormalizer) -> None:\n+        chat_completion_request = mock_chat_completion(\n+            messages=[\n+                AssistantMessage(\n+                    content=\"A\",\n+                    tool_calls=[ToolCall(function=FunctionCall(name=\"tool1\", arguments='{\"input\": \"11\"}'))],\n+                )\n+            ]\n+        )\n+        normalized_chat_req = normalizer_v7.from_chat_completion_request(chat_completion_request)\n+\n+        assert normalized_chat_req.messages[0].content == \"A\", normalized_chat_req.messages[0].content\n+        assert len(normalized_chat_req.messages[0].tool_calls) == 1, normalized_chat_req.messages[0].tool_calls\n+        assert normalized_chat_req.messages[0].tool_calls[0].function.name == \"tool1\", (\n+            normalized_chat_req.messages[0].tool_calls[0].function.name\n+        )\n+\n+    def test_assistant_content_with_more_tool_calls(self, normalizer_v7: InstructRequestNormalizer) -> None:\n+        chat_completion_request = mock_chat_completion(\n+            messages=[\n+                UserMessage(content=\"A1\"),\n+                AssistantMessage(\n+                    content=\"B1\",\n+                ),\n+                AssistantMessage(\n+                    content=\"B2\",\n+                    tool_calls=[ToolCall(function=FunctionCall(name=\"tool1\", arguments='{\"input\": \"1\"}'))],\n+                ),",
        "path": "tests/test_normalization.py",
        "commit_id": "280cf9f7f2ef7cc06728563af70436560faaa402",
        "original_commit_id": "bbf0f08dd80c45ce40be4d6ed1114892ba9ed360",
        "user": {
          "login": "patrickvonplaten",
          "id": 23423619,
          "node_id": "MDQ6VXNlcjIzNDIzNjE5",
          "avatar_url": "https://avatars.githubusercontent.com/u/23423619?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/patrickvonplaten",
          "html_url": "https://github.com/patrickvonplaten",
          "followers_url": "https://api.github.com/users/patrickvonplaten/followers",
          "following_url": "https://api.github.com/users/patrickvonplaten/following{/other_user}",
          "gists_url": "https://api.github.com/users/patrickvonplaten/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/patrickvonplaten/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/patrickvonplaten/subscriptions",
          "organizations_url": "https://api.github.com/users/patrickvonplaten/orgs",
          "repos_url": "https://api.github.com/users/patrickvonplaten/repos",
          "events_url": "https://api.github.com/users/patrickvonplaten/events{/privacy}",
          "received_events_url": "https://api.github.com/users/patrickvonplaten/received_events",
          "type": "User",
          "user_view_type": "public",
          "site_admin": false
        },
        "body": "Good idea with end-to-end test. \r\n\r\nThink the test chat completion request is a good example though because we want to keep it as minimal as possible and because we can have multiple assistant messages that will be aggregated together",
        "created_at": "2025-05-23T09:26:47Z",
        "updated_at": "2025-05-23T09:26:47Z",
        "html_url": "https://github.com/mistralai/mistral-common/pull/82#discussion_r2104199585",
        "pull_request_url": "https://api.github.com/repos/mistralai/mistral-common/pulls/82",
        "author_association": "CONTRIBUTOR",
        "_links": {
          "self": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2104199585"
          },
          "html": {
            "href": "https://github.com/mistralai/mistral-common/pull/82#discussion_r2104199585"
          },
          "pull_request": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/82"
          }
        },
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2104199585/reactions",
          "total_count": 0,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "start_line": null,
        "original_start_line": null,
        "start_side": null,
        "line": 384,
        "original_line": 384,
        "side": "RIGHT",
        "in_reply_to_id": 2103508139,
        "original_position": 251,
        "position": 251,
        "subject_type": "line"
      },
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2104693353",
        "pull_request_review_id": 2864589125,
        "id": 2104693353,
        "node_id": "PRRC_kwDOLuT1gc59cxJp",
        "diff_hunk": "@@ -36,6 +36,7 @@ class InstructRequestNormalizer(\n     \"\"\"\n \n     system_prompt_in_begin: bool = False\n+    allow_tool_call_and_content: bool = False",
        "path": "src/mistral_common/protocol/instruct/normalize.py",
        "commit_id": "280cf9f7f2ef7cc06728563af70436560faaa402",
        "original_commit_id": "81cb980f3d2ea44ce4c672761402d60f1f12a0a1",
        "user": {
          "login": "juliendenize",
          "id": 40604584,
          "node_id": "MDQ6VXNlcjQwNjA0NTg0",
          "avatar_url": "https://avatars.githubusercontent.com/u/40604584?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/juliendenize",
          "html_url": "https://github.com/juliendenize",
          "followers_url": "https://api.github.com/users/juliendenize/followers",
          "following_url": "https://api.github.com/users/juliendenize/following{/other_user}",
          "gists_url": "https://api.github.com/users/juliendenize/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/juliendenize/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/juliendenize/subscriptions",
          "organizations_url": "https://api.github.com/users/juliendenize/orgs",
          "repos_url": "https://api.github.com/users/juliendenize/repos",
          "events_url": "https://api.github.com/users/juliendenize/events{/privacy}",
          "received_events_url": "https://api.github.com/users/juliendenize/received_events",
          "type": "User",
          "user_view_type": "public",
          "site_admin": false
        },
        "body": "I like that below you rename `allow_tool_call_and_content` with a leading `_` to mark it private. Can we also do that for these args ? The user is not supposed to handle this right ?",
        "created_at": "2025-05-23T14:15:34Z",
        "updated_at": "2025-05-23T14:16:55Z",
        "html_url": "https://github.com/mistralai/mistral-common/pull/82#discussion_r2104693353",
        "pull_request_url": "https://api.github.com/repos/mistralai/mistral-common/pulls/82",
        "author_association": "CONTRIBUTOR",
        "_links": {
          "self": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2104693353"
          },
          "html": {
            "href": "https://github.com/mistralai/mistral-common/pull/82#discussion_r2104693353"
          },
          "pull_request": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/82"
          }
        },
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2104693353/reactions",
          "total_count": 0,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "start_line": null,
        "original_start_line": 38,
        "start_side": "RIGHT",
        "line": null,
        "original_line": 39,
        "side": "RIGHT",
        "original_position": 4,
        "position": null,
        "subject_type": "line"
      },
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2104693615",
        "pull_request_review_id": 2864589125,
        "id": 2104693615,
        "node_id": "PRRC_kwDOLuT1gc59cxNv",
        "diff_hunk": "@@ -342,3 +347,49 @@ def test_from_model() -> None:\n         tokenizer = MistralTokenizer.from_model(\"pixtral\", strict=False)\n         assert tokenizer.instruct_tokenizer.tokenizer.version == TokenizerVersion.v3\n         assert tokenizer.instruct_tokenizer.mm_encoder is not None\n+\n+\n+def test_assistant_tool_call_and_content(tekkenizer: InstructTokenizerV7) -> None:\n+    request: InstructRequest = InstructRequest(\n+        available_tools=[\n+            Tool(function=Function(name=\"t1\", parameters={})),\n+            Tool(function=Function(name=\"t2\", parameters={})),\n+        ],\n+        messages=[\n+            UserMessage(content=\"a\"),\n+            AssistantMessage(\n+                content=\"b1b2\",\n+                tool_calls=[\n+                    ToolCall(id=\"000000000\", function=FunctionCall(name=\"t1\", arguments=\"{}\")),\n+                    ToolCall(id=\"111111111\", function=FunctionCall(name=\"t2\", arguments=\"{}\")),\n+                ],\n+            ),\n+        ],\n+    )\n+    tokenized = tekkenizer.encode_instruct(request)\n+    tokens = tokenized.tokens\n+    text = tokenized.text\n+\n+    assert text == (\n+        '<s>[AVAILABLE_TOOLS][{\"type\": \"function\", \"function\": '\n+        '{\"name\": \"t1\", \"description\": \"\", \"parameters\": {}}}, '\n+        '{\"type\": \"function\", \"function\": {\"name\": \"t2\", \"description\"'\n+        ': \"\", \"parameters\": {}}}][/AVAILABLE_TOOLS][INST]a[/INST]b1b2[TOOL_CALLS]'\n+        '[{\"name\": \"t1\", \"arguments\": {}, \"id\": \"000000000\"}, {\"name\": \"t2\", \"arguments\": {}'\n+        ', \"id\": \"111111111\"}]</s>'\n+    )\n+\n+    # make sure it also works end to end\n+    tools = request.available_tools\n+    chat_completion_request = ChatCompletionRequest(\n+        **request.model_dump(exclude={\"system_prompt\", \"truncate_at_max_tokens\", \"available_tools\"}), tools=tools\n+    )\n+    validator = MistralRequestValidatorV5(mode=ValidationMode.finetuning)\n+    normalizer = InstructRequestNormalizerV7.normalizer()\n+\n+    mistral_tokenizer = MistralTokenizer(tekkenizer, validator, normalizer)\n+    mistral_tokenizer._chat_completion_request_validator",
        "path": "tests/test_tokenizer_v7.py",
        "commit_id": "280cf9f7f2ef7cc06728563af70436560faaa402",
        "original_commit_id": "81cb980f3d2ea44ce4c672761402d60f1f12a0a1",
        "user": {
          "login": "juliendenize",
          "id": 40604584,
          "node_id": "MDQ6VXNlcjQwNjA0NTg0",
          "avatar_url": "https://avatars.githubusercontent.com/u/40604584?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/juliendenize",
          "html_url": "https://github.com/juliendenize",
          "followers_url": "https://api.github.com/users/juliendenize/followers",
          "following_url": "https://api.github.com/users/juliendenize/following{/other_user}",
          "gists_url": "https://api.github.com/users/juliendenize/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/juliendenize/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/juliendenize/subscriptions",
          "organizations_url": "https://api.github.com/users/juliendenize/orgs",
          "repos_url": "https://api.github.com/users/juliendenize/repos",
          "events_url": "https://api.github.com/users/juliendenize/events{/privacy}",
          "received_events_url": "https://api.github.com/users/juliendenize/received_events",
          "type": "User",
          "user_view_type": "public",
          "site_admin": false
        },
        "body": "I think you forgot to test something here",
        "created_at": "2025-05-23T14:15:44Z",
        "updated_at": "2025-05-23T14:16:55Z",
        "html_url": "https://github.com/mistralai/mistral-common/pull/82#discussion_r2104693615",
        "pull_request_url": "https://api.github.com/repos/mistralai/mistral-common/pulls/82",
        "author_association": "CONTRIBUTOR",
        "_links": {
          "self": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2104693615"
          },
          "html": {
            "href": "https://github.com/mistralai/mistral-common/pull/82#discussion_r2104693615"
          },
          "pull_request": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/82"
          }
        },
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2104693615/reactions",
          "total_count": 0,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "start_line": null,
        "original_start_line": null,
        "start_side": null,
        "line": null,
        "original_line": 391,
        "side": "RIGHT",
        "original_position": 59,
        "position": null,
        "subject_type": "line"
      },
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2104698814",
        "pull_request_review_id": 2864598193,
        "id": 2104698814,
        "node_id": "PRRC_kwDOLuT1gc59cye-",
        "diff_hunk": "@@ -342,3 +347,49 @@ def test_from_model() -> None:\n         tokenizer = MistralTokenizer.from_model(\"pixtral\", strict=False)\n         assert tokenizer.instruct_tokenizer.tokenizer.version == TokenizerVersion.v3\n         assert tokenizer.instruct_tokenizer.mm_encoder is not None\n+\n+\n+def test_assistant_tool_call_and_content(tekkenizer: InstructTokenizerV7) -> None:\n+    request: InstructRequest = InstructRequest(\n+        available_tools=[\n+            Tool(function=Function(name=\"t1\", parameters={})),\n+            Tool(function=Function(name=\"t2\", parameters={})),\n+        ],\n+        messages=[\n+            UserMessage(content=\"a\"),\n+            AssistantMessage(\n+                content=\"b1b2\",\n+                tool_calls=[\n+                    ToolCall(id=\"000000000\", function=FunctionCall(name=\"t1\", arguments=\"{}\")),\n+                    ToolCall(id=\"111111111\", function=FunctionCall(name=\"t2\", arguments=\"{}\")),\n+                ],\n+            ),\n+        ],\n+    )\n+    tokenized = tekkenizer.encode_instruct(request)\n+    tokens = tokenized.tokens\n+    text = tokenized.text\n+\n+    assert text == (\n+        '<s>[AVAILABLE_TOOLS][{\"type\": \"function\", \"function\": '\n+        '{\"name\": \"t1\", \"description\": \"\", \"parameters\": {}}}, '\n+        '{\"type\": \"function\", \"function\": {\"name\": \"t2\", \"description\"'\n+        ': \"\", \"parameters\": {}}}][/AVAILABLE_TOOLS][INST]a[/INST]b1b2[TOOL_CALLS]'\n+        '[{\"name\": \"t1\", \"arguments\": {}, \"id\": \"000000000\"}, {\"name\": \"t2\", \"arguments\": {}'\n+        ', \"id\": \"111111111\"}]</s>'\n+    )\n+\n+    # make sure it also works end to end\n+    tools = request.available_tools\n+    chat_completion_request = ChatCompletionRequest(\n+        **request.model_dump(exclude={\"system_prompt\", \"truncate_at_max_tokens\", \"available_tools\"}), tools=tools\n+    )\n+    validator = MistralRequestValidatorV5(mode=ValidationMode.finetuning)\n+    normalizer = InstructRequestNormalizerV7.normalizer()\n+\n+    mistral_tokenizer = MistralTokenizer(tekkenizer, validator, normalizer)\n+    mistral_tokenizer._chat_completion_request_validator",
        "path": "tests/test_tokenizer_v7.py",
        "commit_id": "280cf9f7f2ef7cc06728563af70436560faaa402",
        "original_commit_id": "81cb980f3d2ea44ce4c672761402d60f1f12a0a1",
        "user": {
          "login": "juliendenize",
          "id": 40604584,
          "node_id": "MDQ6VXNlcjQwNjA0NTg0",
          "avatar_url": "https://avatars.githubusercontent.com/u/40604584?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/juliendenize",
          "html_url": "https://github.com/juliendenize",
          "followers_url": "https://api.github.com/users/juliendenize/followers",
          "following_url": "https://api.github.com/users/juliendenize/following{/other_user}",
          "gists_url": "https://api.github.com/users/juliendenize/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/juliendenize/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/juliendenize/subscriptions",
          "organizations_url": "https://api.github.com/users/juliendenize/orgs",
          "repos_url": "https://api.github.com/users/juliendenize/repos",
          "events_url": "https://api.github.com/users/juliendenize/events{/privacy}",
          "received_events_url": "https://api.github.com/users/juliendenize/received_events",
          "type": "User",
          "user_view_type": "public",
          "site_admin": false
        },
        "body": "by here I mean the L391",
        "created_at": "2025-05-23T14:18:26Z",
        "updated_at": "2025-05-23T14:18:26Z",
        "html_url": "https://github.com/mistralai/mistral-common/pull/82#discussion_r2104698814",
        "pull_request_url": "https://api.github.com/repos/mistralai/mistral-common/pulls/82",
        "author_association": "CONTRIBUTOR",
        "_links": {
          "self": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2104698814"
          },
          "html": {
            "href": "https://github.com/mistralai/mistral-common/pull/82#discussion_r2104698814"
          },
          "pull_request": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/82"
          }
        },
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2104698814/reactions",
          "total_count": 0,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "start_line": null,
        "original_start_line": null,
        "start_side": null,
        "line": null,
        "original_line": 391,
        "side": "RIGHT",
        "in_reply_to_id": 2104693615,
        "original_position": 59,
        "position": null,
        "subject_type": "line"
      },
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2104705349",
        "pull_request_review_id": 2864608323,
        "id": 2104705349,
        "node_id": "PRRC_kwDOLuT1gc59c0FF",
        "diff_hunk": "@@ -36,6 +36,7 @@ class InstructRequestNormalizer(\n     \"\"\"\n \n     system_prompt_in_begin: bool = False\n+    allow_tool_call_and_content: bool = False",
        "path": "src/mistral_common/protocol/instruct/normalize.py",
        "commit_id": "280cf9f7f2ef7cc06728563af70436560faaa402",
        "original_commit_id": "81cb980f3d2ea44ce4c672761402d60f1f12a0a1",
        "user": {
          "login": "patrickvonplaten",
          "id": 23423619,
          "node_id": "MDQ6VXNlcjIzNDIzNjE5",
          "avatar_url": "https://avatars.githubusercontent.com/u/23423619?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/patrickvonplaten",
          "html_url": "https://github.com/patrickvonplaten",
          "followers_url": "https://api.github.com/users/patrickvonplaten/followers",
          "following_url": "https://api.github.com/users/patrickvonplaten/following{/other_user}",
          "gists_url": "https://api.github.com/users/patrickvonplaten/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/patrickvonplaten/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/patrickvonplaten/subscriptions",
          "organizations_url": "https://api.github.com/users/patrickvonplaten/orgs",
          "repos_url": "https://api.github.com/users/patrickvonplaten/repos",
          "events_url": "https://api.github.com/users/patrickvonplaten/events{/privacy}",
          "received_events_url": "https://api.github.com/users/patrickvonplaten/received_events",
          "type": "User",
          "user_view_type": "public",
          "site_admin": false
        },
        "body": "Yeah fair",
        "created_at": "2025-05-23T14:21:30Z",
        "updated_at": "2025-05-23T14:21:30Z",
        "html_url": "https://github.com/mistralai/mistral-common/pull/82#discussion_r2104705349",
        "pull_request_url": "https://api.github.com/repos/mistralai/mistral-common/pulls/82",
        "author_association": "CONTRIBUTOR",
        "_links": {
          "self": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2104705349"
          },
          "html": {
            "href": "https://github.com/mistralai/mistral-common/pull/82#discussion_r2104705349"
          },
          "pull_request": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/82"
          }
        },
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2104705349/reactions",
          "total_count": 0,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "start_line": null,
        "original_start_line": 38,
        "start_side": "RIGHT",
        "line": null,
        "original_line": 39,
        "side": "RIGHT",
        "in_reply_to_id": 2104693353,
        "original_position": 4,
        "position": null,
        "subject_type": "line"
      },
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2104709873",
        "pull_request_review_id": 2864616206,
        "id": 2104709873,
        "node_id": "PRRC_kwDOLuT1gc59c1Lx",
        "diff_hunk": "@@ -342,3 +347,49 @@ def test_from_model() -> None:\n         tokenizer = MistralTokenizer.from_model(\"pixtral\", strict=False)\n         assert tokenizer.instruct_tokenizer.tokenizer.version == TokenizerVersion.v3\n         assert tokenizer.instruct_tokenizer.mm_encoder is not None\n+\n+\n+def test_assistant_tool_call_and_content(tekkenizer: InstructTokenizerV7) -> None:\n+    request: InstructRequest = InstructRequest(\n+        available_tools=[\n+            Tool(function=Function(name=\"t1\", parameters={})),\n+            Tool(function=Function(name=\"t2\", parameters={})),\n+        ],\n+        messages=[\n+            UserMessage(content=\"a\"),\n+            AssistantMessage(\n+                content=\"b1b2\",\n+                tool_calls=[\n+                    ToolCall(id=\"000000000\", function=FunctionCall(name=\"t1\", arguments=\"{}\")),\n+                    ToolCall(id=\"111111111\", function=FunctionCall(name=\"t2\", arguments=\"{}\")),\n+                ],\n+            ),\n+        ],\n+    )\n+    tokenized = tekkenizer.encode_instruct(request)\n+    tokens = tokenized.tokens\n+    text = tokenized.text\n+\n+    assert text == (\n+        '<s>[AVAILABLE_TOOLS][{\"type\": \"function\", \"function\": '\n+        '{\"name\": \"t1\", \"description\": \"\", \"parameters\": {}}}, '\n+        '{\"type\": \"function\", \"function\": {\"name\": \"t2\", \"description\"'\n+        ': \"\", \"parameters\": {}}}][/AVAILABLE_TOOLS][INST]a[/INST]b1b2[TOOL_CALLS]'\n+        '[{\"name\": \"t1\", \"arguments\": {}, \"id\": \"000000000\"}, {\"name\": \"t2\", \"arguments\": {}'\n+        ', \"id\": \"111111111\"}]</s>'\n+    )\n+\n+    # make sure it also works end to end\n+    tools = request.available_tools\n+    chat_completion_request = ChatCompletionRequest(\n+        **request.model_dump(exclude={\"system_prompt\", \"truncate_at_max_tokens\", \"available_tools\"}), tools=tools\n+    )\n+    validator = MistralRequestValidatorV5(mode=ValidationMode.finetuning)\n+    normalizer = InstructRequestNormalizerV7.normalizer()\n+\n+    mistral_tokenizer = MistralTokenizer(tekkenizer, validator, normalizer)\n+    mistral_tokenizer._chat_completion_request_validator",
        "path": "tests/test_tokenizer_v7.py",
        "commit_id": "280cf9f7f2ef7cc06728563af70436560faaa402",
        "original_commit_id": "81cb980f3d2ea44ce4c672761402d60f1f12a0a1",
        "user": {
          "login": "patrickvonplaten",
          "id": 23423619,
          "node_id": "MDQ6VXNlcjIzNDIzNjE5",
          "avatar_url": "https://avatars.githubusercontent.com/u/23423619?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/patrickvonplaten",
          "html_url": "https://github.com/patrickvonplaten",
          "followers_url": "https://api.github.com/users/patrickvonplaten/followers",
          "following_url": "https://api.github.com/users/patrickvonplaten/following{/other_user}",
          "gists_url": "https://api.github.com/users/patrickvonplaten/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/patrickvonplaten/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/patrickvonplaten/subscriptions",
          "organizations_url": "https://api.github.com/users/patrickvonplaten/orgs",
          "repos_url": "https://api.github.com/users/patrickvonplaten/repos",
          "events_url": "https://api.github.com/users/patrickvonplaten/events{/privacy}",
          "received_events_url": "https://api.github.com/users/patrickvonplaten/received_events",
          "type": "User",
          "user_view_type": "public",
          "site_admin": false
        },
        "body": "Thanks! ",
        "created_at": "2025-05-23T14:23:41Z",
        "updated_at": "2025-05-23T14:23:41Z",
        "html_url": "https://github.com/mistralai/mistral-common/pull/82#discussion_r2104709873",
        "pull_request_url": "https://api.github.com/repos/mistralai/mistral-common/pulls/82",
        "author_association": "CONTRIBUTOR",
        "_links": {
          "self": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2104709873"
          },
          "html": {
            "href": "https://github.com/mistralai/mistral-common/pull/82#discussion_r2104709873"
          },
          "pull_request": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/82"
          }
        },
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2104709873/reactions",
          "total_count": 0,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "start_line": null,
        "original_start_line": null,
        "start_side": null,
        "line": null,
        "original_line": 391,
        "side": "RIGHT",
        "in_reply_to_id": 2104693615,
        "original_position": 59,
        "position": null,
        "subject_type": "line"
      }
    ]
  },
  "79": {
    "issue_comments": [
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/issues/comments/2858130591",
        "html_url": "https://github.com/mistralai/mistral-common/pull/79#issuecomment-2858130591",
        "issue_url": "https://api.github.com/repos/mistralai/mistral-common/issues/79",
        "id": 2858130591,
        "node_id": "IC_kwDOLuT1gc6qW5yf",
        "user": {
          "login": "juliendenize",
          "id": 40604584,
          "node_id": "MDQ6VXNlcjQwNjA0NTg0",
          "avatar_url": "https://avatars.githubusercontent.com/u/40604584?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/juliendenize",
          "html_url": "https://github.com/juliendenize",
          "followers_url": "https://api.github.com/users/juliendenize/followers",
          "following_url": "https://api.github.com/users/juliendenize/following{/other_user}",
          "gists_url": "https://api.github.com/users/juliendenize/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/juliendenize/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/juliendenize/subscriptions",
          "organizations_url": "https://api.github.com/users/juliendenize/orgs",
          "repos_url": "https://api.github.com/users/juliendenize/repos",
          "events_url": "https://api.github.com/users/juliendenize/events{/privacy}",
          "received_events_url": "https://api.github.com/users/juliendenize/received_events",
          "type": "User",
          "user_view_type": "public",
          "site_admin": false
        },
        "created_at": "2025-05-07T11:02:44Z",
        "updated_at": "2025-05-07T11:02:44Z",
        "author_association": "CONTRIBUTOR",
        "body": "The CI is green !",
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/issues/comments/2858130591/reactions",
          "total_count": 0,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "performed_via_github_app": null
      }
    ],
    "review_comments": [
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2077352028",
        "pull_request_review_id": 2821293802,
        "id": 2077352028,
        "node_id": "PRRC_kwDOLuT1gc570eBc",
        "diff_hunk": "@@ -1,6 +1,6 @@\n [tool.poetry]\n name = \"mistral_common\"\n-version = \"1.5.4\"\n+version = \"1.5.5\"",
        "path": "pyproject.toml",
        "commit_id": "d9fd4ce7c5b7cb1a84b8b3802d233d25e6055960",
        "original_commit_id": "ae66afcf0307a6b4b27235bb2a3eb65b51983749",
        "user": {
          "login": "patrickvonplaten",
          "id": 23423619,
          "node_id": "MDQ6VXNlcjIzNDIzNjE5",
          "avatar_url": "https://avatars.githubusercontent.com/u/23423619?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/patrickvonplaten",
          "html_url": "https://github.com/patrickvonplaten",
          "followers_url": "https://api.github.com/users/patrickvonplaten/followers",
          "following_url": "https://api.github.com/users/patrickvonplaten/following{/other_user}",
          "gists_url": "https://api.github.com/users/patrickvonplaten/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/patrickvonplaten/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/patrickvonplaten/subscriptions",
          "organizations_url": "https://api.github.com/users/patrickvonplaten/orgs",
          "repos_url": "https://api.github.com/users/patrickvonplaten/repos",
          "events_url": "https://api.github.com/users/patrickvonplaten/events{/privacy}",
          "received_events_url": "https://api.github.com/users/patrickvonplaten/received_events",
          "type": "User",
          "user_view_type": "public",
          "site_admin": false
        },
        "body": "Actually let's not update the version here yet :-) ",
        "created_at": "2025-05-07T10:48:34Z",
        "updated_at": "2025-05-07T10:48:35Z",
        "html_url": "https://github.com/mistralai/mistral-common/pull/79#discussion_r2077352028",
        "pull_request_url": "https://api.github.com/repos/mistralai/mistral-common/pulls/79",
        "author_association": "CONTRIBUTOR",
        "_links": {
          "self": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2077352028"
          },
          "html": {
            "href": "https://github.com/mistralai/mistral-common/pull/79#discussion_r2077352028"
          },
          "pull_request": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/79"
          }
        },
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2077352028/reactions",
          "total_count": 0,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "start_line": null,
        "original_start_line": null,
        "start_side": null,
        "line": null,
        "original_line": 3,
        "side": "RIGHT",
        "original_position": 4,
        "position": null,
        "subject_type": "line"
      },
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2077354748",
        "pull_request_review_id": 2821298272,
        "id": 2077354748,
        "node_id": "PRRC_kwDOLuT1gc570er8",
        "diff_hunk": "@@ -1,6 +1,6 @@\n [tool.poetry]\n name = \"mistral_common\"\n-version = \"1.5.4\"\n+version = \"1.5.5\"",
        "path": "pyproject.toml",
        "commit_id": "d9fd4ce7c5b7cb1a84b8b3802d233d25e6055960",
        "original_commit_id": "ae66afcf0307a6b4b27235bb2a3eb65b51983749",
        "user": {
          "login": "patrickvonplaten",
          "id": 23423619,
          "node_id": "MDQ6VXNlcjIzNDIzNjE5",
          "avatar_url": "https://avatars.githubusercontent.com/u/23423619?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/patrickvonplaten",
          "html_url": "https://github.com/patrickvonplaten",
          "followers_url": "https://api.github.com/users/patrickvonplaten/followers",
          "following_url": "https://api.github.com/users/patrickvonplaten/following{/other_user}",
          "gists_url": "https://api.github.com/users/patrickvonplaten/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/patrickvonplaten/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/patrickvonplaten/subscriptions",
          "organizations_url": "https://api.github.com/users/patrickvonplaten/orgs",
          "repos_url": "https://api.github.com/users/patrickvonplaten/repos",
          "events_url": "https://api.github.com/users/patrickvonplaten/events{/privacy}",
          "received_events_url": "https://api.github.com/users/patrickvonplaten/received_events",
          "type": "User",
          "user_view_type": "public",
          "site_admin": false
        },
        "body": "```suggestion\r\nversion = \"1.5.4\"\r\n```",
        "created_at": "2025-05-07T10:50:26Z",
        "updated_at": "2025-05-07T10:50:27Z",
        "html_url": "https://github.com/mistralai/mistral-common/pull/79#discussion_r2077354748",
        "pull_request_url": "https://api.github.com/repos/mistralai/mistral-common/pulls/79",
        "author_association": "CONTRIBUTOR",
        "_links": {
          "self": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2077354748"
          },
          "html": {
            "href": "https://github.com/mistralai/mistral-common/pull/79#discussion_r2077354748"
          },
          "pull_request": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/79"
          }
        },
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/2077354748/reactions",
          "total_count": 0,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "start_line": null,
        "original_start_line": null,
        "start_side": null,
        "line": null,
        "original_line": 3,
        "side": "RIGHT",
        "original_position": 4,
        "position": null,
        "subject_type": "line"
      }
    ]
  },
  "78": {
    "issue_comments": [
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/issues/comments/2800064568",
        "html_url": "https://github.com/mistralai/mistral-common/pull/78#issuecomment-2800064568",
        "issue_url": "https://api.github.com/repos/mistralai/mistral-common/issues/78",
        "id": 2800064568,
        "node_id": "IC_kwDOLuT1gc6m5Zg4",
        "user": {
          "login": "ItzAmirreza",
          "id": 20891968,
          "node_id": "MDQ6VXNlcjIwODkxOTY4",
          "avatar_url": "https://avatars.githubusercontent.com/u/20891968?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/ItzAmirreza",
          "html_url": "https://github.com/ItzAmirreza",
          "followers_url": "https://api.github.com/users/ItzAmirreza/followers",
          "following_url": "https://api.github.com/users/ItzAmirreza/following{/other_user}",
          "gists_url": "https://api.github.com/users/ItzAmirreza/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/ItzAmirreza/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/ItzAmirreza/subscriptions",
          "organizations_url": "https://api.github.com/users/ItzAmirreza/orgs",
          "repos_url": "https://api.github.com/users/ItzAmirreza/repos",
          "events_url": "https://api.github.com/users/ItzAmirreza/events{/privacy}",
          "received_events_url": "https://api.github.com/users/ItzAmirreza/received_events",
          "type": "User",
          "user_view_type": "public",
          "site_admin": false
        },
        "created_at": "2025-04-13T18:25:08Z",
        "updated_at": "2025-04-13T18:25:08Z",
        "author_association": "NONE",
        "body": "Thanks for the fix, looking forward to the merge.",
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/issues/comments/2800064568/reactions",
          "total_count": 0,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "performed_via_github_app": null
      }
    ],
    "review_comments": []
  },
  "77": {
    "issue_comments": [],
    "review_comments": [
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/1997700867",
        "pull_request_review_id": 2688787928,
        "id": 1997700867,
        "node_id": "PRRC_kwDOLuT1gc53En8D",
        "diff_hunk": "@@ -49,7 +52,11 @@ def test_download_gated_image(mm_config: MultimodalConfig, special_token_ids: Sp\n         assert image is not None, \"Make sure gated wikipedia images can be downloaded\"\n \n \n-def test_image_encoder(mm_config: MultimodalConfig, special_token_ids: SpecialImageIDs) -> None:\n+@pytest.mark.parametrize(\"spatial_merge_size\", [1, 2])\n+def test_image_encoder(spatial_merge_size: int, special_token_ids: SpecialImageIDs) -> None:\n+    mm_config = MultimodalConfig(\n+        image_patch_size=16 // spatial_merge_size, max_image_size=128, spatial_merge_size=spatial_merge_size",
        "path": "tests/test_multimodal.py",
        "commit_id": "b6bdfb92980cb218f92895eb132ce45f62ba35c6",
        "original_commit_id": "b6bdfb92980cb218f92895eb132ce45f62ba35c6",
        "user": {
          "login": "timlacroix",
          "id": 4998695,
          "node_id": "MDQ6VXNlcjQ5OTg2OTU=",
          "avatar_url": "https://avatars.githubusercontent.com/u/4998695?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/timlacroix",
          "html_url": "https://github.com/timlacroix",
          "followers_url": "https://api.github.com/users/timlacroix/followers",
          "following_url": "https://api.github.com/users/timlacroix/following{/other_user}",
          "gists_url": "https://api.github.com/users/timlacroix/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/timlacroix/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/timlacroix/subscriptions",
          "organizations_url": "https://api.github.com/users/timlacroix/orgs",
          "repos_url": "https://api.github.com/users/timlacroix/repos",
          "events_url": "https://api.github.com/users/timlacroix/events{/privacy}",
          "received_events_url": "https://api.github.com/users/timlacroix/received_events",
          "type": "User",
          "user_view_type": "public",
          "site_admin": false
        },
        "body": "why are we dividing here ? I'm surprised.\r\nIf we want to keep all numbers of tokens the same shouldn't we multiply ? \r\n\r\nI assume this is correct though otherwise we'd have shit results...",
        "created_at": "2025-03-16T20:27:44Z",
        "updated_at": "2025-03-16T20:27:44Z",
        "html_url": "https://github.com/mistralai/mistral-common/pull/77#discussion_r1997700867",
        "pull_request_url": "https://api.github.com/repos/mistralai/mistral-common/pulls/77",
        "author_association": "CONTRIBUTOR",
        "_links": {
          "self": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/1997700867"
          },
          "html": {
            "href": "https://github.com/mistralai/mistral-common/pull/77#discussion_r1997700867"
          },
          "pull_request": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/77"
          }
        },
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/1997700867/reactions",
          "total_count": 0,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "start_line": null,
        "original_start_line": null,
        "start_side": null,
        "line": 58,
        "original_line": 58,
        "side": "RIGHT",
        "original_position": 44,
        "position": 44,
        "subject_type": "line"
      },
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/1997701654",
        "pull_request_review_id": 2688788806,
        "id": 1997701654,
        "node_id": "PRRC_kwDOLuT1gc53EoIW",
        "diff_hunk": "@@ -49,7 +52,11 @@ def test_download_gated_image(mm_config: MultimodalConfig, special_token_ids: Sp\n         assert image is not None, \"Make sure gated wikipedia images can be downloaded\"\n \n \n-def test_image_encoder(mm_config: MultimodalConfig, special_token_ids: SpecialImageIDs) -> None:\n+@pytest.mark.parametrize(\"spatial_merge_size\", [1, 2])\n+def test_image_encoder(spatial_merge_size: int, special_token_ids: SpecialImageIDs) -> None:\n+    mm_config = MultimodalConfig(\n+        image_patch_size=16 // spatial_merge_size, max_image_size=128, spatial_merge_size=spatial_merge_size",
        "path": "tests/test_multimodal.py",
        "commit_id": "b6bdfb92980cb218f92895eb132ce45f62ba35c6",
        "original_commit_id": "b6bdfb92980cb218f92895eb132ce45f62ba35c6",
        "user": {
          "login": "patrickvonplaten",
          "id": 23423619,
          "node_id": "MDQ6VXNlcjIzNDIzNjE5",
          "avatar_url": "https://avatars.githubusercontent.com/u/23423619?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/patrickvonplaten",
          "html_url": "https://github.com/patrickvonplaten",
          "followers_url": "https://api.github.com/users/patrickvonplaten/followers",
          "following_url": "https://api.github.com/users/patrickvonplaten/following{/other_user}",
          "gists_url": "https://api.github.com/users/patrickvonplaten/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/patrickvonplaten/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/patrickvonplaten/subscriptions",
          "organizations_url": "https://api.github.com/users/patrickvonplaten/orgs",
          "repos_url": "https://api.github.com/users/patrickvonplaten/repos",
          "events_url": "https://api.github.com/users/patrickvonplaten/events{/privacy}",
          "received_events_url": "https://api.github.com/users/patrickvonplaten/received_events",
          "type": "User",
          "user_view_type": "public",
          "site_admin": false
        },
        "body": "Hmm maybe the test is misleading - when constructing a `mm_config` we should not pass `image_patch_size // spatial_merge_size`, but just `image_patch_size`.\r\n\r\nHowever, we know that the two following configs are identical from the point of view of the tokenizer:\r\n`image_patch_size=16, spatial_merge_size=1`\r\nand:\r\n`image_patch_size=8, spatial_merge_size=2`\r\n\r\n=> Think equality tests are always quite powerful that's why it's done here",
        "created_at": "2025-03-16T20:32:47Z",
        "updated_at": "2025-03-16T20:32:48Z",
        "html_url": "https://github.com/mistralai/mistral-common/pull/77#discussion_r1997701654",
        "pull_request_url": "https://api.github.com/repos/mistralai/mistral-common/pulls/77",
        "author_association": "CONTRIBUTOR",
        "_links": {
          "self": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/1997701654"
          },
          "html": {
            "href": "https://github.com/mistralai/mistral-common/pull/77#discussion_r1997701654"
          },
          "pull_request": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/77"
          }
        },
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/1997701654/reactions",
          "total_count": 0,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "start_line": null,
        "original_start_line": null,
        "start_side": null,
        "line": 58,
        "original_line": 58,
        "side": "RIGHT",
        "in_reply_to_id": 1997700867,
        "original_position": 44,
        "position": 44,
        "subject_type": "line"
      },
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/1997701854",
        "pull_request_review_id": 2688789010,
        "id": 1997701854,
        "node_id": "PRRC_kwDOLuT1gc53EoLe",
        "diff_hunk": "@@ -49,7 +52,11 @@ def test_download_gated_image(mm_config: MultimodalConfig, special_token_ids: Sp\n         assert image is not None, \"Make sure gated wikipedia images can be downloaded\"\n \n \n-def test_image_encoder(mm_config: MultimodalConfig, special_token_ids: SpecialImageIDs) -> None:\n+@pytest.mark.parametrize(\"spatial_merge_size\", [1, 2])\n+def test_image_encoder(spatial_merge_size: int, special_token_ids: SpecialImageIDs) -> None:\n+    mm_config = MultimodalConfig(\n+        image_patch_size=16 // spatial_merge_size, max_image_size=128, spatial_merge_size=spatial_merge_size",
        "path": "tests/test_multimodal.py",
        "commit_id": "b6bdfb92980cb218f92895eb132ce45f62ba35c6",
        "original_commit_id": "b6bdfb92980cb218f92895eb132ce45f62ba35c6",
        "user": {
          "login": "patrickvonplaten",
          "id": 23423619,
          "node_id": "MDQ6VXNlcjIzNDIzNjE5",
          "avatar_url": "https://avatars.githubusercontent.com/u/23423619?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/patrickvonplaten",
          "html_url": "https://github.com/patrickvonplaten",
          "followers_url": "https://api.github.com/users/patrickvonplaten/followers",
          "following_url": "https://api.github.com/users/patrickvonplaten/following{/other_user}",
          "gists_url": "https://api.github.com/users/patrickvonplaten/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/patrickvonplaten/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/patrickvonplaten/subscriptions",
          "organizations_url": "https://api.github.com/users/patrickvonplaten/orgs",
          "repos_url": "https://api.github.com/users/patrickvonplaten/repos",
          "events_url": "https://api.github.com/users/patrickvonplaten/events{/privacy}",
          "received_events_url": "https://api.github.com/users/patrickvonplaten/received_events",
          "type": "User",
          "user_view_type": "public",
          "site_admin": false
        },
        "body": "So TLDR is that it's just for testing",
        "created_at": "2025-03-16T20:33:55Z",
        "updated_at": "2025-03-16T20:33:55Z",
        "html_url": "https://github.com/mistralai/mistral-common/pull/77#discussion_r1997701854",
        "pull_request_url": "https://api.github.com/repos/mistralai/mistral-common/pulls/77",
        "author_association": "CONTRIBUTOR",
        "_links": {
          "self": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/1997701854"
          },
          "html": {
            "href": "https://github.com/mistralai/mistral-common/pull/77#discussion_r1997701854"
          },
          "pull_request": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/77"
          }
        },
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/1997701854/reactions",
          "total_count": 0,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "start_line": null,
        "original_start_line": null,
        "start_side": null,
        "line": 58,
        "original_line": 58,
        "side": "RIGHT",
        "in_reply_to_id": 1997700867,
        "original_position": 44,
        "position": 44,
        "subject_type": "line"
      }
    ]
  },
  "76": {
    "issue_comments": [
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/issues/comments/2633494179",
        "html_url": "https://github.com/mistralai/mistral-common/pull/76#issuecomment-2633494179",
        "issue_url": "https://api.github.com/repos/mistralai/mistral-common/issues/76",
        "id": 2633494179,
        "node_id": "IC_kwDOLuT1gc6c9-6j",
        "user": {
          "login": "jean-malo",
          "id": 56539593,
          "node_id": "MDQ6VXNlcjU2NTM5NTkz",
          "avatar_url": "https://avatars.githubusercontent.com/u/56539593?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/jean-malo",
          "html_url": "https://github.com/jean-malo",
          "followers_url": "https://api.github.com/users/jean-malo/followers",
          "following_url": "https://api.github.com/users/jean-malo/following{/other_user}",
          "gists_url": "https://api.github.com/users/jean-malo/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/jean-malo/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/jean-malo/subscriptions",
          "organizations_url": "https://api.github.com/users/jean-malo/orgs",
          "repos_url": "https://api.github.com/users/jean-malo/repos",
          "events_url": "https://api.github.com/users/jean-malo/events{/privacy}",
          "received_events_url": "https://api.github.com/users/jean-malo/received_events",
          "type": "User",
          "user_view_type": "public",
          "site_admin": false
        },
        "created_at": "2025-02-04T10:30:40Z",
        "updated_at": "2025-02-04T10:30:40Z",
        "author_association": "CONTRIBUTOR",
        "body": "Resumes https://github.com/mistralai/mistral-common/pull/72 which had a bad merge commit",
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/issues/comments/2633494179/reactions",
          "total_count": 0,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "performed_via_github_app": null
      }
    ],
    "review_comments": []
  },
  "72": {
    "issue_comments": [],
    "review_comments": [
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/1914460731",
        "pull_request_review_id": 2549132102,
        "id": 1914460731,
        "node_id": "PRRC_kwDOLuT1gc5yHFo7",
        "diff_hunk": "@@ -29,37 +29,37 @@ ignore_missing_imports = true\n \n [tool.poetry.dependencies]\n python = \"^3.8.10\"\n-pydantic = \"^2.7,<3.0\"\n-jsonschema = \"^4.21.1\"\n-sentencepiece = \"0.2.0\"\n-typing-extensions = \"^4.11.0\"\n-tiktoken = \"^0.7.0\"\n-pillow = \"^10.3.0\"\n-requests = \"^2.0.0\"\n+pydantic = \">=2.7,<3.0\"",
        "path": "pyproject.toml",
        "commit_id": "a006df3543390b33ba4e1ffdf7b85fc80f0ff144",
        "original_commit_id": "4eab7131cbbb904dc202b203e095ff37f8ffdc16",
        "user": {
          "login": "patrickvonplaten",
          "id": 23423619,
          "node_id": "MDQ6VXNlcjIzNDIzNjE5",
          "avatar_url": "https://avatars.githubusercontent.com/u/23423619?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/patrickvonplaten",
          "html_url": "https://github.com/patrickvonplaten",
          "followers_url": "https://api.github.com/users/patrickvonplaten/followers",
          "following_url": "https://api.github.com/users/patrickvonplaten/following{/other_user}",
          "gists_url": "https://api.github.com/users/patrickvonplaten/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/patrickvonplaten/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/patrickvonplaten/subscriptions",
          "organizations_url": "https://api.github.com/users/patrickvonplaten/orgs",
          "repos_url": "https://api.github.com/users/patrickvonplaten/repos",
          "events_url": "https://api.github.com/users/patrickvonplaten/events{/privacy}",
          "received_events_url": "https://api.github.com/users/patrickvonplaten/received_events",
          "type": "User",
          "user_view_type": "public",
          "site_admin": false
        },
        "body": "```suggestion\r\npydantic = \"^2.7\"\r\n```\r\n\r\nThink for Pydantic we should leave between 2 and 3 no? ",
        "created_at": "2025-01-14T08:57:03Z",
        "updated_at": "2025-01-14T08:57:03Z",
        "html_url": "https://github.com/mistralai/mistral-common/pull/72#discussion_r1914460731",
        "pull_request_url": "https://api.github.com/repos/mistralai/mistral-common/pulls/72",
        "author_association": "CONTRIBUTOR",
        "_links": {
          "self": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/1914460731"
          },
          "html": {
            "href": "https://github.com/mistralai/mistral-common/pull/72#discussion_r1914460731"
          },
          "pull_request": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/72"
          }
        },
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/1914460731/reactions",
          "total_count": 0,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "start_line": null,
        "original_start_line": null,
        "start_side": null,
        "line": null,
        "original_line": 32,
        "side": "RIGHT",
        "original_position": 19,
        "position": null,
        "subject_type": "line"
      },
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/1914500464",
        "pull_request_review_id": 2549195443,
        "id": 1914500464,
        "node_id": "PRRC_kwDOLuT1gc5yHPVw",
        "diff_hunk": "@@ -29,37 +29,37 @@ ignore_missing_imports = true\n \n [tool.poetry.dependencies]\n python = \"^3.8.10\"\n-pydantic = \"^2.7,<3.0\"\n-jsonschema = \"^4.21.1\"\n-sentencepiece = \"0.2.0\"\n-typing-extensions = \"^4.11.0\"\n-tiktoken = \"^0.7.0\"\n-pillow = \"^10.3.0\"\n-requests = \"^2.0.0\"\n+pydantic = \">=2.7,<3.0\"\n+jsonschema = \">=4.21.1\"\n+sentencepiece = \">=0.2.0\"\n+typing-extensions = \">=4.11.0\"\n+tiktoken = \">=0.7.0\"\n+pillow = \">=10.3.0\"\n+requests = \">=2.0.0\"",
        "path": "pyproject.toml",
        "commit_id": "a006df3543390b33ba4e1ffdf7b85fc80f0ff144",
        "original_commit_id": "4eab7131cbbb904dc202b203e095ff37f8ffdc16",
        "user": {
          "login": "patrickvonplaten",
          "id": 23423619,
          "node_id": "MDQ6VXNlcjIzNDIzNjE5",
          "avatar_url": "https://avatars.githubusercontent.com/u/23423619?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/patrickvonplaten",
          "html_url": "https://github.com/patrickvonplaten",
          "followers_url": "https://api.github.com/users/patrickvonplaten/followers",
          "following_url": "https://api.github.com/users/patrickvonplaten/following{/other_user}",
          "gists_url": "https://api.github.com/users/patrickvonplaten/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/patrickvonplaten/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/patrickvonplaten/subscriptions",
          "organizations_url": "https://api.github.com/users/patrickvonplaten/orgs",
          "repos_url": "https://api.github.com/users/patrickvonplaten/repos",
          "events_url": "https://api.github.com/users/patrickvonplaten/events{/privacy}",
          "received_events_url": "https://api.github.com/users/patrickvonplaten/received_events",
          "type": "User",
          "user_view_type": "public",
          "site_admin": false
        },
        "body": "```suggestion\r\nrequests = \"^2.0.0\"\r\n```",
        "created_at": "2025-01-14T09:25:47Z",
        "updated_at": "2025-01-14T09:25:48Z",
        "html_url": "https://github.com/mistralai/mistral-common/pull/72#discussion_r1914500464",
        "pull_request_url": "https://api.github.com/repos/mistralai/mistral-common/pulls/72",
        "author_association": "CONTRIBUTOR",
        "_links": {
          "self": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/1914500464"
          },
          "html": {
            "href": "https://github.com/mistralai/mistral-common/pull/72#discussion_r1914500464"
          },
          "pull_request": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/72"
          }
        },
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/1914500464/reactions",
          "total_count": 0,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "start_line": null,
        "original_start_line": null,
        "start_side": null,
        "line": null,
        "original_line": 38,
        "side": "RIGHT",
        "original_position": 25,
        "position": null,
        "subject_type": "line"
      },
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/1914501745",
        "pull_request_review_id": 2549197344,
        "id": 1914501745,
        "node_id": "PRRC_kwDOLuT1gc5yHPpx",
        "diff_hunk": "@@ -29,37 +29,37 @@ ignore_missing_imports = true\n \n [tool.poetry.dependencies]\n python = \"^3.8.10\"\n-pydantic = \"^2.7,<3.0\"\n-jsonschema = \"^4.21.1\"\n-sentencepiece = \"0.2.0\"\n-typing-extensions = \"^4.11.0\"\n-tiktoken = \"^0.7.0\"\n-pillow = \"^10.3.0\"\n-requests = \"^2.0.0\"\n+pydantic = \">=2.7,<3.0\"\n+jsonschema = \">=4.21.1\"\n+sentencepiece = \">=0.2.0\"\n+typing-extensions = \">=4.11.0\"\n+tiktoken = \">=0.7.0\"\n+pillow = \">=10.3.0\"\n+requests = \">=2.0.0\"\n \n numpy = [\n   { version = \">=1.22,<1.25\", python = \"<3.9\" },\n   { version = \">=1.25\", python = \">=3.9\" },\n ]\n \n-opencv-python-headless = { version = \"^4.0.0\", optional = true }\n+opencv-python-headless = { version = \">=4.0.0\", optional = true }\n \n [tool.poetry.extras]\n opencv = [\"opencv-python-headless\"]\n \n [tool.poetry.group.dev.dependencies]\n-types-jsonschema = \"4.21.0.20240118\"\n-types-protobuf = \"4.24.0.20240129\"\n-mypy-protobuf = \"^3.5.0\"\n-pytest = \"7.4.4\"\n+types-jsonschema = \">=4.21.0.20240118\"\n+types-protobuf = \">=4.24.0.20240129\"\n+mypy-protobuf = \">=3.5.0\"\n+pytest = \">=7.4.4\"\n ruff = \"^0.2.2\"\n-mypy = \"^1.8.0\"\n-pytest-cov = \"^4.1.0\"\n-diff-cover = \"^8.0.3\"\n-types-Pillow = \"^10.2.0\"\n-types-requests = \"^2.32\"\n+mypy = \">=1.8.0\"\n+pytest-cov = \">=4.1.0\"\n+diff-cover = \">=8.0.3\"\n+types-Pillow = \">=10.2.0\"\n+types-requests = \">=2.32\"",
        "path": "pyproject.toml",
        "commit_id": "a006df3543390b33ba4e1ffdf7b85fc80f0ff144",
        "original_commit_id": "4eab7131cbbb904dc202b203e095ff37f8ffdc16",
        "user": {
          "login": "patrickvonplaten",
          "id": 23423619,
          "node_id": "MDQ6VXNlcjIzNDIzNjE5",
          "avatar_url": "https://avatars.githubusercontent.com/u/23423619?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/patrickvonplaten",
          "html_url": "https://github.com/patrickvonplaten",
          "followers_url": "https://api.github.com/users/patrickvonplaten/followers",
          "following_url": "https://api.github.com/users/patrickvonplaten/following{/other_user}",
          "gists_url": "https://api.github.com/users/patrickvonplaten/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/patrickvonplaten/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/patrickvonplaten/subscriptions",
          "organizations_url": "https://api.github.com/users/patrickvonplaten/orgs",
          "repos_url": "https://api.github.com/users/patrickvonplaten/repos",
          "events_url": "https://api.github.com/users/patrickvonplaten/events{/privacy}",
          "received_events_url": "https://api.github.com/users/patrickvonplaten/received_events",
          "type": "User",
          "user_view_type": "public",
          "site_admin": false
        },
        "body": "```suggestion\r\ntypes-requests = \"^2.32\"\r\n```",
        "created_at": "2025-01-14T09:26:10Z",
        "updated_at": "2025-01-14T09:34:24Z",
        "html_url": "https://github.com/mistralai/mistral-common/pull/72#discussion_r1914501745",
        "pull_request_url": "https://api.github.com/repos/mistralai/mistral-common/pulls/72",
        "author_association": "CONTRIBUTOR",
        "_links": {
          "self": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/1914501745"
          },
          "html": {
            "href": "https://github.com/mistralai/mistral-common/pull/72#discussion_r1914501745"
          },
          "pull_request": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/72"
          }
        },
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/1914501745/reactions",
          "total_count": 0,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "start_line": null,
        "original_start_line": 59,
        "start_side": "RIGHT",
        "line": null,
        "original_line": 60,
        "side": "RIGHT",
        "original_position": 57,
        "position": null,
        "subject_type": "line"
      }
    ]
  },
  "65": {
    "issue_comments": [],
    "review_comments": [
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/1848223529",
        "pull_request_review_id": 2445251793,
        "id": 1848223529,
        "node_id": "PRRC_kwDOLuT1gc5uKacp",
        "diff_hunk": "@@ -104,15 +103,37 @@ def v3(cls, is_tekken: bool = False, is_mm: bool = False) -> \"MistralTokenizer\":\n         return cls.from_file(str(cls._data_path() / tokenizer_name), mode=ValidationMode.test)\n \n     @classmethod\n-    def v7(cls) -> \"MistralTokenizer\":\n+    def v7(cls, is_mm: bool = False) -> \"MistralTokenizer\":\n         \"\"\"mistral-large 2.1\"\"\"\n-        return cls.from_file(\n-            str(cls._data_path() / \"mistral_instruct_tokenizer_241114.model.v7m1\"), mode=ValidationMode.test\n-        )\n+        if is_mm:\n+            return cls.from_file(\n+                str(cls._data_path() / \"mistral_instruct_tokenizer_241114.model.v7m1\"), mode=ValidationMode.test\n+            )\n+        else:\n+            return cls.from_file(\n+                str(cls._data_path() / \"mistral_instruct_tokenizer_241114.model.v7\"), mode=ValidationMode.test\n+            )\n \n     @classmethod\n-    def from_model(cls, model: str) -> \"MistralTokenizer\":\n+    def from_model(cls, model: str, strict: bool = False) -> \"MistralTokenizer\":\n         model_name_to_tokenizer_cls: Dict[str, Callable[[], MistralTokenizer]] = {\n+            \"ministral-8b-2410\": lambda: MistralTokenizer.v3(is_tekken=True),\n+            \"mistral-tiny-2312\": MistralTokenizer.v2,\n+            \"open-mistral-nemo-2407\": lambda: MistralTokenizer.v3(is_tekken=True),\n+            \"mistral-tiny-2407\": MistralTokenizer.v3,\n+            \"mistral-small-2312\": MistralTokenizer.v2,\n+            \"open-mixtral-8x22b-2404\": MistralTokenizer.v3,\n+            \"mistral-small-2402\": MistralTokenizer.v2,\n+            \"mistral-small-2409\": lambda: MistralTokenizer.v3(is_tekken=True),\n+            \"mistral-medium-2312\": MistralTokenizer.v1,\n+            \"mistral-large-2402\": MistralTokenizer.v2,\n+            \"mistral-large-2407\": MistralTokenizer.v3,\n+            \"mistral-large-2411\": MistralTokenizer.v7,\n+            \"pixtral-large-2411\": lambda: MistralTokenizer.v7(is_mm=True),\n+            \"codestral-2405\": MistralTokenizer.v3,\n+            \"codestral-mamba-2407\": MistralTokenizer.v3,\n+            \"pixtral-12b-2409\": lambda: MistralTokenizer.v3(is_tekken=True, is_mm=True),\n+            # The following are deprecated - only left for backward comp. Delete in >= 1.6.0",
        "path": "src/mistral_common/tokens/tokenizers/mistral.py",
        "commit_id": "6b21a2de0ee76389a3ccc35d9bfc0db11aa56dc2",
        "original_commit_id": "6b21a2de0ee76389a3ccc35d9bfc0db11aa56dc2",
        "user": {
          "login": "patrickvonplaten",
          "id": 23423619,
          "node_id": "MDQ6VXNlcjIzNDIzNjE5",
          "avatar_url": "https://avatars.githubusercontent.com/u/23423619?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/patrickvonplaten",
          "html_url": "https://github.com/patrickvonplaten",
          "followers_url": "https://api.github.com/users/patrickvonplaten/followers",
          "following_url": "https://api.github.com/users/patrickvonplaten/following{/other_user}",
          "gists_url": "https://api.github.com/users/patrickvonplaten/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/patrickvonplaten/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/patrickvonplaten/subscriptions",
          "organizations_url": "https://api.github.com/users/patrickvonplaten/orgs",
          "repos_url": "https://api.github.com/users/patrickvonplaten/repos",
          "events_url": "https://api.github.com/users/patrickvonplaten/events{/privacy}",
          "received_events_url": "https://api.github.com/users/patrickvonplaten/received_events",
          "type": "User",
          "user_view_type": "public",
          "site_admin": false
        },
        "body": "All of the following names do not have a date and thus cannot be tracked correctly. They will be removed in mistral_common >= 1.6.0",
        "created_at": "2024-11-19T12:02:03Z",
        "updated_at": "2024-11-19T12:02:03Z",
        "html_url": "https://github.com/mistralai/mistral-common/pull/65#discussion_r1848223529",
        "pull_request_url": "https://api.github.com/repos/mistralai/mistral-common/pulls/65",
        "author_association": "CONTRIBUTOR",
        "_links": {
          "self": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/1848223529"
          },
          "html": {
            "href": "https://github.com/mistralai/mistral-common/pull/65#discussion_r1848223529"
          },
          "pull_request": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/65"
          }
        },
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/1848223529/reactions",
          "total_count": 0,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "start_line": null,
        "original_start_line": null,
        "start_side": null,
        "line": 136,
        "original_line": 136,
        "side": "RIGHT",
        "original_position": 46,
        "position": 46,
        "subject_type": "line"
      }
    ]
  },
  "60": {
    "issue_comments": [
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/issues/comments/2423458682",
        "html_url": "https://github.com/mistralai/mistral-common/pull/60#issuecomment-2423458682",
        "issue_url": "https://api.github.com/repos/mistralai/mistral-common/issues/60",
        "id": 2423458682,
        "node_id": "IC_kwDOLuT1gc6Qcwt6",
        "user": {
          "login": "sasha0552",
          "id": 45110640,
          "node_id": "MDQ6VXNlcjQ1MTEwNjQw",
          "avatar_url": "https://avatars.githubusercontent.com/u/45110640?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/sasha0552",
          "html_url": "https://github.com/sasha0552",
          "followers_url": "https://api.github.com/users/sasha0552/followers",
          "following_url": "https://api.github.com/users/sasha0552/following{/other_user}",
          "gists_url": "https://api.github.com/users/sasha0552/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/sasha0552/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/sasha0552/subscriptions",
          "organizations_url": "https://api.github.com/users/sasha0552/orgs",
          "repos_url": "https://api.github.com/users/sasha0552/repos",
          "events_url": "https://api.github.com/users/sasha0552/events{/privacy}",
          "received_events_url": "https://api.github.com/users/sasha0552/received_events",
          "type": "User",
          "user_view_type": "public",
          "site_admin": false
        },
        "created_at": "2024-10-19T01:48:22Z",
        "updated_at": "2024-10-19T01:48:22Z",
        "author_association": "CONTRIBUTOR",
        "body": "@patrickvonplaten Could you please review & consider merging? Without these fixes, vLLM returns unhelpful messages to users (`'str' object has no attribute 'value'` without further explanation) when using the Mistral tokenizer and messing with the order of roles.",
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/issues/comments/2423458682/reactions",
          "total_count": 0,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "performed_via_github_app": null
      },
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/issues/comments/2434915051",
        "html_url": "https://github.com/mistralai/mistral-common/pull/60#issuecomment-2434915051",
        "issue_url": "https://api.github.com/repos/mistralai/mistral-common/issues/60",
        "id": 2434915051,
        "node_id": "IC_kwDOLuT1gc6RIdrr",
        "user": {
          "login": "patrickvonplaten",
          "id": 23423619,
          "node_id": "MDQ6VXNlcjIzNDIzNjE5",
          "avatar_url": "https://avatars.githubusercontent.com/u/23423619?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/patrickvonplaten",
          "html_url": "https://github.com/patrickvonplaten",
          "followers_url": "https://api.github.com/users/patrickvonplaten/followers",
          "following_url": "https://api.github.com/users/patrickvonplaten/following{/other_user}",
          "gists_url": "https://api.github.com/users/patrickvonplaten/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/patrickvonplaten/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/patrickvonplaten/subscriptions",
          "organizations_url": "https://api.github.com/users/patrickvonplaten/orgs",
          "repos_url": "https://api.github.com/users/patrickvonplaten/repos",
          "events_url": "https://api.github.com/users/patrickvonplaten/events{/privacy}",
          "received_events_url": "https://api.github.com/users/patrickvonplaten/received_events",
          "type": "User",
          "user_view_type": "public",
          "site_admin": false
        },
        "created_at": "2024-10-24T10:37:35Z",
        "updated_at": "2024-10-24T10:37:35Z",
        "author_association": "CONTRIBUTOR",
        "body": "Hey @sasha0552, \r\n\r\nthanks for the fixes - this looks indeed good to me!",
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/issues/comments/2434915051/reactions",
          "total_count": 1,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 1,
          "rocket": 0,
          "eyes": 0
        },
        "performed_via_github_app": null
      }
    ],
    "review_comments": []
  },
  "58": {
    "issue_comments": [
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/issues/comments/2380853993",
        "html_url": "https://github.com/mistralai/mistral-common/pull/58#issuecomment-2380853993",
        "issue_url": "https://api.github.com/repos/mistralai/mistral-common/issues/58",
        "id": 2380853993,
        "node_id": "IC_kwDOLuT1gc6N6PLp",
        "user": {
          "login": "youkaichao",
          "id": 23236638,
          "node_id": "MDQ6VXNlcjIzMjM2NjM4",
          "avatar_url": "https://avatars.githubusercontent.com/u/23236638?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/youkaichao",
          "html_url": "https://github.com/youkaichao",
          "followers_url": "https://api.github.com/users/youkaichao/followers",
          "following_url": "https://api.github.com/users/youkaichao/following{/other_user}",
          "gists_url": "https://api.github.com/users/youkaichao/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/youkaichao/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/youkaichao/subscriptions",
          "organizations_url": "https://api.github.com/users/youkaichao/orgs",
          "repos_url": "https://api.github.com/users/youkaichao/repos",
          "events_url": "https://api.github.com/users/youkaichao/events{/privacy}",
          "received_events_url": "https://api.github.com/users/youkaichao/received_events",
          "type": "User",
          "user_view_type": "public",
          "site_admin": false
        },
        "created_at": "2024-09-28T18:13:54Z",
        "updated_at": "2024-09-28T18:13:54Z",
        "author_association": "NONE",
        "body": "thanks for the update!",
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/issues/comments/2380853993/reactions",
          "total_count": 0,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "performed_via_github_app": null
      }
    ],
    "review_comments": [
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/1780034239",
        "pull_request_review_id": 2335844833,
        "id": 1780034239,
        "node_id": "PRRC_kwDOLuT1gc5qGSq_",
        "diff_hunk": "@@ -14,13 +15,24 @@\n     SpecialImageIDs,\n )\n \n+logger = logging.getLogger(__name__)\n+\n+\n _cv2_installed: bool\n try:\n     import cv2\n \n     _cv2_installed = True\n except ImportError:\n     _cv2_installed = False\n+except Exception as e:\n+    # cv2 has lots of import problems: https://github.com/opencv/opencv-python/issues/884\n+    # for better UX, let's simple skip import errors for now",
        "path": "src/mistral_common/tokens/tokenizers/multimodal.py",
        "commit_id": "f66340b6b6c7c0a6dc953d509c7588323d076bf9",
        "original_commit_id": "1a7c9cf6b44b7f9a6d2c1a8d1a854104dd033b4a",
        "user": {
          "login": "patrickvonplaten",
          "id": 23423619,
          "node_id": "MDQ6VXNlcjIzNDIzNjE5",
          "avatar_url": "https://avatars.githubusercontent.com/u/23423619?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/patrickvonplaten",
          "html_url": "https://github.com/patrickvonplaten",
          "followers_url": "https://api.github.com/users/patrickvonplaten/followers",
          "following_url": "https://api.github.com/users/patrickvonplaten/following{/other_user}",
          "gists_url": "https://api.github.com/users/patrickvonplaten/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/patrickvonplaten/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/patrickvonplaten/subscriptions",
          "organizations_url": "https://api.github.com/users/patrickvonplaten/orgs",
          "repos_url": "https://api.github.com/users/patrickvonplaten/repos",
          "events_url": "https://api.github.com/users/patrickvonplaten/events{/privacy}",
          "received_events_url": "https://api.github.com/users/patrickvonplaten/received_events",
          "type": "User",
          "user_view_type": "public",
          "site_admin": false
        },
        "body": "```suggestion\r\n    # for better UX, let's simply skip all errors that might arise from import for now\r\n```",
        "created_at": "2024-09-29T12:33:56Z",
        "updated_at": "2024-09-29T12:33:56Z",
        "html_url": "https://github.com/mistralai/mistral-common/pull/58#discussion_r1780034239",
        "pull_request_url": "https://api.github.com/repos/mistralai/mistral-common/pulls/58",
        "author_association": "CONTRIBUTOR",
        "_links": {
          "self": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/1780034239"
          },
          "html": {
            "href": "https://github.com/mistralai/mistral-common/pull/58#discussion_r1780034239"
          },
          "pull_request": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/58"
          }
        },
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/1780034239/reactions",
          "total_count": 0,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "start_line": null,
        "original_start_line": null,
        "start_side": null,
        "line": null,
        "original_line": 30,
        "side": "RIGHT",
        "original_position": 22,
        "position": null,
        "subject_type": "line"
      }
    ]
  },
  "57": {
    "issue_comments": [
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/issues/comments/2695117279",
        "html_url": "https://github.com/mistralai/mistral-common/pull/57#issuecomment-2695117279",
        "issue_url": "https://api.github.com/repos/mistralai/mistral-common/issues/57",
        "id": 2695117279,
        "node_id": "IC_kwDOLuT1gc6gpDnf",
        "user": {
          "login": "gcalmettes",
          "id": 1042512,
          "node_id": "MDQ6VXNlcjEwNDI1MTI=",
          "avatar_url": "https://avatars.githubusercontent.com/u/1042512?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/gcalmettes",
          "html_url": "https://github.com/gcalmettes",
          "followers_url": "https://api.github.com/users/gcalmettes/followers",
          "following_url": "https://api.github.com/users/gcalmettes/following{/other_user}",
          "gists_url": "https://api.github.com/users/gcalmettes/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/gcalmettes/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/gcalmettes/subscriptions",
          "organizations_url": "https://api.github.com/users/gcalmettes/orgs",
          "repos_url": "https://api.github.com/users/gcalmettes/repos",
          "events_url": "https://api.github.com/users/gcalmettes/events{/privacy}",
          "received_events_url": "https://api.github.com/users/gcalmettes/received_events",
          "type": "User",
          "user_view_type": "public",
          "site_admin": false
        },
        "created_at": "2025-03-03T17:42:02Z",
        "updated_at": "2025-03-03T17:42:02Z",
        "author_association": "NONE",
        "body": "@jean-malo @patrickvonplaten any chance of this PR to be reviewed on your side ? This still causes some incompatiblity when querying mistral with the openAI client (since [on their side textChunks](https://github.com/openai/openai-python/blob/64af9e8f06be4bfe02e0e5e9cb0aa7889a5db6d7/src/openai/types/chat/chat_completion_assistant_message_param.py#L46) are also valid for assistant messages, like for the other roles) \r\n\r\nThanks !",
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/issues/comments/2695117279/reactions",
          "total_count": 0,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "performed_via_github_app": null
      },
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/issues/comments/2768677578",
        "html_url": "https://github.com/mistralai/mistral-common/pull/57#issuecomment-2768677578",
        "issue_url": "https://api.github.com/repos/mistralai/mistral-common/issues/57",
        "id": 2768677578,
        "node_id": "IC_kwDOLuT1gc6lBqrK",
        "user": {
          "login": "gcalmettes",
          "id": 1042512,
          "node_id": "MDQ6VXNlcjEwNDI1MTI=",
          "avatar_url": "https://avatars.githubusercontent.com/u/1042512?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/gcalmettes",
          "html_url": "https://github.com/gcalmettes",
          "followers_url": "https://api.github.com/users/gcalmettes/followers",
          "following_url": "https://api.github.com/users/gcalmettes/following{/other_user}",
          "gists_url": "https://api.github.com/users/gcalmettes/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/gcalmettes/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/gcalmettes/subscriptions",
          "organizations_url": "https://api.github.com/users/gcalmettes/orgs",
          "repos_url": "https://api.github.com/users/gcalmettes/repos",
          "events_url": "https://api.github.com/users/gcalmettes/events{/privacy}",
          "received_events_url": "https://api.github.com/users/gcalmettes/received_events",
          "type": "User",
          "user_view_type": "public",
          "site_admin": false
        },
        "created_at": "2025-04-01T09:02:04Z",
        "updated_at": "2025-04-01T09:02:04Z",
        "author_association": "NONE",
        "body": "related: https://github.com/vllm-project/vllm/pull/12859\r\n",
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/issues/comments/2768677578/reactions",
          "total_count": 0,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "performed_via_github_app": null
      }
    ],
    "review_comments": []
  },
  "56": {
    "issue_comments": [],
    "review_comments": [
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/1770581477",
        "pull_request_review_id": 2320878701,
        "id": 1770581477,
        "node_id": "PRRC_kwDOLuT1gc5piO3l",
        "diff_hunk": "@@ -23,9 +23,10 @@ warn_unused_ignores = true\n exclude = [\"docs\", \"tools\", \"build\"]\n \n [[tool.mypy.overrides]]\n-module = \"sentencepiece.*\"\n+module = [\"sentencepiece.*\", \"cv2\", \"cv2.*\"]",
        "path": "pyproject.toml",
        "commit_id": "8f31cbe993ab143473dc6de0d6fc0efd9b6a53c3",
        "original_commit_id": "8f31cbe993ab143473dc6de0d6fc0efd9b6a53c3",
        "user": {
          "login": "patrickvonplaten",
          "id": 23423619,
          "node_id": "MDQ6VXNlcjIzNDIzNjE5",
          "avatar_url": "https://avatars.githubusercontent.com/u/23423619?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/patrickvonplaten",
          "html_url": "https://github.com/patrickvonplaten",
          "followers_url": "https://api.github.com/users/patrickvonplaten/followers",
          "following_url": "https://api.github.com/users/patrickvonplaten/following{/other_user}",
          "gists_url": "https://api.github.com/users/patrickvonplaten/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/patrickvonplaten/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/patrickvonplaten/subscriptions",
          "organizations_url": "https://api.github.com/users/patrickvonplaten/orgs",
          "repos_url": "https://api.github.com/users/patrickvonplaten/repos",
          "events_url": "https://api.github.com/users/patrickvonplaten/events{/privacy}",
          "received_events_url": "https://api.github.com/users/patrickvonplaten/received_events",
          "type": "User",
          "user_view_type": "public",
          "site_admin": false
        },
        "body": "ignore cv2 import errors",
        "created_at": "2024-09-22T15:41:03Z",
        "updated_at": "2024-09-22T15:41:03Z",
        "html_url": "https://github.com/mistralai/mistral-common/pull/56#discussion_r1770581477",
        "pull_request_url": "https://api.github.com/repos/mistralai/mistral-common/pulls/56",
        "author_association": "CONTRIBUTOR",
        "_links": {
          "self": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/1770581477"
          },
          "html": {
            "href": "https://github.com/mistralai/mistral-common/pull/56#discussion_r1770581477"
          },
          "pull_request": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/56"
          }
        },
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/1770581477/reactions",
          "total_count": 0,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "start_line": null,
        "original_start_line": null,
        "start_side": null,
        "line": 26,
        "original_line": 26,
        "side": "RIGHT",
        "original_position": 13,
        "position": 13,
        "subject_type": "line"
      }
    ]
  },
  "51": {
    "issue_comments": [
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/issues/comments/2357561864",
        "html_url": "https://github.com/mistralai/mistral-common/pull/51#issuecomment-2357561864",
        "issue_url": "https://api.github.com/repos/mistralai/mistral-common/issues/51",
        "id": 2357561864,
        "node_id": "IC_kwDOLuT1gc6MhYoI",
        "user": {
          "login": "ywang96",
          "id": 136131678,
          "node_id": "U_kgDOCB00Xg",
          "avatar_url": "https://avatars.githubusercontent.com/u/136131678?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/ywang96",
          "html_url": "https://github.com/ywang96",
          "followers_url": "https://api.github.com/users/ywang96/followers",
          "following_url": "https://api.github.com/users/ywang96/following{/other_user}",
          "gists_url": "https://api.github.com/users/ywang96/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/ywang96/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/ywang96/subscriptions",
          "organizations_url": "https://api.github.com/users/ywang96/orgs",
          "repos_url": "https://api.github.com/users/ywang96/repos",
          "events_url": "https://api.github.com/users/ywang96/events{/privacy}",
          "received_events_url": "https://api.github.com/users/ywang96/received_events",
          "type": "User",
          "user_view_type": "public",
          "site_admin": false
        },
        "created_at": "2024-09-18T05:51:41Z",
        "updated_at": "2024-09-18T08:40:30Z",
        "author_association": "NONE",
        "body": "cc @patrickvonplaten Let me know if this is the best way to do it! We have [something similar](https://github.com/vllm-project/vllm/blob/95965d31b6ac2c9557816a6ffabe4a3117a5ccb2/vllm/connections.py#L43) in vLLM, but open to change the header content to anything else!",
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/issues/comments/2357561864/reactions",
          "total_count": 0,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "performed_via_github_app": null
      }
    ],
    "review_comments": []
  },
  "45": {
    "issue_comments": [
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/issues/comments/2342140958",
        "html_url": "https://github.com/mistralai/mistral-common/pull/45#issuecomment-2342140958",
        "issue_url": "https://api.github.com/repos/mistralai/mistral-common/issues/45",
        "id": 2342140958,
        "node_id": "IC_kwDOLuT1gc6Lmjwe",
        "user": {
          "login": "patrickvonplaten",
          "id": 23423619,
          "node_id": "MDQ6VXNlcjIzNDIzNjE5",
          "avatar_url": "https://avatars.githubusercontent.com/u/23423619?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/patrickvonplaten",
          "html_url": "https://github.com/patrickvonplaten",
          "followers_url": "https://api.github.com/users/patrickvonplaten/followers",
          "following_url": "https://api.github.com/users/patrickvonplaten/following{/other_user}",
          "gists_url": "https://api.github.com/users/patrickvonplaten/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/patrickvonplaten/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/patrickvonplaten/subscriptions",
          "organizations_url": "https://api.github.com/users/patrickvonplaten/orgs",
          "repos_url": "https://api.github.com/users/patrickvonplaten/repos",
          "events_url": "https://api.github.com/users/patrickvonplaten/events{/privacy}",
          "received_events_url": "https://api.github.com/users/patrickvonplaten/received_events",
          "type": "User",
          "user_view_type": "public",
          "site_admin": false
        },
        "created_at": "2024-09-10T22:14:02Z",
        "updated_at": "2024-09-10T22:14:02Z",
        "author_association": "CONTRIBUTOR",
        "body": "@SocketSecurity ignore-all",
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/issues/comments/2342140958/reactions",
          "total_count": 1,
          "+1": 1,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "performed_via_github_app": null
      },
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/issues/comments/2342844622",
        "html_url": "https://github.com/mistralai/mistral-common/pull/45#issuecomment-2342844622",
        "issue_url": "https://api.github.com/repos/mistralai/mistral-common/issues/45",
        "id": 2342844622,
        "node_id": "IC_kwDOLuT1gc6LpPjO",
        "user": {
          "login": "EwoutH",
          "id": 15776622,
          "node_id": "MDQ6VXNlcjE1Nzc2NjIy",
          "avatar_url": "https://avatars.githubusercontent.com/u/15776622?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/EwoutH",
          "html_url": "https://github.com/EwoutH",
          "followers_url": "https://api.github.com/users/EwoutH/followers",
          "following_url": "https://api.github.com/users/EwoutH/following{/other_user}",
          "gists_url": "https://api.github.com/users/EwoutH/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/EwoutH/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/EwoutH/subscriptions",
          "organizations_url": "https://api.github.com/users/EwoutH/orgs",
          "repos_url": "https://api.github.com/users/EwoutH/repos",
          "events_url": "https://api.github.com/users/EwoutH/events{/privacy}",
          "received_events_url": "https://api.github.com/users/EwoutH/received_events",
          "type": "User",
          "user_view_type": "public",
          "site_admin": false
        },
        "created_at": "2024-09-11T07:14:37Z",
        "updated_at": "2024-09-11T07:14:37Z",
        "author_association": "NONE",
        "body": "Really awesome! Are there docs or a guide available?",
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/issues/comments/2342844622/reactions",
          "total_count": 0,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "performed_via_github_app": null
      },
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/issues/comments/2343101404",
        "html_url": "https://github.com/mistralai/mistral-common/pull/45#issuecomment-2343101404",
        "issue_url": "https://api.github.com/repos/mistralai/mistral-common/issues/45",
        "id": 2343101404,
        "node_id": "IC_kwDOLuT1gc6LqOPc",
        "user": {
          "login": "COWI-MI",
          "id": 90040980,
          "node_id": "MDQ6VXNlcjkwMDQwOTgw",
          "avatar_url": "https://avatars.githubusercontent.com/u/90040980?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/COWI-MI",
          "html_url": "https://github.com/COWI-MI",
          "followers_url": "https://api.github.com/users/COWI-MI/followers",
          "following_url": "https://api.github.com/users/COWI-MI/following{/other_user}",
          "gists_url": "https://api.github.com/users/COWI-MI/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/COWI-MI/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/COWI-MI/subscriptions",
          "organizations_url": "https://api.github.com/users/COWI-MI/orgs",
          "repos_url": "https://api.github.com/users/COWI-MI/repos",
          "events_url": "https://api.github.com/users/COWI-MI/events{/privacy}",
          "received_events_url": "https://api.github.com/users/COWI-MI/received_events",
          "type": "User",
          "user_view_type": "public",
          "site_admin": false
        },
        "created_at": "2024-09-11T09:16:43Z",
        "updated_at": "2024-09-11T09:16:51Z",
        "author_association": "NONE",
        "body": "> Really awesome! Are there docs or a guide available?\r\n\r\ncheck https://github.com/mistralai/mistral-common/releases/tag/v1.4.0\r\n\r\n",
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/issues/comments/2343101404/reactions",
          "total_count": 0,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "performed_via_github_app": null
      }
    ],
    "review_comments": []
  },
  "41": {
    "issue_comments": [
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/issues/comments/2290955278",
        "html_url": "https://github.com/mistralai/mistral-common/pull/41#issuecomment-2290955278",
        "issue_url": "https://api.github.com/repos/mistralai/mistral-common/issues/41",
        "id": 2290955278,
        "node_id": "IC_kwDOLuT1gc6IjTQO",
        "user": {
          "login": "patrickvonplaten",
          "id": 23423619,
          "node_id": "MDQ6VXNlcjIzNDIzNjE5",
          "avatar_url": "https://avatars.githubusercontent.com/u/23423619?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/patrickvonplaten",
          "html_url": "https://github.com/patrickvonplaten",
          "followers_url": "https://api.github.com/users/patrickvonplaten/followers",
          "following_url": "https://api.github.com/users/patrickvonplaten/following{/other_user}",
          "gists_url": "https://api.github.com/users/patrickvonplaten/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/patrickvonplaten/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/patrickvonplaten/subscriptions",
          "organizations_url": "https://api.github.com/users/patrickvonplaten/orgs",
          "repos_url": "https://api.github.com/users/patrickvonplaten/repos",
          "events_url": "https://api.github.com/users/patrickvonplaten/events{/privacy}",
          "received_events_url": "https://api.github.com/users/patrickvonplaten/received_events",
          "type": "User",
          "user_view_type": "public",
          "site_admin": false
        },
        "created_at": "2024-08-15T09:21:28Z",
        "updated_at": "2024-08-15T09:21:28Z",
        "author_association": "CONTRIBUTOR",
        "body": "Forgot to update for 1.3.3 which was released already a month back: https://pypi.org/project/mistral-common/1.3.3/",
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/issues/comments/2290955278/reactions",
          "total_count": 0,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "performed_via_github_app": null
      }
    ],
    "review_comments": []
  },
  "39": {
    "issue_comments": [],
    "review_comments": [
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/1718151441",
        "pull_request_review_id": 2239995892,
        "id": 1718151441,
        "node_id": "PRRC_kwDOLuT1gc5maOkR",
        "diff_hunk": "@@ -28,7 +28,7 @@ ignore_missing_imports = true\n \n [tool.poetry.dependencies]\n python = \"^3.8.10\"\n-pydantic = \"2.6.1\"\n+pydantic = \"^2.8.2\"",
        "path": "pyproject.toml",
        "commit_id": "55df1b881f925306618eae2c8b7e1e3fcfe848bd",
        "original_commit_id": "55df1b881f925306618eae2c8b7e1e3fcfe848bd",
        "user": {
          "login": "patrickvonplaten",
          "id": 23423619,
          "node_id": "MDQ6VXNlcjIzNDIzNjE5",
          "avatar_url": "https://avatars.githubusercontent.com/u/23423619?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/patrickvonplaten",
          "html_url": "https://github.com/patrickvonplaten",
          "followers_url": "https://api.github.com/users/patrickvonplaten/followers",
          "following_url": "https://api.github.com/users/patrickvonplaten/following{/other_user}",
          "gists_url": "https://api.github.com/users/patrickvonplaten/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/patrickvonplaten/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/patrickvonplaten/subscriptions",
          "organizations_url": "https://api.github.com/users/patrickvonplaten/orgs",
          "repos_url": "https://api.github.com/users/patrickvonplaten/repos",
          "events_url": "https://api.github.com/users/patrickvonplaten/events{/privacy}",
          "received_events_url": "https://api.github.com/users/patrickvonplaten/received_events",
          "type": "User",
          "user_view_type": "public",
          "site_admin": false
        },
        "body": "```suggestion\r\npydantic = \"^2.6.1\"\r\n```\r\n\r\nThis should be fine as well no? ",
        "created_at": "2024-08-15T08:56:12Z",
        "updated_at": "2024-08-15T08:56:12Z",
        "html_url": "https://github.com/mistralai/mistral-common/pull/39#discussion_r1718151441",
        "pull_request_url": "https://api.github.com/repos/mistralai/mistral-common/pulls/39",
        "author_association": "CONTRIBUTOR",
        "_links": {
          "self": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/1718151441"
          },
          "html": {
            "href": "https://github.com/mistralai/mistral-common/pull/39#discussion_r1718151441"
          },
          "pull_request": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/39"
          }
        },
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/1718151441/reactions",
          "total_count": 0,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "start_line": null,
        "original_start_line": null,
        "start_side": null,
        "line": 31,
        "original_line": 31,
        "side": "RIGHT",
        "original_position": 5,
        "position": 5,
        "subject_type": "line"
      },
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/1718151894",
        "pull_request_review_id": 2239996520,
        "id": 1718151894,
        "node_id": "PRRC_kwDOLuT1gc5maOrW",
        "diff_hunk": "@@ -28,7 +28,7 @@ ignore_missing_imports = true\n \n [tool.poetry.dependencies]\n python = \"^3.8.10\"\n-pydantic = \"2.6.1\"\n+pydantic = \"^2.8.2\"",
        "path": "pyproject.toml",
        "commit_id": "55df1b881f925306618eae2c8b7e1e3fcfe848bd",
        "original_commit_id": "55df1b881f925306618eae2c8b7e1e3fcfe848bd",
        "user": {
          "login": "patrickvonplaten",
          "id": 23423619,
          "node_id": "MDQ6VXNlcjIzNDIzNjE5",
          "avatar_url": "https://avatars.githubusercontent.com/u/23423619?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/patrickvonplaten",
          "html_url": "https://github.com/patrickvonplaten",
          "followers_url": "https://api.github.com/users/patrickvonplaten/followers",
          "following_url": "https://api.github.com/users/patrickvonplaten/following{/other_user}",
          "gists_url": "https://api.github.com/users/patrickvonplaten/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/patrickvonplaten/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/patrickvonplaten/subscriptions",
          "organizations_url": "https://api.github.com/users/patrickvonplaten/orgs",
          "repos_url": "https://api.github.com/users/patrickvonplaten/repos",
          "events_url": "https://api.github.com/users/patrickvonplaten/events{/privacy}",
          "received_events_url": "https://api.github.com/users/patrickvonplaten/received_events",
          "type": "User",
          "user_view_type": "public",
          "site_admin": false
        },
        "body": "It'll by default install the newest version of pydantic then!",
        "created_at": "2024-08-15T08:56:32Z",
        "updated_at": "2024-08-15T08:56:32Z",
        "html_url": "https://github.com/mistralai/mistral-common/pull/39#discussion_r1718151894",
        "pull_request_url": "https://api.github.com/repos/mistralai/mistral-common/pulls/39",
        "author_association": "CONTRIBUTOR",
        "_links": {
          "self": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/1718151894"
          },
          "html": {
            "href": "https://github.com/mistralai/mistral-common/pull/39#discussion_r1718151894"
          },
          "pull_request": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/39"
          }
        },
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/1718151894/reactions",
          "total_count": 0,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "start_line": null,
        "original_start_line": null,
        "start_side": null,
        "line": 31,
        "original_line": 31,
        "side": "RIGHT",
        "in_reply_to_id": 1718151441,
        "original_position": 5,
        "position": 5,
        "subject_type": "line"
      }
    ]
  },
  "31": {
    "issue_comments": [],
    "review_comments": [
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/1684332090",
        "pull_request_review_id": 2188153996,
        "id": 1684332090,
        "node_id": "PRRC_kwDOLuT1gc5kZN46",
        "diff_hunk": "@@ -30,7 +30,6 @@ def tokenizer() -> InstructTokenizer:\n \n def tekken_tokenizer() -> InstructTokenizer:\n     tekken = MistralTokenizer.v3(is_tekken=True).instruct_tokenizer\n-    tekken.tokenizer.special_token_policy = SpecialTokenPolicy.IGNORE  # type: ignore",
        "path": "tests/test_tokenize_v3.py",
        "commit_id": "b5566da625df5969f346cf3f8d6eaba376da9a1a",
        "original_commit_id": "30206782a502c944a4d5ead9e547078cd24f9c7a",
        "user": {
          "login": "patrickvonplaten",
          "id": 23423619,
          "node_id": "MDQ6VXNlcjIzNDIzNjE5",
          "avatar_url": "https://avatars.githubusercontent.com/u/23423619?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/patrickvonplaten",
          "html_url": "https://github.com/patrickvonplaten",
          "followers_url": "https://api.github.com/users/patrickvonplaten/followers",
          "following_url": "https://api.github.com/users/patrickvonplaten/following{/other_user}",
          "gists_url": "https://api.github.com/users/patrickvonplaten/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/patrickvonplaten/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/patrickvonplaten/subscriptions",
          "organizations_url": "https://api.github.com/users/patrickvonplaten/orgs",
          "repos_url": "https://api.github.com/users/patrickvonplaten/repos",
          "events_url": "https://api.github.com/users/patrickvonplaten/events{/privacy}",
          "received_events_url": "https://api.github.com/users/patrickvonplaten/received_events",
          "type": "User",
          "user_view_type": "public",
          "site_admin": false
        },
        "body": "Remove to ensure tokenizers behave the same",
        "created_at": "2024-07-19T12:49:03Z",
        "updated_at": "2024-07-19T12:49:04Z",
        "html_url": "https://github.com/mistralai/mistral-common/pull/31#discussion_r1684332090",
        "pull_request_url": "https://api.github.com/repos/mistralai/mistral-common/pulls/31",
        "author_association": "CONTRIBUTOR",
        "_links": {
          "self": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/1684332090"
          },
          "html": {
            "href": "https://github.com/mistralai/mistral-common/pull/31#discussion_r1684332090"
          },
          "pull_request": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/31"
          }
        },
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/1684332090/reactions",
          "total_count": 0,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "start_line": null,
        "original_start_line": null,
        "start_side": null,
        "line": null,
        "original_line": 33,
        "side": "LEFT",
        "original_position": 4,
        "position": null,
        "subject_type": "line"
      },
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/1685507940",
        "pull_request_review_id": 2190029311,
        "id": 1685507940,
        "node_id": "PRRC_kwDOLuT1gc5kds9k",
        "diff_hunk": "@@ -30,7 +30,7 @@ def tokenizer() -> InstructTokenizer:\n \n def tekken_tokenizer() -> InstructTokenizer:\n     tekken = MistralTokenizer.v3(is_tekken=True).instruct_tokenizer\n-    tekken.tokenizer.special_token_policy = SpecialTokenPolicy.IGNORE  # type: ignore\n+    tekken.tokenizer.special_token_policy = SpecialTokenPolicy.IGNORE",
        "path": "tests/test_tokenize_v3.py",
        "commit_id": "b5566da625df5969f346cf3f8d6eaba376da9a1a",
        "original_commit_id": "06a4a5a43834293964a4977a15049fbab48f7437",
        "user": {
          "login": "patrickvonplaten",
          "id": 23423619,
          "node_id": "MDQ6VXNlcjIzNDIzNjE5",
          "avatar_url": "https://avatars.githubusercontent.com/u/23423619?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/patrickvonplaten",
          "html_url": "https://github.com/patrickvonplaten",
          "followers_url": "https://api.github.com/users/patrickvonplaten/followers",
          "following_url": "https://api.github.com/users/patrickvonplaten/following{/other_user}",
          "gists_url": "https://api.github.com/users/patrickvonplaten/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/patrickvonplaten/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/patrickvonplaten/subscriptions",
          "organizations_url": "https://api.github.com/users/patrickvonplaten/orgs",
          "repos_url": "https://api.github.com/users/patrickvonplaten/repos",
          "events_url": "https://api.github.com/users/patrickvonplaten/events{/privacy}",
          "received_events_url": "https://api.github.com/users/patrickvonplaten/received_events",
          "type": "User",
          "user_view_type": "public",
          "site_admin": false
        },
        "body": "```suggestion\r\n    tekken.tokenizer.special_token_policy = SpecialTokenPolicy.IGNORE   # type: ignore\r\n```",
        "created_at": "2024-07-20T17:33:43Z",
        "updated_at": "2024-07-20T17:33:44Z",
        "html_url": "https://github.com/mistralai/mistral-common/pull/31#discussion_r1685507940",
        "pull_request_url": "https://api.github.com/repos/mistralai/mistral-common/pulls/31",
        "author_association": "CONTRIBUTOR",
        "_links": {
          "self": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/1685507940"
          },
          "html": {
            "href": "https://github.com/mistralai/mistral-common/pull/31#discussion_r1685507940"
          },
          "pull_request": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/31"
          }
        },
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/1685507940/reactions",
          "total_count": 0,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "start_line": null,
        "original_start_line": null,
        "start_side": null,
        "line": null,
        "original_line": 33,
        "side": "RIGHT",
        "original_position": 5,
        "position": null,
        "subject_type": "line"
      },
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/1685507963",
        "pull_request_review_id": 2190029333,
        "id": 1685507963,
        "node_id": "PRRC_kwDOLuT1gc5kds97",
        "diff_hunk": "@@ -30,7 +30,7 @@ def tokenizer() -> InstructTokenizer:\n \n def tekken_tokenizer() -> InstructTokenizer:\n     tekken = MistralTokenizer.v3(is_tekken=True).instruct_tokenizer\n-    tekken.tokenizer.special_token_policy = SpecialTokenPolicy.IGNORE  # type: ignore\n+    tekken.tokenizer.special_token_policy = SpecialTokenPolicy.IGNORE   # type: ignore",
        "path": "tests/test_tokenize_v3.py",
        "commit_id": "b5566da625df5969f346cf3f8d6eaba376da9a1a",
        "original_commit_id": "2e41e7a945aea367d9df8ed40a9712189658c7ca",
        "user": {
          "login": "patrickvonplaten",
          "id": 23423619,
          "node_id": "MDQ6VXNlcjIzNDIzNjE5",
          "avatar_url": "https://avatars.githubusercontent.com/u/23423619?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/patrickvonplaten",
          "html_url": "https://github.com/patrickvonplaten",
          "followers_url": "https://api.github.com/users/patrickvonplaten/followers",
          "following_url": "https://api.github.com/users/patrickvonplaten/following{/other_user}",
          "gists_url": "https://api.github.com/users/patrickvonplaten/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/patrickvonplaten/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/patrickvonplaten/subscriptions",
          "organizations_url": "https://api.github.com/users/patrickvonplaten/orgs",
          "repos_url": "https://api.github.com/users/patrickvonplaten/repos",
          "events_url": "https://api.github.com/users/patrickvonplaten/events{/privacy}",
          "received_events_url": "https://api.github.com/users/patrickvonplaten/received_events",
          "type": "User",
          "user_view_type": "public",
          "site_admin": false
        },
        "body": "```suggestion\r\n    tekken.tokenizer.special_token_policy = SpecialTokenPolicy.IGNORE  # type: ignore\r\n```",
        "created_at": "2024-07-20T17:33:58Z",
        "updated_at": "2024-07-20T17:33:59Z",
        "html_url": "https://github.com/mistralai/mistral-common/pull/31#discussion_r1685507963",
        "pull_request_url": "https://api.github.com/repos/mistralai/mistral-common/pulls/31",
        "author_association": "CONTRIBUTOR",
        "_links": {
          "self": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/1685507963"
          },
          "html": {
            "href": "https://github.com/mistralai/mistral-common/pull/31#discussion_r1685507963"
          },
          "pull_request": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/31"
          }
        },
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/1685507963/reactions",
          "total_count": 0,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "start_line": null,
        "original_start_line": null,
        "start_side": null,
        "line": null,
        "original_line": 33,
        "side": "RIGHT",
        "original_position": 5,
        "position": null,
        "subject_type": "line"
      }
    ]
  },
  "30": {
    "issue_comments": [
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/issues/comments/2236808742",
        "html_url": "https://github.com/mistralai/mistral-common/pull/30#issuecomment-2236808742",
        "issue_url": "https://api.github.com/repos/mistralai/mistral-common/issues/30",
        "id": 2236808742,
        "node_id": "IC_kwDOLuT1gc6FUv4m",
        "user": {
          "login": "socket-security[bot]",
          "id": 95510084,
          "node_id": "BOT_kgDOBbFeRA",
          "avatar_url": "https://avatars.githubusercontent.com/in/156372?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/socket-security%5Bbot%5D",
          "html_url": "https://github.com/apps/socket-security",
          "followers_url": "https://api.github.com/users/socket-security%5Bbot%5D/followers",
          "following_url": "https://api.github.com/users/socket-security%5Bbot%5D/following{/other_user}",
          "gists_url": "https://api.github.com/users/socket-security%5Bbot%5D/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/socket-security%5Bbot%5D/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/socket-security%5Bbot%5D/subscriptions",
          "organizations_url": "https://api.github.com/users/socket-security%5Bbot%5D/orgs",
          "repos_url": "https://api.github.com/users/socket-security%5Bbot%5D/repos",
          "events_url": "https://api.github.com/users/socket-security%5Bbot%5D/events{/privacy}",
          "received_events_url": "https://api.github.com/users/socket-security%5Bbot%5D/received_events",
          "type": "Bot",
          "user_view_type": "public",
          "site_admin": false
        },
        "created_at": "2024-07-18T15:03:44Z",
        "updated_at": "2024-07-18T17:36:05Z",
        "author_association": "NONE",
        "body": "<!-- overview-comment -->\n**New and removed dependencies detected.** Learn more about [Socket for GitHub \u2197\ufe0e](https://socket.dev?utm_medium=gh)\n\n\n| Package | New capabilities | Transitives | Size | Publisher |\n|:--- |:--- |:--- |:--- |:--- |\n| [pypi/certifi@2024.7.4](https://socket.dev/pypi/package/certifi/overview/2024.7.4/tar-gz) | <a href=\"https://socket.dev/pypi/package/certifi/alerts/2024.7.4/tar-gz?alert_name=filesystemAccess\">filesystem</a> | <a href=\"https://socket.dev/pypi/package/certifi/dependencies/2024.7.4/tar-gz\">`0`</a> | 306 kB | <a href=\"https://socket.dev/pypi/user/Lukasa\">Lukasa</a> |\n| [pypi/charset-normalizer@3.3.2](https://socket.dev/pypi/package/charset-normalizer/overview/3.3.2/cp310-cp310-macosx-10-9-universal2-whl) | <a href=\"https://socket.dev/pypi/package/charset-normalizer/alerts/3.3.2/cp310-cp310-macosx-10-9-universal2-whl?alert_name=envVars\">environment</a>, <a href=\"https://socket.dev/pypi/package/charset-normalizer/alerts/3.3.2/cp310-cp310-macosx-10-9-universal2-whl?alert_name=usesEval\">eval</a>, <a href=\"https://socket.dev/pypi/package/charset-normalizer/alerts/3.3.2/cp310-cp310-macosx-10-9-universal2-whl?alert_name=filesystemAccess\">filesystem</a> | <a href=\"https://socket.dev/pypi/package/charset-normalizer/dependencies/3.3.2/cp310-cp310-macosx-10-9-universal2-whl\">`0`</a> | 762 kB | <a href=\"https://socket.dev/pypi/user/Ousret\">Ousret</a> |\n| [pypi/idna@3.7](https://socket.dev/pypi/package/idna/overview/3.7/tar-gz) | <a href=\"https://socket.dev/pypi/package/idna/alerts/3.7/tar-gz?alert_name=filesystemAccess\">filesystem</a>, <a href=\"https://socket.dev/pypi/package/idna/alerts/3.7/tar-gz?alert_name=networkAccess\">network</a> | <a href=\"https://socket.dev/pypi/package/idna/dependencies/3.7/tar-gz\">`0`</a> | 1.1 MB | <a href=\"https://socket.dev/pypi/user/kjd\">kjd</a> |\n| [pypi/regex@2024.5.15](https://socket.dev/pypi/package/regex/overview/2024.5.15/cp310-cp310-macosx-10-9-universal2-whl) | <a href=\"https://socket.dev/pypi/package/regex/alerts/2024.5.15/cp310-cp310-macosx-10-9-universal2-whl?alert_name=usesEval\">eval</a>, <a href=\"https://socket.dev/pypi/package/regex/alerts/2024.5.15/cp310-cp310-macosx-10-9-universal2-whl?alert_name=filesystemAccess\">filesystem</a>, <a href=\"https://socket.dev/pypi/package/regex/alerts/2024.5.15/cp310-cp310-macosx-10-9-universal2-whl?\">unsafe</a> | <a href=\"https://socket.dev/pypi/package/regex/dependencies/2024.5.15/cp310-cp310-macosx-10-9-universal2-whl\">`0`</a> | 3.48 MB | <a href=\"https://socket.dev/pypi/user/mrabarnett\">mrabarnett</a> |\n| [pypi/urllib3@2.2.2](https://socket.dev/pypi/package/urllib3/overview/2.2.2/tar-gz) | <a href=\"https://socket.dev/pypi/package/urllib3/alerts/2.2.2/tar-gz?alert_name=envVars\">environment</a>, <a href=\"https://socket.dev/pypi/package/urllib3/alerts/2.2.2/tar-gz?alert_name=usesEval\">eval</a>, <a href=\"https://socket.dev/pypi/package/urllib3/alerts/2.2.2/tar-gz?alert_name=filesystemAccess\">filesystem</a>, <a href=\"https://socket.dev/pypi/package/urllib3/alerts/2.2.2/tar-gz?alert_name=networkAccess\">network</a>, <a href=\"https://socket.dev/pypi/package/urllib3/alerts/2.2.2/tar-gz?alert_name=shellAccess\">shell</a>, <a href=\"https://socket.dev/pypi/package/urllib3/alerts/2.2.2/tar-gz?\">unsafe</a> | <a href=\"https://socket.dev/pypi/package/urllib3/dependencies/2.2.2/tar-gz\">`0`</a> | 1.25 MB | <a href=\"https://socket.dev/pypi/user/SethMichaelLarson\">SethMichaelLarson</a>, <a href=\"https://socket.dev/pypi/user/shazow\">shazow</a> |\n\n\n**\ud83d\udeae Removed packages:** [pypi/sentencepiece@0.1.99](https://socket.dev/pypi/package/sentencepiece/overview/0.1.99/cp310-cp310-macosx-10-9-universal2-whl), [pypi/sentencepiece@0.1.99](https://socket.dev/pypi/package/sentencepiece/overview/0.1.99/cp310-cp310-macosx-10-9-x86-64-whl), [pypi/sentencepiece@0.1.99](https://socket.dev/pypi/package/sentencepiece/overview/0.1.99/cp310-cp310-macosx-11-0-arm64-whl), [pypi/sentencepiece@0.1.99](https://socket.dev/pypi/package/sentencepiece/overview/0.1.99/cp310-cp310-manylinux-2-17-aarch64-manylinux2014-aarch64-whl), [pypi/sentencepiece@0.1.99](https://socket.dev/pypi/package/sentencepiece/overview/0.1.99/cp310-cp310-manylinux-2-17-i686-manylinux2014-i686-whl), [pypi/sentencepiece@0.1.99](https://socket.dev/pypi/package/sentencepiece/overview/0.1.99/cp310-cp310-manylinux-2-17-x86-64-manylinux2014-x86-64-whl), [pypi/sentencepiece@0.1.99](https://socket.dev/pypi/package/sentencepiece/overview/0.1.99/cp310-cp310-win-amd64-whl), [pypi/sentencepiece@0.1.99](https://socket.dev/pypi/package/sentencepiece/overview/0.1.99/cp310-cp310-win32-whl), [pypi/sentencepiece@0.1.99](https://socket.dev/pypi/package/sentencepiece/overview/0.1.99/cp311-cp311-macosx-10-9-universal2-whl), [pypi/sentencepiece@0.1.99](https://socket.dev/pypi/package/sentencepiece/overview/0.1.99/cp311-cp311-macosx-10-9-x86-64-whl), [pypi/sentencepiece@0.1.99](https://socket.dev/pypi/package/sentencepiece/overview/0.1.99/cp311-cp311-macosx-11-0-arm64-whl), [pypi/sentencepiece@0.1.99](https://socket.dev/pypi/package/sentencepiece/overview/0.1.99/cp311-cp311-manylinux-2-17-aarch64-manylinux2014-aarch64-whl), [pypi/sentencepiece@0.1.99](https://socket.dev/pypi/package/sentencepiece/overview/0.1.99/cp311-cp311-manylinux-2-17-i686-manylinux2014-i686-whl), [pypi/sentencepiece@0.1.99](https://socket.dev/pypi/package/sentencepiece/overview/0.1.99/cp311-cp311-manylinux-2-17-x86-64-manylinux2014-x86-64-whl), [pypi/sentencepiece@0.1.99](https://socket.dev/pypi/package/sentencepiece/overview/0.1.99/cp311-cp311-win-amd64-whl), [pypi/sentencepiece@0.1.99](https://socket.dev/pypi/package/sentencepiece/overview/0.1.99/cp311-cp311-win32-whl), [pypi/sentencepiece@0.1.99](https://socket.dev/pypi/package/sentencepiece/overview/0.1.99/cp36-cp36m-macosx-10-9-x86-64-whl), [pypi/sentencepiece@0.1.99](https://socket.dev/pypi/package/sentencepiece/overview/0.1.99/cp36-cp36m-manylinux-2-17-aarch64-manylinux2014-aarch64-whl), [pypi/sentencepiece@0.1.99](https://socket.dev/pypi/package/sentencepiece/overview/0.1.99/cp36-cp36m-manylinux-2-17-i686-manylinux2014-i686-whl), [pypi/sentencepiece@0.1.99](https://socket.dev/pypi/package/sentencepiece/overview/0.1.99/cp36-cp36m-manylinux-2-17-x86-64-manylinux2014-x86-64-whl), [pypi/sentencepiece@0.1.99](https://socket.dev/pypi/package/sentencepiece/overview/0.1.99/cp36-cp36m-win-amd64-whl), [pypi/sentencepiece@0.1.99](https://socket.dev/pypi/package/sentencepiece/overview/0.1.99/cp36-cp36m-win32-whl), [pypi/sentencepiece@0.1.99](https://socket.dev/pypi/package/sentencepiece/overview/0.1.99/cp37-cp37m-macosx-10-9-x86-64-whl), [pypi/sentencepiece@0.1.99](https://socket.dev/pypi/package/sentencepiece/overview/0.1.99/cp37-cp37m-manylinux-2-17-aarch64-manylinux2014-aarch64-whl), [pypi/sentencepiece@0.1.99](https://socket.dev/pypi/package/sentencepiece/overview/0.1.99/cp37-cp37m-manylinux-2-17-i686-manylinux2014-i686-whl), [pypi/sentencepiece@0.1.99](https://socket.dev/pypi/package/sentencepiece/overview/0.1.99/cp37-cp37m-manylinux-2-17-x86-64-manylinux2014-x86-64-whl), [pypi/sentencepiece@0.1.99](https://socket.dev/pypi/package/sentencepiece/overview/0.1.99/cp37-cp37m-win-amd64-whl), [pypi/sentencepiece@0.1.99](https://socket.dev/pypi/package/sentencepiece/overview/0.1.99/cp37-cp37m-win32-whl), [pypi/sentencepiece@0.1.99](https://socket.dev/pypi/package/sentencepiece/overview/0.1.99/cp38-cp38-macosx-10-9-universal2-whl), [pypi/sentencepiece@0.1.99](https://socket.dev/pypi/package/sentencepiece/overview/0.1.99/cp38-cp38-macosx-10-9-x86-64-whl), [pypi/sentencepiece@0.1.99](https://socket.dev/pypi/package/sentencepiece/overview/0.1.99/cp38-cp38-macosx-11-0-arm64-whl), [pypi/sentencepiece@0.1.99](https://socket.dev/pypi/package/sentencepiece/overview/0.1.99/cp38-cp38-manylinux-2-17-aarch64-manylinux2014-aarch64-whl), [pypi/sentencepiece@0.1.99](https://socket.dev/pypi/package/sentencepiece/overview/0.1.99/cp38-cp38-manylinux-2-17-i686-manylinux2014-i686-whl), [pypi/sentencepiece@0.1.99](https://socket.dev/pypi/package/sentencepiece/overview/0.1.99/cp38-cp38-manylinux-2-17-x86-64-manylinux2014-x86-64-whl), [pypi/sentencepiece@0.1.99](https://socket.dev/pypi/package/sentencepiece/overview/0.1.99/cp38-cp38-win-amd64-whl), [pypi/sentencepiece@0.1.99](https://socket.dev/pypi/package/sentencepiece/overview/0.1.99/cp38-cp38-win32-whl), [pypi/sentencepiece@0.1.99](https://socket.dev/pypi/package/sentencepiece/overview/0.1.99/cp39-cp39-macosx-10-9-universal2-whl), [pypi/sentencepiece@0.1.99](https://socket.dev/pypi/package/sentencepiece/overview/0.1.99/cp39-cp39-macosx-10-9-x86-64-whl), [pypi/sentencepiece@0.1.99](https://socket.dev/pypi/package/sentencepiece/overview/0.1.99/cp39-cp39-macosx-11-0-arm64-whl), [pypi/sentencepiece@0.1.99](https://socket.dev/pypi/package/sentencepiece/overview/0.1.99/cp39-cp39-manylinux-2-17-aarch64-manylinux2014-aarch64-whl), [pypi/sentencepiece@0.1.99](https://socket.dev/pypi/package/sentencepiece/overview/0.1.99/cp39-cp39-manylinux-2-17-i686-manylinux2014-i686-whl), [pypi/sentencepiece@0.1.99](https://socket.dev/pypi/package/sentencepiece/overview/0.1.99/cp39-cp39-manylinux-2-17-x86-64-manylinux2014-x86-64-whl), [pypi/sentencepiece@0.1.99](https://socket.dev/pypi/package/sentencepiece/overview/0.1.99/cp39-cp39-win-amd64-whl), [pypi/sentencepiece@0.1.99](https://socket.dev/pypi/package/sentencepiece/overview/0.1.99/cp39-cp39-win32-whl), [pypi/sentencepiece@0.1.99](https://socket.dev/pypi/package/sentencepiece/overview/0.1.99/tar-gz)\n\n\n[**View full report\u2197\ufe0e**](https://socket.dev/dashboard/org/mistralai/diff/d528733e-10c2-4543-83da-80cedd9f5e79/e6cfc80c-90b5-4f4f-a84c-8a5937c5bbd3)",
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/issues/comments/2236808742/reactions",
          "total_count": 0,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "performed_via_github_app": {
          "id": 156372,
          "client_id": "Iv1.0dc8bfb0ebf2ec17",
          "slug": "socket-security",
          "node_id": "A_kwHOBCHXrM4AAmLU",
          "owner": {
            "login": "SocketDev",
            "id": 69326764,
            "node_id": "MDEyOk9yZ2FuaXphdGlvbjY5MzI2NzY0",
            "avatar_url": "https://avatars.githubusercontent.com/u/69326764?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/SocketDev",
            "html_url": "https://github.com/SocketDev",
            "followers_url": "https://api.github.com/users/SocketDev/followers",
            "following_url": "https://api.github.com/users/SocketDev/following{/other_user}",
            "gists_url": "https://api.github.com/users/SocketDev/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/SocketDev/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/SocketDev/subscriptions",
            "organizations_url": "https://api.github.com/users/SocketDev/orgs",
            "repos_url": "https://api.github.com/users/SocketDev/repos",
            "events_url": "https://api.github.com/users/SocketDev/events{/privacy}",
            "received_events_url": "https://api.github.com/users/SocketDev/received_events",
            "type": "Organization",
            "user_view_type": "public",
            "site_admin": false
          },
          "name": "Socket Security",
          "description": "### Socket protects your app from malicious dependencies lurking in your open source supply chain.\r\n\r\nOpen source code makes up 90% of most codebases. It is critical to manage it effectively to reduce your security risk.\r\n\r\n## Detect and block open source supply chain attacks\r\n\r\nSecurity teams depend on Socket to prevent malicious open source dependencies from infiltrating their apps.\r\n\r\nSocket dramatically improves your open source security posture by _detecting and blocking the attacks you don't expect_ \u2013 malware, install scripts, hidden code, typo-squatting, and more \u2013 which aren't caught by traditional vulnerability scanners.\r\n\r\n- **Block malware** \u2013 Block emerging malware threats\r\n\r\n- **Block typo-squatting** \u2013 Block malicious packages that differ in name by only a few characters, and recommend the correct package\r\n\r\n- **Detect hidden code** \u2013 Detect obfuscated, minified, or hidden code\r\n\r\n- **Detect privileged API usage** \u2013 Report when a dependency update introduces new risky API usage \u2013 filesystem, network, child_process, eval()\r\n\r\n- **Detect suspicious updates** \u2013 Sudden inclusion of privileged APIs in patch or minor releases\r\n\r\nSocket currently [supports 60 detections](https://socket.dev/npm/issue) in 5 categories: supply chain risk, quality, maintenance, known vulnerabilities, and license problems.\r\n\r\n## Take charge of your dependency health\r\n\r\nSocket improves security outcomes and reduces work for security teams by **surfacing actionable security information directly inline in GitHub** so developers are empowered to make better decisions.\r\n\r\n- **Five minute deployment** \u2013 The easiest security product you'll ever deploy in your organization. Just install a GitHub app and you're done.\r\n\r\n- **Provide security feedback directly on PRs** \u2013 Empower developers to solve security issues before they're deployed into production.\r\n\r\n- **Automated security** \u2013 Spend security team resources auditing the highest-impact dependencies, instead of all or nothing.\r\n\r\n## Socket detects what vulnerability scanners can\u2019t\r\n\r\nIt's no longer sufficient to scan for known vulnerabilities (CVEs) and stop there. And yet, that's what the leading \"supply chain security\" products do, leaving you vulnerable.\r\n\r\nIt can take weeks or months for a CVE to be discovered, reported, and detected by tools. But in today's culture of fast development, a malicious dependency can be updated, merged, and running in production in days or even sometimes hours.\r\n\r\nDefenders need a new approach to address emerging threats from malicious dependencies:\r\n\r\n- **Maintainer intentionally added malware** \u2013 Rogue maintainer sabotaged his own open source package with 100M downloads/month, affecting companies such as Amazon AWS\r\n\r\n- **Package hijacked and poisoned w/ cryptominers and password-stealing malware** \u2013 Deliberate malware introduced into multiple packages with 30M downloads/month each\r\n\r\n- **Package hijacked to add backdoor targeting a specific organization** \u2013 Obfuscated malware added to a dependency which targeted a single company, went undetected for over a week, and made it into their production build\r\n\r\n- **NPM package manager allowed anyone to publish new versions of any package** \u2013 Attackers could publish new versions of any NPM package without authorization _for multiple years_\r\n\r\nUsing third-party dependencies without proper vetting leaves you open to hacking, breaches, and assorted security misfortune.",
          "external_url": "https://socket.dev",
          "html_url": "https://github.com/apps/socket-security",
          "created_at": "2021-12-04T00:33:05Z",
          "updated_at": "2023-03-08T20:20:07Z",
          "permissions": {
            "checks": "write",
            "contents": "read",
            "emails": "read",
            "issues": "read",
            "members": "read",
            "metadata": "read",
            "pull_requests": "write"
          },
          "events": [
            "check_run",
            "check_suite",
            "issue_comment",
            "member",
            "organization",
            "public",
            "pull_request",
            "push",
            "repository"
          ]
        }
      },
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/issues/comments/2236851283",
        "html_url": "https://github.com/mistralai/mistral-common/pull/30#issuecomment-2236851283",
        "issue_url": "https://api.github.com/repos/mistralai/mistral-common/issues/30",
        "id": 2236851283,
        "node_id": "IC_kwDOLuT1gc6FU6RT",
        "user": {
          "login": "jean-malo",
          "id": 56539593,
          "node_id": "MDQ6VXNlcjU2NTM5NTkz",
          "avatar_url": "https://avatars.githubusercontent.com/u/56539593?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/jean-malo",
          "html_url": "https://github.com/jean-malo",
          "followers_url": "https://api.github.com/users/jean-malo/followers",
          "following_url": "https://api.github.com/users/jean-malo/following{/other_user}",
          "gists_url": "https://api.github.com/users/jean-malo/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/jean-malo/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/jean-malo/subscriptions",
          "organizations_url": "https://api.github.com/users/jean-malo/orgs",
          "repos_url": "https://api.github.com/users/jean-malo/repos",
          "events_url": "https://api.github.com/users/jean-malo/events{/privacy}",
          "received_events_url": "https://api.github.com/users/jean-malo/received_events",
          "type": "User",
          "user_view_type": "public",
          "site_admin": false
        },
        "created_at": "2024-07-18T15:22:27Z",
        "updated_at": "2024-07-18T15:22:27Z",
        "author_association": "CONTRIBUTOR",
        "body": "> Very nice tests! Quite some boilerplate code in the tests (maybe we could use global variables instead?).\r\n\r\nWe could but they have slight variations (eg. tekken doesn't have ` ` between special tokens but keeps the space in regular text while sentencepiece has `_` everywhere. So it's a bit annoying and the templates would look quite convoluted, I think repetition is ok in tests as it makes debugging slightly easier ",
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/issues/comments/2236851283/reactions",
          "total_count": 0,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "performed_via_github_app": null
      },
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/issues/comments/2236852328",
        "html_url": "https://github.com/mistralai/mistral-common/pull/30#issuecomment-2236852328",
        "issue_url": "https://api.github.com/repos/mistralai/mistral-common/issues/30",
        "id": 2236852328,
        "node_id": "IC_kwDOLuT1gc6FU6ho",
        "user": {
          "login": "jean-malo",
          "id": 56539593,
          "node_id": "MDQ6VXNlcjU2NTM5NTkz",
          "avatar_url": "https://avatars.githubusercontent.com/u/56539593?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/jean-malo",
          "html_url": "https://github.com/jean-malo",
          "followers_url": "https://api.github.com/users/jean-malo/followers",
          "following_url": "https://api.github.com/users/jean-malo/following{/other_user}",
          "gists_url": "https://api.github.com/users/jean-malo/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/jean-malo/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/jean-malo/subscriptions",
          "organizations_url": "https://api.github.com/users/jean-malo/orgs",
          "repos_url": "https://api.github.com/users/jean-malo/repos",
          "events_url": "https://api.github.com/users/jean-malo/events{/privacy}",
          "received_events_url": "https://api.github.com/users/jean-malo/received_events",
          "type": "User",
          "user_view_type": "public",
          "site_admin": false
        },
        "created_at": "2024-07-18T15:22:58Z",
        "updated_at": "2024-07-18T15:22:58Z",
        "author_association": "CONTRIBUTOR",
        "body": "If you have a simple template example, happy to implement it but the ones I came up with just made it worse ",
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/issues/comments/2236852328/reactions",
          "total_count": 0,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "performed_via_github_app": null
      },
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/issues/comments/2236892294",
        "html_url": "https://github.com/mistralai/mistral-common/pull/30#issuecomment-2236892294",
        "issue_url": "https://api.github.com/repos/mistralai/mistral-common/issues/30",
        "id": 2236892294,
        "node_id": "IC_kwDOLuT1gc6FVESG",
        "user": {
          "login": "patrickvonplaten",
          "id": 23423619,
          "node_id": "MDQ6VXNlcjIzNDIzNjE5",
          "avatar_url": "https://avatars.githubusercontent.com/u/23423619?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/patrickvonplaten",
          "html_url": "https://github.com/patrickvonplaten",
          "followers_url": "https://api.github.com/users/patrickvonplaten/followers",
          "following_url": "https://api.github.com/users/patrickvonplaten/following{/other_user}",
          "gists_url": "https://api.github.com/users/patrickvonplaten/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/patrickvonplaten/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/patrickvonplaten/subscriptions",
          "organizations_url": "https://api.github.com/users/patrickvonplaten/orgs",
          "repos_url": "https://api.github.com/users/patrickvonplaten/repos",
          "events_url": "https://api.github.com/users/patrickvonplaten/events{/privacy}",
          "received_events_url": "https://api.github.com/users/patrickvonplaten/received_events",
          "type": "User",
          "user_view_type": "public",
          "site_admin": false
        },
        "created_at": "2024-07-18T15:42:02Z",
        "updated_at": "2024-07-18T15:42:43Z",
        "author_association": "CONTRIBUTOR",
        "body": "> > Very nice tests! Quite some boilerplate code in the tests (maybe we could use global variables instead?).\r\n> \r\n> We could but they have slight variations (eg. tekken doesn't have ` ` between special tokens but keeps the space in regular text while sentencepiece has `_` everywhere. So it's a bit annoying and the templates would look quite convoluted, I think repetition is ok in tests as it makes debugging slightly easier\r\n\r\nGuess template would nicely show the differences (maybe just as follows):\r\n\r\n```py\r\nFN_CALL_TEMPLATE = '[TOOL_RESULTS]\u2581{\"content\":{ }\"d\",{ }\"call_id\"{ }\"3\"}[/TOOL_RESULTS]',\r\n```\r\n\r\nand then later:\r\n\r\n```py\r\nFN_CALL_TEMPLATE.format(...)\r\n```\r\n\r\nBut also ok for me to leave as is\r\n\r\n\r\n**Update**: Ah actually might be difficult given that {} is already used for something else in the string",
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/issues/comments/2236892294/reactions",
          "total_count": 0,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "performed_via_github_app": null
      },
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/issues/comments/2237142286",
        "html_url": "https://github.com/mistralai/mistral-common/pull/30#issuecomment-2237142286",
        "issue_url": "https://api.github.com/repos/mistralai/mistral-common/issues/30",
        "id": 2237142286,
        "node_id": "IC_kwDOLuT1gc6FWBUO",
        "user": {
          "login": "jean-malo",
          "id": 56539593,
          "node_id": "MDQ6VXNlcjU2NTM5NTkz",
          "avatar_url": "https://avatars.githubusercontent.com/u/56539593?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/jean-malo",
          "html_url": "https://github.com/jean-malo",
          "followers_url": "https://api.github.com/users/jean-malo/followers",
          "following_url": "https://api.github.com/users/jean-malo/following{/other_user}",
          "gists_url": "https://api.github.com/users/jean-malo/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/jean-malo/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/jean-malo/subscriptions",
          "organizations_url": "https://api.github.com/users/jean-malo/orgs",
          "repos_url": "https://api.github.com/users/jean-malo/repos",
          "events_url": "https://api.github.com/users/jean-malo/events{/privacy}",
          "received_events_url": "https://api.github.com/users/jean-malo/received_events",
          "type": "User",
          "user_view_type": "public",
          "site_admin": false
        },
        "created_at": "2024-07-18T17:36:37Z",
        "updated_at": "2024-07-18T17:36:37Z",
        "author_association": "CONTRIBUTOR",
        "body": "@patrickvonplaten added some form of template, lmk what you think ",
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/issues/comments/2237142286/reactions",
          "total_count": 0,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "performed_via_github_app": null
      }
    ],
    "review_comments": [
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/1683032570",
        "pull_request_review_id": 2186153736,
        "id": 1683032570,
        "node_id": "PRRC_kwDOLuT1gc5kUQn6",
        "diff_hunk": "@@ -33,6 +33,17 @@ tests = [\"attrs[tests-no-zope]\", \"zope-interface\"]\n tests-mypy = [\"mypy (>=1.6)\", \"pytest-mypy-plugins\"]\n tests-no-zope = [\"attrs[tests-mypy]\", \"cloudpickle\", \"hypothesis\", \"pympler\", \"pytest (>=4.3.0)\", \"pytest-xdist[psutil]\"]\n \n+[[package]]",
        "path": "poetry.lock",
        "commit_id": "76b7905222fd84bd642731bf4a836f0e2a128108",
        "original_commit_id": "7f416ed1f25a55f1244b6cec058695ca544f9a60",
        "user": {
          "login": "patrickvonplaten",
          "id": 23423619,
          "node_id": "MDQ6VXNlcjIzNDIzNjE5",
          "avatar_url": "https://avatars.githubusercontent.com/u/23423619?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/patrickvonplaten",
          "html_url": "https://github.com/patrickvonplaten",
          "followers_url": "https://api.github.com/users/patrickvonplaten/followers",
          "following_url": "https://api.github.com/users/patrickvonplaten/following{/other_user}",
          "gists_url": "https://api.github.com/users/patrickvonplaten/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/patrickvonplaten/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/patrickvonplaten/subscriptions",
          "organizations_url": "https://api.github.com/users/patrickvonplaten/orgs",
          "repos_url": "https://api.github.com/users/patrickvonplaten/repos",
          "events_url": "https://api.github.com/users/patrickvonplaten/events{/privacy}",
          "received_events_url": "https://api.github.com/users/patrickvonplaten/received_events",
          "type": "User",
          "user_view_type": "public",
          "site_admin": false
        },
        "body": "Are all these updates really needed? ",
        "created_at": "2024-07-18T15:15:10Z",
        "updated_at": "2024-07-18T15:15:11Z",
        "html_url": "https://github.com/mistralai/mistral-common/pull/30#discussion_r1683032570",
        "pull_request_url": "https://api.github.com/repos/mistralai/mistral-common/pulls/30",
        "author_association": "CONTRIBUTOR",
        "_links": {
          "self": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/1683032570"
          },
          "html": {
            "href": "https://github.com/mistralai/mistral-common/pull/30#discussion_r1683032570"
          },
          "pull_request": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/30"
          }
        },
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/1683032570/reactions",
          "total_count": 0,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "start_line": null,
        "original_start_line": null,
        "start_side": null,
        "line": 36,
        "original_line": 36,
        "side": "RIGHT",
        "original_position": 4,
        "position": 4,
        "subject_type": "line"
      },
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/1683034260",
        "pull_request_review_id": 2186158122,
        "id": 1683034260,
        "node_id": "PRRC_kwDOLuT1gc5kURCU",
        "diff_hunk": "@@ -205,15 +323,37 @@ def test_tool_message_multiple_shots_with_history(tokenizer: InstructTokenizer)\n         )\n     )\n     _, text = tokenized.tokens, tokenized.text\n-    assert text == (\n-        \"<s>[INST]\u2581a[/INST]\"\n-        '[TOOL_CALLS]\u2581[{\"name\":\u2581\"b\",\u2581\"arguments\":\u2581{},\u2581\"id\":\u2581\"0\"}]</s>[TOOL_RESULTS]\u2581{\"content\":\u2581\"d\",\u2581\"call_id\":\u2581\"0\"}[/TOOL_RESULTS]'\n-        \"\u2581e</s>[INST]\u2581f[/INST]\"\n-        '[TOOL_CALLS]\u2581[{\"name\":\u2581\"b\",\u2581\"arguments\":\u2581{},\u2581\"id\":\u2581\"1\"}]</s>[TOOL_RESULTS]\u2581{\"content\":\u2581\"d\",\u2581\"call_id\":\u2581\"1\"}[/TOOL_RESULTS]'\n-    )\n+    assert text == expected_text\n \n \n-def test_tool_message_multiple_calls(tokenizer: InstructTokenizer) -> None:\n+@pytest.mark.parametrize(\n+    \"tokenizer, expected_text\",\n+    [\n+        (\n+            tokenizer(),\n+            \"<s>[INST]\u2581a[/INST]\"\n+            '[TOOL_CALLS]\u2581[{\"name\":\u2581\"b\",\u2581\"arguments\":\u2581{},\u2581\"id\":\u2581\"0\"},\u2581{\"name\":\u2581\"q\",\u2581\"arguments\":\u2581{},\u2581\"id\":\u2581\"1\"}]</s>'\n+            '[TOOL_RESULTS]\u2581{\"content\":\u2581\"d\",\u2581\"call_id\":\u2581\"0\"}[/TOOL_RESULTS]'\n+            '[TOOL_RESULTS]\u2581{\"content\":\u2581\"d\",\u2581\"call_id\":\u2581\"1\"}[/TOOL_RESULTS]'\n+            \"\u2581e</s>[INST]\u2581f[/INST]\"\n+            '[TOOL_CALLS]\u2581[{\"name\":\u2581\"b\",\u2581\"arguments\":\u2581{},\u2581\"id\":\u2581\"2\"},\u2581{\"name\":\u2581\"q\",\u2581\"arguments\":\u2581{},\u2581\"id\":\u2581\"3\"}]</s>'\n+            '[TOOL_RESULTS]\u2581{\"content\":\u2581\"d\",\u2581\"call_id\":\u2581\"2\"}[/TOOL_RESULTS]'\n+            '[TOOL_RESULTS]\u2581{\"content\":\u2581\"d\",\u2581\"call_id\":\u2581\"3\"}[/TOOL_RESULTS]',",
        "path": "tests/test_tokenize_v3.py",
        "commit_id": "76b7905222fd84bd642731bf4a836f0e2a128108",
        "original_commit_id": "7f416ed1f25a55f1244b6cec058695ca544f9a60",
        "user": {
          "login": "patrickvonplaten",
          "id": 23423619,
          "node_id": "MDQ6VXNlcjIzNDIzNjE5",
          "avatar_url": "https://avatars.githubusercontent.com/u/23423619?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/patrickvonplaten",
          "html_url": "https://github.com/patrickvonplaten",
          "followers_url": "https://api.github.com/users/patrickvonplaten/followers",
          "following_url": "https://api.github.com/users/patrickvonplaten/following{/other_user}",
          "gists_url": "https://api.github.com/users/patrickvonplaten/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/patrickvonplaten/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/patrickvonplaten/subscriptions",
          "organizations_url": "https://api.github.com/users/patrickvonplaten/orgs",
          "repos_url": "https://api.github.com/users/patrickvonplaten/repos",
          "events_url": "https://api.github.com/users/patrickvonplaten/events{/privacy}",
          "received_events_url": "https://api.github.com/users/patrickvonplaten/received_events",
          "type": "User",
          "user_view_type": "public",
          "site_admin": false
        },
        "body": "(nit) could we maybe define these templates above:\r\n\r\n```py\r\nTEST_TOOL_TEMPLATES = ...\r\n\r\n```\r\n\r\nit could make it easier to read and maintain",
        "created_at": "2024-07-18T15:16:16Z",
        "updated_at": "2024-07-18T15:16:17Z",
        "html_url": "https://github.com/mistralai/mistral-common/pull/30#discussion_r1683034260",
        "pull_request_url": "https://api.github.com/repos/mistralai/mistral-common/pulls/30",
        "author_association": "CONTRIBUTOR",
        "_links": {
          "self": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/1683034260"
          },
          "html": {
            "href": "https://github.com/mistralai/mistral-common/pull/30#discussion_r1683034260"
          },
          "pull_request": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/30"
          }
        },
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/1683034260/reactions",
          "total_count": 0,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "start_line": null,
        "original_start_line": 339,
        "start_side": "RIGHT",
        "line": null,
        "original_line": 341,
        "side": "RIGHT",
        "original_position": 314,
        "position": null,
        "subject_type": "line"
      },
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/1683035203",
        "pull_request_review_id": 2186160787,
        "id": 1683035203,
        "node_id": "PRRC_kwDOLuT1gc5kURRD",
        "diff_hunk": "@@ -33,6 +33,17 @@ tests = [\"attrs[tests-no-zope]\", \"zope-interface\"]\n tests-mypy = [\"mypy (>=1.6)\", \"pytest-mypy-plugins\"]\n tests-no-zope = [\"attrs[tests-mypy]\", \"cloudpickle\", \"hypothesis\", \"pympler\", \"pytest (>=4.3.0)\", \"pytest-xdist[psutil]\"]\n \n+[[package]]",
        "path": "poetry.lock",
        "commit_id": "76b7905222fd84bd642731bf4a836f0e2a128108",
        "original_commit_id": "7f416ed1f25a55f1244b6cec058695ca544f9a60",
        "user": {
          "login": "jean-malo",
          "id": 56539593,
          "node_id": "MDQ6VXNlcjU2NTM5NTkz",
          "avatar_url": "https://avatars.githubusercontent.com/u/56539593?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/jean-malo",
          "html_url": "https://github.com/jean-malo",
          "followers_url": "https://api.github.com/users/jean-malo/followers",
          "following_url": "https://api.github.com/users/jean-malo/following{/other_user}",
          "gists_url": "https://api.github.com/users/jean-malo/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/jean-malo/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/jean-malo/subscriptions",
          "organizations_url": "https://api.github.com/users/jean-malo/orgs",
          "repos_url": "https://api.github.com/users/jean-malo/repos",
          "events_url": "https://api.github.com/users/jean-malo/events{/privacy}",
          "received_events_url": "https://api.github.com/users/jean-malo/received_events",
          "type": "User",
          "user_view_type": "public",
          "site_admin": false
        },
        "body": "This commit didn't lock the files\r\nhttps://github.com/mistralai/mistral-common/commit/d991efa48285b80cbe8c3b1b84043826732c60e4",
        "created_at": "2024-07-18T15:16:56Z",
        "updated_at": "2024-07-18T15:16:57Z",
        "html_url": "https://github.com/mistralai/mistral-common/pull/30#discussion_r1683035203",
        "pull_request_url": "https://api.github.com/repos/mistralai/mistral-common/pulls/30",
        "author_association": "CONTRIBUTOR",
        "_links": {
          "self": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/1683035203"
          },
          "html": {
            "href": "https://github.com/mistralai/mistral-common/pull/30#discussion_r1683035203"
          },
          "pull_request": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/30"
          }
        },
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/1683035203/reactions",
          "total_count": 0,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "start_line": null,
        "original_start_line": null,
        "start_side": null,
        "line": 36,
        "original_line": 36,
        "side": "RIGHT",
        "in_reply_to_id": 1683032570,
        "original_position": 4,
        "position": 4,
        "subject_type": "line"
      }
    ]
  },
  "29": {
    "issue_comments": [
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/issues/comments/2236806367",
        "html_url": "https://github.com/mistralai/mistral-common/pull/29#issuecomment-2236806367",
        "issue_url": "https://api.github.com/repos/mistralai/mistral-common/issues/29",
        "id": 2236806367,
        "node_id": "IC_kwDOLuT1gc6FUvTf",
        "user": {
          "login": "socket-security[bot]",
          "id": 95510084,
          "node_id": "BOT_kgDOBbFeRA",
          "avatar_url": "https://avatars.githubusercontent.com/in/156372?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/socket-security%5Bbot%5D",
          "html_url": "https://github.com/apps/socket-security",
          "followers_url": "https://api.github.com/users/socket-security%5Bbot%5D/followers",
          "following_url": "https://api.github.com/users/socket-security%5Bbot%5D/following{/other_user}",
          "gists_url": "https://api.github.com/users/socket-security%5Bbot%5D/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/socket-security%5Bbot%5D/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/socket-security%5Bbot%5D/subscriptions",
          "organizations_url": "https://api.github.com/users/socket-security%5Bbot%5D/orgs",
          "repos_url": "https://api.github.com/users/socket-security%5Bbot%5D/repos",
          "events_url": "https://api.github.com/users/socket-security%5Bbot%5D/events{/privacy}",
          "received_events_url": "https://api.github.com/users/socket-security%5Bbot%5D/received_events",
          "type": "Bot",
          "user_view_type": "public",
          "site_admin": false
        },
        "created_at": "2024-07-18T15:02:42Z",
        "updated_at": "2024-07-18T15:02:42Z",
        "author_association": "NONE",
        "body": "<!-- overview-comment -->\n**New and removed dependencies detected.** Learn more about [Socket for GitHub \u2197\ufe0e](https://socket.dev?utm_medium=gh)\n\n\n| Package | New capabilities | Transitives | Size | Publisher |\n|:--- |:--- |:--- |:--- |:--- |\n| [pypi/certifi@2024.7.4](https://socket.dev/pypi/package/certifi/overview/2024.7.4/tar-gz) | <a href=\"https://socket.dev/pypi/package/certifi/alerts/2024.7.4/tar-gz?alert_name=filesystemAccess\">filesystem</a> | <a href=\"https://socket.dev/pypi/package/certifi/dependencies/2024.7.4/tar-gz\">`0`</a> | 306 kB | <a href=\"https://socket.dev/pypi/user/Lukasa\">Lukasa</a> |\n| [pypi/charset-normalizer@3.3.2](https://socket.dev/pypi/package/charset-normalizer/overview/3.3.2/cp310-cp310-macosx-10-9-universal2-whl) | <a href=\"https://socket.dev/pypi/package/charset-normalizer/alerts/3.3.2/cp310-cp310-macosx-10-9-universal2-whl?alert_name=envVars\">environment</a>, <a href=\"https://socket.dev/pypi/package/charset-normalizer/alerts/3.3.2/cp310-cp310-macosx-10-9-universal2-whl?alert_name=usesEval\">eval</a>, <a href=\"https://socket.dev/pypi/package/charset-normalizer/alerts/3.3.2/cp310-cp310-macosx-10-9-universal2-whl?alert_name=filesystemAccess\">filesystem</a> | <a href=\"https://socket.dev/pypi/package/charset-normalizer/dependencies/3.3.2/cp310-cp310-macosx-10-9-universal2-whl\">`0`</a> | 762 kB | <a href=\"https://socket.dev/pypi/user/Ousret\">Ousret</a> |\n| [pypi/idna@3.7](https://socket.dev/pypi/package/idna/overview/3.7/tar-gz) | <a href=\"https://socket.dev/pypi/package/idna/alerts/3.7/tar-gz?alert_name=filesystemAccess\">filesystem</a>, <a href=\"https://socket.dev/pypi/package/idna/alerts/3.7/tar-gz?alert_name=networkAccess\">network</a> | <a href=\"https://socket.dev/pypi/package/idna/dependencies/3.7/tar-gz\">`0`</a> | 1.1 MB | <a href=\"https://socket.dev/pypi/user/kjd\">kjd</a> |\n| [pypi/regex@2024.5.15](https://socket.dev/pypi/package/regex/overview/2024.5.15/cp310-cp310-macosx-10-9-universal2-whl) | <a href=\"https://socket.dev/pypi/package/regex/alerts/2024.5.15/cp310-cp310-macosx-10-9-universal2-whl?alert_name=usesEval\">eval</a>, <a href=\"https://socket.dev/pypi/package/regex/alerts/2024.5.15/cp310-cp310-macosx-10-9-universal2-whl?alert_name=filesystemAccess\">filesystem</a>, <a href=\"https://socket.dev/pypi/package/regex/alerts/2024.5.15/cp310-cp310-macosx-10-9-universal2-whl?\">unsafe</a> | <a href=\"https://socket.dev/pypi/package/regex/dependencies/2024.5.15/cp310-cp310-macosx-10-9-universal2-whl\">`0`</a> | 3.48 MB | <a href=\"https://socket.dev/pypi/user/mrabarnett\">mrabarnett</a> |\n| [pypi/urllib3@2.2.2](https://socket.dev/pypi/package/urllib3/overview/2.2.2/tar-gz) | <a href=\"https://socket.dev/pypi/package/urllib3/alerts/2.2.2/tar-gz?alert_name=envVars\">environment</a>, <a href=\"https://socket.dev/pypi/package/urllib3/alerts/2.2.2/tar-gz?alert_name=usesEval\">eval</a>, <a href=\"https://socket.dev/pypi/package/urllib3/alerts/2.2.2/tar-gz?alert_name=filesystemAccess\">filesystem</a>, <a href=\"https://socket.dev/pypi/package/urllib3/alerts/2.2.2/tar-gz?alert_name=networkAccess\">network</a>, <a href=\"https://socket.dev/pypi/package/urllib3/alerts/2.2.2/tar-gz?alert_name=shellAccess\">shell</a>, <a href=\"https://socket.dev/pypi/package/urllib3/alerts/2.2.2/tar-gz?\">unsafe</a> | <a href=\"https://socket.dev/pypi/package/urllib3/dependencies/2.2.2/tar-gz\">`0`</a> | 1.25 MB | <a href=\"https://socket.dev/pypi/user/SethMichaelLarson\">SethMichaelLarson</a>, <a href=\"https://socket.dev/pypi/user/shazow\">shazow</a> |\n\n\n**\ud83d\udeae Removed packages:** [pypi/sentencepiece@0.1.99](https://socket.dev/pypi/package/sentencepiece/overview/0.1.99/cp310-cp310-macosx-10-9-universal2-whl), [pypi/sentencepiece@0.1.99](https://socket.dev/pypi/package/sentencepiece/overview/0.1.99/cp310-cp310-macosx-10-9-x86-64-whl), [pypi/sentencepiece@0.1.99](https://socket.dev/pypi/package/sentencepiece/overview/0.1.99/cp310-cp310-macosx-11-0-arm64-whl), [pypi/sentencepiece@0.1.99](https://socket.dev/pypi/package/sentencepiece/overview/0.1.99/cp310-cp310-manylinux-2-17-aarch64-manylinux2014-aarch64-whl), [pypi/sentencepiece@0.1.99](https://socket.dev/pypi/package/sentencepiece/overview/0.1.99/cp310-cp310-manylinux-2-17-i686-manylinux2014-i686-whl), [pypi/sentencepiece@0.1.99](https://socket.dev/pypi/package/sentencepiece/overview/0.1.99/cp310-cp310-manylinux-2-17-x86-64-manylinux2014-x86-64-whl), [pypi/sentencepiece@0.1.99](https://socket.dev/pypi/package/sentencepiece/overview/0.1.99/cp310-cp310-win-amd64-whl), [pypi/sentencepiece@0.1.99](https://socket.dev/pypi/package/sentencepiece/overview/0.1.99/cp310-cp310-win32-whl), [pypi/sentencepiece@0.1.99](https://socket.dev/pypi/package/sentencepiece/overview/0.1.99/cp311-cp311-macosx-10-9-universal2-whl), [pypi/sentencepiece@0.1.99](https://socket.dev/pypi/package/sentencepiece/overview/0.1.99/cp311-cp311-macosx-10-9-x86-64-whl), [pypi/sentencepiece@0.1.99](https://socket.dev/pypi/package/sentencepiece/overview/0.1.99/cp311-cp311-macosx-11-0-arm64-whl), [pypi/sentencepiece@0.1.99](https://socket.dev/pypi/package/sentencepiece/overview/0.1.99/cp311-cp311-manylinux-2-17-aarch64-manylinux2014-aarch64-whl), [pypi/sentencepiece@0.1.99](https://socket.dev/pypi/package/sentencepiece/overview/0.1.99/cp311-cp311-manylinux-2-17-i686-manylinux2014-i686-whl), [pypi/sentencepiece@0.1.99](https://socket.dev/pypi/package/sentencepiece/overview/0.1.99/cp311-cp311-manylinux-2-17-x86-64-manylinux2014-x86-64-whl), [pypi/sentencepiece@0.1.99](https://socket.dev/pypi/package/sentencepiece/overview/0.1.99/cp311-cp311-win-amd64-whl), [pypi/sentencepiece@0.1.99](https://socket.dev/pypi/package/sentencepiece/overview/0.1.99/cp311-cp311-win32-whl), [pypi/sentencepiece@0.1.99](https://socket.dev/pypi/package/sentencepiece/overview/0.1.99/cp36-cp36m-macosx-10-9-x86-64-whl), [pypi/sentencepiece@0.1.99](https://socket.dev/pypi/package/sentencepiece/overview/0.1.99/cp36-cp36m-manylinux-2-17-aarch64-manylinux2014-aarch64-whl), [pypi/sentencepiece@0.1.99](https://socket.dev/pypi/package/sentencepiece/overview/0.1.99/cp36-cp36m-manylinux-2-17-i686-manylinux2014-i686-whl), [pypi/sentencepiece@0.1.99](https://socket.dev/pypi/package/sentencepiece/overview/0.1.99/cp36-cp36m-manylinux-2-17-x86-64-manylinux2014-x86-64-whl), [pypi/sentencepiece@0.1.99](https://socket.dev/pypi/package/sentencepiece/overview/0.1.99/cp36-cp36m-win-amd64-whl), [pypi/sentencepiece@0.1.99](https://socket.dev/pypi/package/sentencepiece/overview/0.1.99/cp36-cp36m-win32-whl), [pypi/sentencepiece@0.1.99](https://socket.dev/pypi/package/sentencepiece/overview/0.1.99/cp37-cp37m-macosx-10-9-x86-64-whl), [pypi/sentencepiece@0.1.99](https://socket.dev/pypi/package/sentencepiece/overview/0.1.99/cp37-cp37m-manylinux-2-17-aarch64-manylinux2014-aarch64-whl), [pypi/sentencepiece@0.1.99](https://socket.dev/pypi/package/sentencepiece/overview/0.1.99/cp37-cp37m-manylinux-2-17-i686-manylinux2014-i686-whl), [pypi/sentencepiece@0.1.99](https://socket.dev/pypi/package/sentencepiece/overview/0.1.99/cp37-cp37m-manylinux-2-17-x86-64-manylinux2014-x86-64-whl), [pypi/sentencepiece@0.1.99](https://socket.dev/pypi/package/sentencepiece/overview/0.1.99/cp37-cp37m-win-amd64-whl), [pypi/sentencepiece@0.1.99](https://socket.dev/pypi/package/sentencepiece/overview/0.1.99/cp37-cp37m-win32-whl), [pypi/sentencepiece@0.1.99](https://socket.dev/pypi/package/sentencepiece/overview/0.1.99/cp38-cp38-macosx-10-9-universal2-whl), [pypi/sentencepiece@0.1.99](https://socket.dev/pypi/package/sentencepiece/overview/0.1.99/cp38-cp38-macosx-10-9-x86-64-whl), [pypi/sentencepiece@0.1.99](https://socket.dev/pypi/package/sentencepiece/overview/0.1.99/cp38-cp38-macosx-11-0-arm64-whl), [pypi/sentencepiece@0.1.99](https://socket.dev/pypi/package/sentencepiece/overview/0.1.99/cp38-cp38-manylinux-2-17-aarch64-manylinux2014-aarch64-whl), [pypi/sentencepiece@0.1.99](https://socket.dev/pypi/package/sentencepiece/overview/0.1.99/cp38-cp38-manylinux-2-17-i686-manylinux2014-i686-whl), [pypi/sentencepiece@0.1.99](https://socket.dev/pypi/package/sentencepiece/overview/0.1.99/cp38-cp38-manylinux-2-17-x86-64-manylinux2014-x86-64-whl), [pypi/sentencepiece@0.1.99](https://socket.dev/pypi/package/sentencepiece/overview/0.1.99/cp38-cp38-win-amd64-whl), [pypi/sentencepiece@0.1.99](https://socket.dev/pypi/package/sentencepiece/overview/0.1.99/cp38-cp38-win32-whl), [pypi/sentencepiece@0.1.99](https://socket.dev/pypi/package/sentencepiece/overview/0.1.99/cp39-cp39-macosx-10-9-universal2-whl), [pypi/sentencepiece@0.1.99](https://socket.dev/pypi/package/sentencepiece/overview/0.1.99/cp39-cp39-macosx-10-9-x86-64-whl), [pypi/sentencepiece@0.1.99](https://socket.dev/pypi/package/sentencepiece/overview/0.1.99/cp39-cp39-macosx-11-0-arm64-whl), [pypi/sentencepiece@0.1.99](https://socket.dev/pypi/package/sentencepiece/overview/0.1.99/cp39-cp39-manylinux-2-17-aarch64-manylinux2014-aarch64-whl), [pypi/sentencepiece@0.1.99](https://socket.dev/pypi/package/sentencepiece/overview/0.1.99/cp39-cp39-manylinux-2-17-i686-manylinux2014-i686-whl), [pypi/sentencepiece@0.1.99](https://socket.dev/pypi/package/sentencepiece/overview/0.1.99/cp39-cp39-manylinux-2-17-x86-64-manylinux2014-x86-64-whl), [pypi/sentencepiece@0.1.99](https://socket.dev/pypi/package/sentencepiece/overview/0.1.99/cp39-cp39-win-amd64-whl), [pypi/sentencepiece@0.1.99](https://socket.dev/pypi/package/sentencepiece/overview/0.1.99/cp39-cp39-win32-whl), [pypi/sentencepiece@0.1.99](https://socket.dev/pypi/package/sentencepiece/overview/0.1.99/tar-gz)\n\n\n[**View full report\u2197\ufe0e**](https://socket.dev/dashboard/org/mistralai/diff/77b07f40-9b1b-4f45-9225-5801ef1b2991/721a87c0-0ee8-4823-aff2-875b48592639)",
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/issues/comments/2236806367/reactions",
          "total_count": 0,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "performed_via_github_app": {
          "id": 156372,
          "client_id": "Iv1.0dc8bfb0ebf2ec17",
          "slug": "socket-security",
          "node_id": "A_kwHOBCHXrM4AAmLU",
          "owner": {
            "login": "SocketDev",
            "id": 69326764,
            "node_id": "MDEyOk9yZ2FuaXphdGlvbjY5MzI2NzY0",
            "avatar_url": "https://avatars.githubusercontent.com/u/69326764?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/SocketDev",
            "html_url": "https://github.com/SocketDev",
            "followers_url": "https://api.github.com/users/SocketDev/followers",
            "following_url": "https://api.github.com/users/SocketDev/following{/other_user}",
            "gists_url": "https://api.github.com/users/SocketDev/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/SocketDev/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/SocketDev/subscriptions",
            "organizations_url": "https://api.github.com/users/SocketDev/orgs",
            "repos_url": "https://api.github.com/users/SocketDev/repos",
            "events_url": "https://api.github.com/users/SocketDev/events{/privacy}",
            "received_events_url": "https://api.github.com/users/SocketDev/received_events",
            "type": "Organization",
            "user_view_type": "public",
            "site_admin": false
          },
          "name": "Socket Security",
          "description": "### Socket protects your app from malicious dependencies lurking in your open source supply chain.\r\n\r\nOpen source code makes up 90% of most codebases. It is critical to manage it effectively to reduce your security risk.\r\n\r\n## Detect and block open source supply chain attacks\r\n\r\nSecurity teams depend on Socket to prevent malicious open source dependencies from infiltrating their apps.\r\n\r\nSocket dramatically improves your open source security posture by _detecting and blocking the attacks you don't expect_ \u2013 malware, install scripts, hidden code, typo-squatting, and more \u2013 which aren't caught by traditional vulnerability scanners.\r\n\r\n- **Block malware** \u2013 Block emerging malware threats\r\n\r\n- **Block typo-squatting** \u2013 Block malicious packages that differ in name by only a few characters, and recommend the correct package\r\n\r\n- **Detect hidden code** \u2013 Detect obfuscated, minified, or hidden code\r\n\r\n- **Detect privileged API usage** \u2013 Report when a dependency update introduces new risky API usage \u2013 filesystem, network, child_process, eval()\r\n\r\n- **Detect suspicious updates** \u2013 Sudden inclusion of privileged APIs in patch or minor releases\r\n\r\nSocket currently [supports 60 detections](https://socket.dev/npm/issue) in 5 categories: supply chain risk, quality, maintenance, known vulnerabilities, and license problems.\r\n\r\n## Take charge of your dependency health\r\n\r\nSocket improves security outcomes and reduces work for security teams by **surfacing actionable security information directly inline in GitHub** so developers are empowered to make better decisions.\r\n\r\n- **Five minute deployment** \u2013 The easiest security product you'll ever deploy in your organization. Just install a GitHub app and you're done.\r\n\r\n- **Provide security feedback directly on PRs** \u2013 Empower developers to solve security issues before they're deployed into production.\r\n\r\n- **Automated security** \u2013 Spend security team resources auditing the highest-impact dependencies, instead of all or nothing.\r\n\r\n## Socket detects what vulnerability scanners can\u2019t\r\n\r\nIt's no longer sufficient to scan for known vulnerabilities (CVEs) and stop there. And yet, that's what the leading \"supply chain security\" products do, leaving you vulnerable.\r\n\r\nIt can take weeks or months for a CVE to be discovered, reported, and detected by tools. But in today's culture of fast development, a malicious dependency can be updated, merged, and running in production in days or even sometimes hours.\r\n\r\nDefenders need a new approach to address emerging threats from malicious dependencies:\r\n\r\n- **Maintainer intentionally added malware** \u2013 Rogue maintainer sabotaged his own open source package with 100M downloads/month, affecting companies such as Amazon AWS\r\n\r\n- **Package hijacked and poisoned w/ cryptominers and password-stealing malware** \u2013 Deliberate malware introduced into multiple packages with 30M downloads/month each\r\n\r\n- **Package hijacked to add backdoor targeting a specific organization** \u2013 Obfuscated malware added to a dependency which targeted a single company, went undetected for over a week, and made it into their production build\r\n\r\n- **NPM package manager allowed anyone to publish new versions of any package** \u2013 Attackers could publish new versions of any NPM package without authorization _for multiple years_\r\n\r\nUsing third-party dependencies without proper vetting leaves you open to hacking, breaches, and assorted security misfortune.",
          "external_url": "https://socket.dev",
          "html_url": "https://github.com/apps/socket-security",
          "created_at": "2021-12-04T00:33:05Z",
          "updated_at": "2023-03-08T20:20:07Z",
          "permissions": {
            "checks": "write",
            "contents": "read",
            "emails": "read",
            "issues": "read",
            "members": "read",
            "metadata": "read",
            "pull_requests": "write"
          },
          "events": [
            "check_run",
            "check_suite",
            "issue_comment",
            "member",
            "organization",
            "public",
            "pull_request",
            "push",
            "repository"
          ]
        }
      }
    ],
    "review_comments": []
  },
  "28": {
    "issue_comments": [
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/issues/comments/2236365717",
        "html_url": "https://github.com/mistralai/mistral-common/pull/28#issuecomment-2236365717",
        "issue_url": "https://api.github.com/repos/mistralai/mistral-common/issues/28",
        "id": 2236365717,
        "node_id": "IC_kwDOLuT1gc6FTDuV",
        "user": {
          "login": "socket-security[bot]",
          "id": 95510084,
          "node_id": "BOT_kgDOBbFeRA",
          "avatar_url": "https://avatars.githubusercontent.com/in/156372?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/socket-security%5Bbot%5D",
          "html_url": "https://github.com/apps/socket-security",
          "followers_url": "https://api.github.com/users/socket-security%5Bbot%5D/followers",
          "following_url": "https://api.github.com/users/socket-security%5Bbot%5D/following{/other_user}",
          "gists_url": "https://api.github.com/users/socket-security%5Bbot%5D/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/socket-security%5Bbot%5D/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/socket-security%5Bbot%5D/subscriptions",
          "organizations_url": "https://api.github.com/users/socket-security%5Bbot%5D/orgs",
          "repos_url": "https://api.github.com/users/socket-security%5Bbot%5D/repos",
          "events_url": "https://api.github.com/users/socket-security%5Bbot%5D/events{/privacy}",
          "received_events_url": "https://api.github.com/users/socket-security%5Bbot%5D/received_events",
          "type": "Bot",
          "user_view_type": "public",
          "site_admin": false
        },
        "created_at": "2024-07-18T12:24:39Z",
        "updated_at": "2024-07-18T12:24:39Z",
        "author_association": "NONE",
        "body": "<!-- overview-comment -->\n**New dependencies detected.** Learn more about [Socket for GitHub \u2197\ufe0e](https://socket.dev?utm_medium=gh)\n\n\n| Package | New capabilities | Transitives | Size | Publisher |\n|:--- |:--- |:--- |:--- |:--- |\n| [pypi/tiktoken@0.7.0](https://socket.dev/pypi/package/tiktoken/overview/0.7.0/cp310-cp310-macosx-10-9-x86-64-whl) | <a href=\"https://socket.dev/pypi/package/tiktoken/alerts/0.7.0/cp310-cp310-macosx-10-9-x86-64-whl?alert_name=envVars\">environment</a>, <a href=\"https://socket.dev/pypi/package/tiktoken/alerts/0.7.0/cp310-cp310-macosx-10-9-x86-64-whl?alert_name=filesystemAccess\">filesystem</a>, <a href=\"https://socket.dev/pypi/package/tiktoken/alerts/0.7.0/cp310-cp310-macosx-10-9-x86-64-whl?alert_name=networkAccess\">network</a> | <a href=\"https://socket.dev/pypi/package/tiktoken/dependencies/0.7.0/cp310-cp310-macosx-10-9-x86-64-whl\">`0`</a> | 3.53 MB | <a href=\"https://socket.dev/pypi/user/hauntsaninja\">hauntsaninja</a> |\n\n\n[**View full report\u2197\ufe0e**](https://socket.dev/dashboard/org/mistralai/diff/6d91fb73-3f6e-49bb-94c4-c0af7a7d42e9/e84e26a8-754d-469e-a543-7ef127ae7e58)",
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/issues/comments/2236365717/reactions",
          "total_count": 0,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "performed_via_github_app": {
          "id": 156372,
          "client_id": "Iv1.0dc8bfb0ebf2ec17",
          "slug": "socket-security",
          "node_id": "A_kwHOBCHXrM4AAmLU",
          "owner": {
            "login": "SocketDev",
            "id": 69326764,
            "node_id": "MDEyOk9yZ2FuaXphdGlvbjY5MzI2NzY0",
            "avatar_url": "https://avatars.githubusercontent.com/u/69326764?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/SocketDev",
            "html_url": "https://github.com/SocketDev",
            "followers_url": "https://api.github.com/users/SocketDev/followers",
            "following_url": "https://api.github.com/users/SocketDev/following{/other_user}",
            "gists_url": "https://api.github.com/users/SocketDev/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/SocketDev/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/SocketDev/subscriptions",
            "organizations_url": "https://api.github.com/users/SocketDev/orgs",
            "repos_url": "https://api.github.com/users/SocketDev/repos",
            "events_url": "https://api.github.com/users/SocketDev/events{/privacy}",
            "received_events_url": "https://api.github.com/users/SocketDev/received_events",
            "type": "Organization",
            "user_view_type": "public",
            "site_admin": false
          },
          "name": "Socket Security",
          "description": "### Socket protects your app from malicious dependencies lurking in your open source supply chain.\r\n\r\nOpen source code makes up 90% of most codebases. It is critical to manage it effectively to reduce your security risk.\r\n\r\n## Detect and block open source supply chain attacks\r\n\r\nSecurity teams depend on Socket to prevent malicious open source dependencies from infiltrating their apps.\r\n\r\nSocket dramatically improves your open source security posture by _detecting and blocking the attacks you don't expect_ \u2013 malware, install scripts, hidden code, typo-squatting, and more \u2013 which aren't caught by traditional vulnerability scanners.\r\n\r\n- **Block malware** \u2013 Block emerging malware threats\r\n\r\n- **Block typo-squatting** \u2013 Block malicious packages that differ in name by only a few characters, and recommend the correct package\r\n\r\n- **Detect hidden code** \u2013 Detect obfuscated, minified, or hidden code\r\n\r\n- **Detect privileged API usage** \u2013 Report when a dependency update introduces new risky API usage \u2013 filesystem, network, child_process, eval()\r\n\r\n- **Detect suspicious updates** \u2013 Sudden inclusion of privileged APIs in patch or minor releases\r\n\r\nSocket currently [supports 60 detections](https://socket.dev/npm/issue) in 5 categories: supply chain risk, quality, maintenance, known vulnerabilities, and license problems.\r\n\r\n## Take charge of your dependency health\r\n\r\nSocket improves security outcomes and reduces work for security teams by **surfacing actionable security information directly inline in GitHub** so developers are empowered to make better decisions.\r\n\r\n- **Five minute deployment** \u2013 The easiest security product you'll ever deploy in your organization. Just install a GitHub app and you're done.\r\n\r\n- **Provide security feedback directly on PRs** \u2013 Empower developers to solve security issues before they're deployed into production.\r\n\r\n- **Automated security** \u2013 Spend security team resources auditing the highest-impact dependencies, instead of all or nothing.\r\n\r\n## Socket detects what vulnerability scanners can\u2019t\r\n\r\nIt's no longer sufficient to scan for known vulnerabilities (CVEs) and stop there. And yet, that's what the leading \"supply chain security\" products do, leaving you vulnerable.\r\n\r\nIt can take weeks or months for a CVE to be discovered, reported, and detected by tools. But in today's culture of fast development, a malicious dependency can be updated, merged, and running in production in days or even sometimes hours.\r\n\r\nDefenders need a new approach to address emerging threats from malicious dependencies:\r\n\r\n- **Maintainer intentionally added malware** \u2013 Rogue maintainer sabotaged his own open source package with 100M downloads/month, affecting companies such as Amazon AWS\r\n\r\n- **Package hijacked and poisoned w/ cryptominers and password-stealing malware** \u2013 Deliberate malware introduced into multiple packages with 30M downloads/month each\r\n\r\n- **Package hijacked to add backdoor targeting a specific organization** \u2013 Obfuscated malware added to a dependency which targeted a single company, went undetected for over a week, and made it into their production build\r\n\r\n- **NPM package manager allowed anyone to publish new versions of any package** \u2013 Attackers could publish new versions of any NPM package without authorization _for multiple years_\r\n\r\nUsing third-party dependencies without proper vetting leaves you open to hacking, breaches, and assorted security misfortune.",
          "external_url": "https://socket.dev",
          "html_url": "https://github.com/apps/socket-security",
          "created_at": "2021-12-04T00:33:05Z",
          "updated_at": "2023-03-08T20:20:07Z",
          "permissions": {
            "checks": "write",
            "contents": "read",
            "emails": "read",
            "issues": "read",
            "members": "read",
            "metadata": "read",
            "pull_requests": "write"
          },
          "events": [
            "check_run",
            "check_suite",
            "issue_comment",
            "member",
            "organization",
            "public",
            "pull_request",
            "push",
            "repository"
          ]
        }
      }
    ],
    "review_comments": []
  },
  "26": {
    "issue_comments": [],
    "review_comments": [
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/1682693623",
        "pull_request_review_id": 2185575735,
        "id": 1682693623,
        "node_id": "PRRC_kwDOLuT1gc5kS933",
        "diff_hunk": "@@ -84,6 +85,7 @@ def from_model(cls, model: str) -> MistralTokenizer:\n             \"mistral-large\": MistralTokenizer.v2,\n             \"open-mixtral-8x22b\": MistralTokenizer.v3,\n             \"codestral-22b\": MistralTokenizer.v3,\n+            \"nemostral\": lambda: MistralTokenizer.v3(is_tekken=True),",
        "path": "src/mistral_common/tokens/tokenizers/mistral.py",
        "commit_id": "49582b303bfa6efc2ba86950605e4a45fbda03b3",
        "original_commit_id": "c726553ca4bdfa4c78e47bb31fe452313ab4d932",
        "user": {
          "login": "patrickvonplaten",
          "id": 23423619,
          "node_id": "MDQ6VXNlcjIzNDIzNjE5",
          "avatar_url": "https://avatars.githubusercontent.com/u/23423619?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/patrickvonplaten",
          "html_url": "https://github.com/patrickvonplaten",
          "followers_url": "https://api.github.com/users/patrickvonplaten/followers",
          "following_url": "https://api.github.com/users/patrickvonplaten/following{/other_user}",
          "gists_url": "https://api.github.com/users/patrickvonplaten/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/patrickvonplaten/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/patrickvonplaten/subscriptions",
          "organizations_url": "https://api.github.com/users/patrickvonplaten/orgs",
          "repos_url": "https://api.github.com/users/patrickvonplaten/repos",
          "events_url": "https://api.github.com/users/patrickvonplaten/events{/privacy}",
          "received_events_url": "https://api.github.com/users/patrickvonplaten/received_events",
          "type": "User",
          "user_view_type": "public",
          "site_admin": false
        },
        "body": "```suggestion\r\n            \"mistral-nemo\": lambda: MistralTokenizer.v3(is_tekken=True),\r\n```",
        "created_at": "2024-07-18T11:39:57Z",
        "updated_at": "2024-07-18T11:39:57Z",
        "html_url": "https://github.com/mistralai/mistral-common/pull/26#discussion_r1682693623",
        "pull_request_url": "https://api.github.com/repos/mistralai/mistral-common/pulls/26",
        "author_association": "CONTRIBUTOR",
        "_links": {
          "self": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/1682693623"
          },
          "html": {
            "href": "https://github.com/mistralai/mistral-common/pull/26#discussion_r1682693623"
          },
          "pull_request": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/26"
          }
        },
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/1682693623/reactions",
          "total_count": 0,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "start_line": null,
        "original_start_line": null,
        "start_side": null,
        "line": null,
        "original_line": 88,
        "side": "RIGHT",
        "original_position": 67,
        "position": null,
        "subject_type": "line"
      }
    ]
  },
  "23": {
    "issue_comments": [
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/issues/comments/2182391371",
        "html_url": "https://github.com/mistralai/mistral-common/pull/23#issuecomment-2182391371",
        "issue_url": "https://api.github.com/repos/mistralai/mistral-common/issues/23",
        "id": 2182391371,
        "node_id": "IC_kwDOLuT1gc6CFKZL",
        "user": {
          "login": "pandora-s-git",
          "id": 128635000,
          "node_id": "U_kgDOB6rQeA",
          "avatar_url": "https://avatars.githubusercontent.com/u/128635000?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/pandora-s-git",
          "html_url": "https://github.com/pandora-s-git",
          "followers_url": "https://api.github.com/users/pandora-s-git/followers",
          "following_url": "https://api.github.com/users/pandora-s-git/following{/other_user}",
          "gists_url": "https://api.github.com/users/pandora-s-git/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/pandora-s-git/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/pandora-s-git/subscriptions",
          "organizations_url": "https://api.github.com/users/pandora-s-git/orgs",
          "repos_url": "https://api.github.com/users/pandora-s-git/repos",
          "events_url": "https://api.github.com/users/pandora-s-git/events{/privacy}",
          "received_events_url": "https://api.github.com/users/pandora-s-git/received_events",
          "type": "User",
          "user_view_type": "public",
          "site_admin": false
        },
        "created_at": "2024-06-21T09:36:17Z",
        "updated_at": "2024-06-21T09:36:17Z",
        "author_association": "CONTRIBUTOR",
        "body": "cc @patrickvonplaten sorry to bother, could you review this? with `sentence-piece 0.1.99` mistral common breaks in recent python versions and a lot of envs, plus updating the tokenizers to hopefully the right versions for each model/endpoint",
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/issues/comments/2182391371/reactions",
          "total_count": 0,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "performed_via_github_app": null
      }
    ],
    "review_comments": []
  },
  "21": {
    "issue_comments": [
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/issues/comments/2290446700",
        "html_url": "https://github.com/mistralai/mistral-common/pull/21#issuecomment-2290446700",
        "issue_url": "https://api.github.com/repos/mistralai/mistral-common/issues/21",
        "id": 2290446700,
        "node_id": "IC_kwDOLuT1gc6IhXFs",
        "user": {
          "login": "SCAuFish",
          "id": 34365267,
          "node_id": "MDQ6VXNlcjM0MzY1MjY3",
          "avatar_url": "https://avatars.githubusercontent.com/u/34365267?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/SCAuFish",
          "html_url": "https://github.com/SCAuFish",
          "followers_url": "https://api.github.com/users/SCAuFish/followers",
          "following_url": "https://api.github.com/users/SCAuFish/following{/other_user}",
          "gists_url": "https://api.github.com/users/SCAuFish/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/SCAuFish/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/SCAuFish/subscriptions",
          "organizations_url": "https://api.github.com/users/SCAuFish/orgs",
          "repos_url": "https://api.github.com/users/SCAuFish/repos",
          "events_url": "https://api.github.com/users/SCAuFish/events{/privacy}",
          "received_events_url": "https://api.github.com/users/SCAuFish/received_events",
          "type": "User",
          "user_view_type": "public",
          "site_admin": false
        },
        "created_at": "2024-08-15T02:56:57Z",
        "updated_at": "2024-08-15T02:56:57Z",
        "author_association": "NONE",
        "body": "Thanks Charles for the fixes!\r\nI would suggest combining the few typo-fix PRs into one, so that they are easier to review, as they don't require as much modularization as code change? \r\nI am new to this repo, though, so open to comments from more active contributors.",
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/issues/comments/2290446700/reactions",
          "total_count": 0,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "performed_via_github_app": null
      }
    ],
    "review_comments": []
  },
  "6": {
    "issue_comments": [
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/issues/comments/2165317695",
        "html_url": "https://github.com/mistralai/mistral-common/pull/6#issuecomment-2165317695",
        "issue_url": "https://api.github.com/repos/mistralai/mistral-common/issues/6",
        "id": 2165317695,
        "node_id": "IC_kwDOLuT1gc6BECA_",
        "user": {
          "login": "RoiGlinik",
          "id": 20162469,
          "node_id": "MDQ6VXNlcjIwMTYyNDY5",
          "avatar_url": "https://avatars.githubusercontent.com/u/20162469?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/RoiGlinik",
          "html_url": "https://github.com/RoiGlinik",
          "followers_url": "https://api.github.com/users/RoiGlinik/followers",
          "following_url": "https://api.github.com/users/RoiGlinik/following{/other_user}",
          "gists_url": "https://api.github.com/users/RoiGlinik/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/RoiGlinik/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/RoiGlinik/subscriptions",
          "organizations_url": "https://api.github.com/users/RoiGlinik/orgs",
          "repos_url": "https://api.github.com/users/RoiGlinik/repos",
          "events_url": "https://api.github.com/users/RoiGlinik/events{/privacy}",
          "received_events_url": "https://api.github.com/users/RoiGlinik/received_events",
          "type": "User",
          "user_view_type": "public",
          "site_admin": false
        },
        "created_at": "2024-06-13T10:58:11Z",
        "updated_at": "2024-06-13T10:58:11Z",
        "author_association": "NONE",
        "body": "Is there anything I can do to help merge this?",
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/issues/comments/2165317695/reactions",
          "total_count": 0,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "performed_via_github_app": null
      },
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/issues/comments/2210659932",
        "html_url": "https://github.com/mistralai/mistral-common/pull/6#issuecomment-2210659932",
        "issue_url": "https://api.github.com/repos/mistralai/mistral-common/issues/6",
        "id": 2210659932,
        "node_id": "IC_kwDOLuT1gc6Dw_5c",
        "user": {
          "login": "zffocussss",
          "id": 46145695,
          "node_id": "MDQ6VXNlcjQ2MTQ1Njk1",
          "avatar_url": "https://avatars.githubusercontent.com/u/46145695?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/zffocussss",
          "html_url": "https://github.com/zffocussss",
          "followers_url": "https://api.github.com/users/zffocussss/followers",
          "following_url": "https://api.github.com/users/zffocussss/following{/other_user}",
          "gists_url": "https://api.github.com/users/zffocussss/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/zffocussss/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/zffocussss/subscriptions",
          "organizations_url": "https://api.github.com/users/zffocussss/orgs",
          "repos_url": "https://api.github.com/users/zffocussss/repos",
          "events_url": "https://api.github.com/users/zffocussss/events{/privacy}",
          "received_events_url": "https://api.github.com/users/zffocussss/received_events",
          "type": "User",
          "user_view_type": "public",
          "site_admin": false
        },
        "created_at": "2024-07-05T10:52:21Z",
        "updated_at": "2024-07-05T10:52:21Z",
        "author_association": "NONE",
        "body": "yes we need this upgrade as installation will be interrupted  with python 3.12 in debian.",
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/issues/comments/2210659932/reactions",
          "total_count": 0,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "performed_via_github_app": null
      },
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/issues/comments/2212536117",
        "html_url": "https://github.com/mistralai/mistral-common/pull/6#issuecomment-2212536117",
        "issue_url": "https://api.github.com/repos/mistralai/mistral-common/issues/6",
        "id": 2212536117,
        "node_id": "IC_kwDOLuT1gc6D4J81",
        "user": {
          "login": "pandora-s-git",
          "id": 128635000,
          "node_id": "U_kgDOB6rQeA",
          "avatar_url": "https://avatars.githubusercontent.com/u/128635000?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/pandora-s-git",
          "html_url": "https://github.com/pandora-s-git",
          "followers_url": "https://api.github.com/users/pandora-s-git/followers",
          "following_url": "https://api.github.com/users/pandora-s-git/following{/other_user}",
          "gists_url": "https://api.github.com/users/pandora-s-git/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/pandora-s-git/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/pandora-s-git/subscriptions",
          "organizations_url": "https://api.github.com/users/pandora-s-git/orgs",
          "repos_url": "https://api.github.com/users/pandora-s-git/repos",
          "events_url": "https://api.github.com/users/pandora-s-git/events{/privacy}",
          "received_events_url": "https://api.github.com/users/pandora-s-git/received_events",
          "type": "User",
          "user_view_type": "public",
          "site_admin": false
        },
        "created_at": "2024-07-07T18:46:03Z",
        "updated_at": "2024-07-07T18:46:03Z",
        "author_association": "CONTRIBUTOR",
        "body": "This update has already been done in a previous recent commit \ud83d\ude09",
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/issues/comments/2212536117/reactions",
          "total_count": 0,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "performed_via_github_app": null
      },
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/issues/comments/2212766256",
        "html_url": "https://github.com/mistralai/mistral-common/pull/6#issuecomment-2212766256",
        "issue_url": "https://api.github.com/repos/mistralai/mistral-common/issues/6",
        "id": 2212766256,
        "node_id": "IC_kwDOLuT1gc6D5CIw",
        "user": {
          "login": "zffocussss",
          "id": 46145695,
          "node_id": "MDQ6VXNlcjQ2MTQ1Njk1",
          "avatar_url": "https://avatars.githubusercontent.com/u/46145695?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/zffocussss",
          "html_url": "https://github.com/zffocussss",
          "followers_url": "https://api.github.com/users/zffocussss/followers",
          "following_url": "https://api.github.com/users/zffocussss/following{/other_user}",
          "gists_url": "https://api.github.com/users/zffocussss/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/zffocussss/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/zffocussss/subscriptions",
          "organizations_url": "https://api.github.com/users/zffocussss/orgs",
          "repos_url": "https://api.github.com/users/zffocussss/repos",
          "events_url": "https://api.github.com/users/zffocussss/events{/privacy}",
          "received_events_url": "https://api.github.com/users/zffocussss/received_events",
          "type": "User",
          "user_view_type": "public",
          "site_admin": false
        },
        "created_at": "2024-07-08T01:36:24Z",
        "updated_at": "2024-07-08T01:36:24Z",
        "author_association": "NONE",
        "body": "> This update has already been done in a previous recent commit \ud83d\ude09\r\n\r\nyes we all know it,but we need a new version/tag to pip install.",
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/issues/comments/2212766256/reactions",
          "total_count": 2,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 2
        },
        "performed_via_github_app": null
      },
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/issues/comments/2239525474",
        "html_url": "https://github.com/mistralai/mistral-common/pull/6#issuecomment-2239525474",
        "issue_url": "https://api.github.com/repos/mistralai/mistral-common/issues/6",
        "id": 2239525474,
        "node_id": "IC_kwDOLuT1gc6FfHJi",
        "user": {
          "login": "yiwei-w",
          "id": 20949594,
          "node_id": "MDQ6VXNlcjIwOTQ5NTk0",
          "avatar_url": "https://avatars.githubusercontent.com/u/20949594?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/yiwei-w",
          "html_url": "https://github.com/yiwei-w",
          "followers_url": "https://api.github.com/users/yiwei-w/followers",
          "following_url": "https://api.github.com/users/yiwei-w/following{/other_user}",
          "gists_url": "https://api.github.com/users/yiwei-w/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/yiwei-w/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/yiwei-w/subscriptions",
          "organizations_url": "https://api.github.com/users/yiwei-w/orgs",
          "repos_url": "https://api.github.com/users/yiwei-w/repos",
          "events_url": "https://api.github.com/users/yiwei-w/events{/privacy}",
          "received_events_url": "https://api.github.com/users/yiwei-w/received_events",
          "type": "User",
          "user_view_type": "public",
          "site_admin": false
        },
        "created_at": "2024-07-19T16:08:48Z",
        "updated_at": "2024-07-19T16:08:48Z",
        "author_association": "NONE",
        "body": "Close the request as `sentencepiece` has already been updated in main",
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/issues/comments/2239525474/reactions",
          "total_count": 0,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "performed_via_github_app": null
      }
    ],
    "review_comments": []
  },
  "4": {
    "issue_comments": [],
    "review_comments": [
      {
        "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/1573732672",
        "pull_request_review_id": 2013387382,
        "id": 1573732672,
        "node_id": "PRRC_kwDOLuT1gc5dzUFA",
        "diff_hunk": "@@ -289,6 +289,8 @@ def encode_assistant_message(self, message: AssistantMessage, is_before_last_use\n             ]\n         elif message.content:\n             curr_tokens = self.tokenizer.encode(message.content, bos=False, eos=False)\n+        elif message.content == \"\":\n+            raise TokenizerException(f\"Empty assistant message.\")",
        "path": "src/mistral_common/tokens/tokenizers/sentencepiece.py",
        "commit_id": "e06e82a2026946ba3b84849371e1d934cc4f5c80",
        "original_commit_id": "2a72aef2ca68bef553307f77c434da7871ab1f20",
        "user": {
          "login": "patrickvonplaten",
          "id": 23423619,
          "node_id": "MDQ6VXNlcjIzNDIzNjE5",
          "avatar_url": "https://avatars.githubusercontent.com/u/23423619?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/patrickvonplaten",
          "html_url": "https://github.com/patrickvonplaten",
          "followers_url": "https://api.github.com/users/patrickvonplaten/followers",
          "following_url": "https://api.github.com/users/patrickvonplaten/following{/other_user}",
          "gists_url": "https://api.github.com/users/patrickvonplaten/gists{/gist_id}",
          "starred_url": "https://api.github.com/users/patrickvonplaten/starred{/owner}{/repo}",
          "subscriptions_url": "https://api.github.com/users/patrickvonplaten/subscriptions",
          "organizations_url": "https://api.github.com/users/patrickvonplaten/orgs",
          "repos_url": "https://api.github.com/users/patrickvonplaten/repos",
          "events_url": "https://api.github.com/users/patrickvonplaten/events{/privacy}",
          "received_events_url": "https://api.github.com/users/patrickvonplaten/received_events",
          "type": "User",
          "user_view_type": "public",
          "site_admin": false
        },
        "body": "```suggestion\r\n            raise TokenizerException(\"Empty assistant message.\")\r\n```",
        "created_at": "2024-04-21T12:16:17Z",
        "updated_at": "2024-04-21T12:16:17Z",
        "html_url": "https://github.com/mistralai/mistral-common/pull/4#discussion_r1573732672",
        "pull_request_url": "https://api.github.com/repos/mistralai/mistral-common/pulls/4",
        "author_association": "CONTRIBUTOR",
        "_links": {
          "self": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/1573732672"
          },
          "html": {
            "href": "https://github.com/mistralai/mistral-common/pull/4#discussion_r1573732672"
          },
          "pull_request": {
            "href": "https://api.github.com/repos/mistralai/mistral-common/pulls/4"
          }
        },
        "reactions": {
          "url": "https://api.github.com/repos/mistralai/mistral-common/pulls/comments/1573732672/reactions",
          "total_count": 0,
          "+1": 0,
          "-1": 0,
          "laugh": 0,
          "hooray": 0,
          "confused": 0,
          "heart": 0,
          "rocket": 0,
          "eyes": 0
        },
        "start_line": null,
        "original_start_line": null,
        "start_side": null,
        "line": null,
        "original_line": 293,
        "side": "RIGHT",
        "original_position": 5,
        "position": null,
        "subject_type": "line"
      }
    ]
  }
}